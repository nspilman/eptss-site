"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/posthog-node";
exports.ids = ["vendor-chunks/posthog-node"];
exports.modules = {

/***/ "(action-browser)/../../node_modules/posthog-node/dist/client.mjs":
/*!*******************************************************!*\
  !*** ../../node_modules/posthog-node/dist/client.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHogBackendClient: () => (/* binding */ PostHogBackendClient)\n/* harmony export */ });\n/* harmony import */ var _version_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./version.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/version.mjs\");\n/* harmony import */ var _posthog_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @posthog/core */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs\");\n/* harmony import */ var _extensions_feature_flags_feature_flags_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./extensions/feature-flags/feature-flags.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/feature-flags/feature-flags.mjs\");\n/* harmony import */ var _extensions_error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./extensions/error-tracking/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/index.mjs\");\n/* harmony import */ var _storage_memory_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storage-memory.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/storage-memory.mjs\");\n\n\n\n\n\nconst MINIMUM_POLLING_INTERVAL = 100;\nconst THIRTY_SECONDS = 30000;\nconst MAX_CACHE_SIZE = 50000;\nclass PostHogBackendClient extends _posthog_core__WEBPACK_IMPORTED_MODULE_1__.PostHogCoreStateless {\n    constructor(apiKey, options = {}){\n        super(apiKey, options), this._memoryStorage = new _storage_memory_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogMemoryStorage();\n        this.options = options;\n        this.options.featureFlagsPollingInterval = 'number' == typeof options.featureFlagsPollingInterval ? Math.max(options.featureFlagsPollingInterval, MINIMUM_POLLING_INTERVAL) : THIRTY_SECONDS;\n        if (options.personalApiKey) {\n            if (options.personalApiKey.includes('phc_')) throw new Error('Your Personal API key is invalid. These keys are prefixed with \"phx_\" and can be created in PostHog project settings.');\n            const shouldEnableLocalEvaluation = false !== options.enableLocalEvaluation;\n            if (shouldEnableLocalEvaluation) this.featureFlagsPoller = new _extensions_feature_flags_feature_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.FeatureFlagsPoller({\n                pollingInterval: this.options.featureFlagsPollingInterval,\n                personalApiKey: options.personalApiKey,\n                projectApiKey: apiKey,\n                timeout: options.requestTimeout ?? 10000,\n                host: this.host,\n                fetch: options.fetch,\n                onError: (err)=>{\n                    this._events.emit('error', err);\n                },\n                onLoad: (count)=>{\n                    this._events.emit('localEvaluationFlagsLoaded', count);\n                },\n                customHeaders: this.getCustomHeaders()\n            });\n        }\n        this.errorTracking = new _extensions_error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this, options, this._logger);\n        this.distinctIdHasSentFlagCalls = {};\n        this.maxCacheSize = options.maxCacheSize || MAX_CACHE_SIZE;\n    }\n    getPersistedProperty(key) {\n        return this._memoryStorage.getProperty(key);\n    }\n    setPersistedProperty(key, value) {\n        return this._memoryStorage.setProperty(key, value);\n    }\n    fetch(url, options) {\n        return this.options.fetch ? this.options.fetch(url, options) : fetch(url, options);\n    }\n    getLibraryVersion() {\n        return _version_mjs__WEBPACK_IMPORTED_MODULE_0__.version;\n    }\n    getCustomUserAgent() {\n        return `${this.getLibraryId()}/${this.getLibraryVersion()}`;\n    }\n    enable() {\n        return super.optIn();\n    }\n    disable() {\n        return super.optOut();\n    }\n    debug(enabled = true) {\n        super.debug(enabled);\n        this.featureFlagsPoller?.debug(enabled);\n    }\n    capture(props) {\n        if ('string' == typeof props) this._logger.warn('Called capture() with a string as the first argument when an object was expected.');\n        this.addPendingPromise(this.prepareEventMessage(props).then(({ distinctId, event, properties, options })=>super.captureStateless(distinctId, event, properties, {\n                timestamp: options.timestamp,\n                disableGeoip: options.disableGeoip,\n                uuid: options.uuid\n            })).catch((err)=>{\n            if (err) console.error(err);\n        }));\n    }\n    async captureImmediate(props) {\n        if ('string' == typeof props) this._logger.warn('Called captureImmediate() with a string as the first argument when an object was expected.');\n        return this.addPendingPromise(this.prepareEventMessage(props).then(({ distinctId, event, properties, options })=>super.captureStatelessImmediate(distinctId, event, properties, {\n                timestamp: options.timestamp,\n                disableGeoip: options.disableGeoip,\n                uuid: options.uuid\n            })).catch((err)=>{\n            if (err) console.error(err);\n        }));\n    }\n    identify({ distinctId, properties, disableGeoip }) {\n        const userPropsOnce = properties?.$set_once;\n        delete properties?.$set_once;\n        const userProps = properties?.$set || properties;\n        super.identifyStateless(distinctId, {\n            $set: userProps,\n            $set_once: userPropsOnce\n        }, {\n            disableGeoip\n        });\n    }\n    async identifyImmediate({ distinctId, properties, disableGeoip }) {\n        const userPropsOnce = properties?.$set_once;\n        delete properties?.$set_once;\n        const userProps = properties?.$set || properties;\n        await super.identifyStatelessImmediate(distinctId, {\n            $set: userProps,\n            $set_once: userPropsOnce\n        }, {\n            disableGeoip\n        });\n    }\n    alias(data) {\n        super.aliasStateless(data.alias, data.distinctId, void 0, {\n            disableGeoip: data.disableGeoip\n        });\n    }\n    async aliasImmediate(data) {\n        await super.aliasStatelessImmediate(data.alias, data.distinctId, void 0, {\n            disableGeoip: data.disableGeoip\n        });\n    }\n    isLocalEvaluationReady() {\n        return this.featureFlagsPoller?.isLocalEvaluationReady() ?? false;\n    }\n    async waitForLocalEvaluationReady(timeoutMs = THIRTY_SECONDS) {\n        if (this.isLocalEvaluationReady()) return true;\n        if (void 0 === this.featureFlagsPoller) return false;\n        return new Promise((resolve)=>{\n            const timeout = setTimeout(()=>{\n                cleanup();\n                resolve(false);\n            }, timeoutMs);\n            const cleanup = this._events.on('localEvaluationFlagsLoaded', (count)=>{\n                clearTimeout(timeout);\n                cleanup();\n                resolve(count > 0);\n            });\n        });\n    }\n    async getFeatureFlag(key, distinctId, options) {\n        const { groups, disableGeoip } = options || {};\n        let { onlyEvaluateLocally, sendFeatureFlagEvents, personProperties, groupProperties } = options || {};\n        const adjustedProperties = this.addLocalPersonAndGroupProperties(distinctId, groups, personProperties, groupProperties);\n        personProperties = adjustedProperties.allPersonProperties;\n        groupProperties = adjustedProperties.allGroupProperties;\n        if (void 0 == onlyEvaluateLocally) onlyEvaluateLocally = false;\n        if (void 0 == sendFeatureFlagEvents) sendFeatureFlagEvents = this.options.sendFeatureFlagEvent ?? true;\n        let response = await this.featureFlagsPoller?.getFeatureFlag(key, distinctId, groups, personProperties, groupProperties);\n        const flagWasLocallyEvaluated = void 0 !== response;\n        let requestId;\n        let flagDetail;\n        if (!flagWasLocallyEvaluated && !onlyEvaluateLocally) {\n            const remoteResponse = await super.getFeatureFlagDetailStateless(key, distinctId, groups, personProperties, groupProperties, disableGeoip);\n            if (void 0 === remoteResponse) return;\n            flagDetail = remoteResponse.response;\n            response = (0,_posthog_core__WEBPACK_IMPORTED_MODULE_1__.getFeatureFlagValue)(flagDetail);\n            requestId = remoteResponse?.requestId;\n        }\n        const featureFlagReportedKey = `${key}_${response}`;\n        if (sendFeatureFlagEvents && (!(distinctId in this.distinctIdHasSentFlagCalls) || !this.distinctIdHasSentFlagCalls[distinctId].includes(featureFlagReportedKey))) {\n            if (Object.keys(this.distinctIdHasSentFlagCalls).length >= this.maxCacheSize) this.distinctIdHasSentFlagCalls = {};\n            if (Array.isArray(this.distinctIdHasSentFlagCalls[distinctId])) this.distinctIdHasSentFlagCalls[distinctId].push(featureFlagReportedKey);\n            else this.distinctIdHasSentFlagCalls[distinctId] = [\n                featureFlagReportedKey\n            ];\n            this.capture({\n                distinctId,\n                event: '$feature_flag_called',\n                properties: {\n                    $feature_flag: key,\n                    $feature_flag_response: response,\n                    $feature_flag_id: flagDetail?.metadata?.id,\n                    $feature_flag_version: flagDetail?.metadata?.version,\n                    $feature_flag_reason: flagDetail?.reason?.description ?? flagDetail?.reason?.code,\n                    locally_evaluated: flagWasLocallyEvaluated,\n                    [`$feature/${key}`]: response,\n                    $feature_flag_request_id: requestId\n                },\n                groups,\n                disableGeoip\n            });\n        }\n        return response;\n    }\n    async getFeatureFlagPayload(key, distinctId, matchValue, options) {\n        const { groups, disableGeoip } = options || {};\n        let { onlyEvaluateLocally, personProperties, groupProperties } = options || {};\n        const adjustedProperties = this.addLocalPersonAndGroupProperties(distinctId, groups, personProperties, groupProperties);\n        personProperties = adjustedProperties.allPersonProperties;\n        groupProperties = adjustedProperties.allGroupProperties;\n        let response;\n        const localEvaluationEnabled = void 0 !== this.featureFlagsPoller;\n        if (localEvaluationEnabled) {\n            await this.featureFlagsPoller?.loadFeatureFlags();\n            const flag = this.featureFlagsPoller?.featureFlagsByKey[key];\n            if (flag) try {\n                const result = await this.featureFlagsPoller?.computeFlagAndPayloadLocally(flag, distinctId, groups, personProperties, groupProperties, matchValue);\n                if (result) {\n                    matchValue = result.value;\n                    response = result.payload;\n                }\n            } catch (e) {\n                if (e instanceof _extensions_feature_flags_feature_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.RequiresServerEvaluation || e instanceof _extensions_feature_flags_feature_flags_mjs__WEBPACK_IMPORTED_MODULE_2__.InconclusiveMatchError) this._logger?.info(`${e.name} when computing flag locally: ${flag.key}: ${e.message}`);\n                else throw e;\n            }\n        }\n        if (void 0 == onlyEvaluateLocally) onlyEvaluateLocally = false;\n        const payloadWasLocallyEvaluated = void 0 !== response;\n        if (!payloadWasLocallyEvaluated && !onlyEvaluateLocally) response = await super.getFeatureFlagPayloadStateless(key, distinctId, groups, personProperties, groupProperties, disableGeoip);\n        return response;\n    }\n    async getRemoteConfigPayload(flagKey) {\n        if (!this.options.personalApiKey) throw new Error('Personal API key is required for remote config payload decryption');\n        const response = await this._requestRemoteConfigPayload(flagKey);\n        if (!response) return;\n        const parsed = await response.json();\n        if ('string' == typeof parsed) try {\n            return JSON.parse(parsed);\n        } catch (e) {}\n        return parsed;\n    }\n    async isFeatureEnabled(key, distinctId, options) {\n        const feat = await this.getFeatureFlag(key, distinctId, options);\n        if (void 0 === feat) return;\n        return !!feat || false;\n    }\n    async getAllFlags(distinctId, options) {\n        const response = await this.getAllFlagsAndPayloads(distinctId, options);\n        return response.featureFlags || {};\n    }\n    async getAllFlagsAndPayloads(distinctId, options) {\n        const { groups, disableGeoip, flagKeys } = options || {};\n        let { onlyEvaluateLocally, personProperties, groupProperties } = options || {};\n        const adjustedProperties = this.addLocalPersonAndGroupProperties(distinctId, groups, personProperties, groupProperties);\n        personProperties = adjustedProperties.allPersonProperties;\n        groupProperties = adjustedProperties.allGroupProperties;\n        if (void 0 == onlyEvaluateLocally) onlyEvaluateLocally = false;\n        const localEvaluationResult = await this.featureFlagsPoller?.getAllFlagsAndPayloads(distinctId, groups, personProperties, groupProperties, flagKeys);\n        let featureFlags = {};\n        let featureFlagPayloads = {};\n        let fallbackToFlags = true;\n        if (localEvaluationResult) {\n            featureFlags = localEvaluationResult.response;\n            featureFlagPayloads = localEvaluationResult.payloads;\n            fallbackToFlags = localEvaluationResult.fallbackToFlags;\n        }\n        if (fallbackToFlags && !onlyEvaluateLocally) {\n            const remoteEvaluationResult = await super.getFeatureFlagsAndPayloadsStateless(distinctId, groups, personProperties, groupProperties, disableGeoip, flagKeys);\n            featureFlags = {\n                ...featureFlags,\n                ...remoteEvaluationResult.flags || {}\n            };\n            featureFlagPayloads = {\n                ...featureFlagPayloads,\n                ...remoteEvaluationResult.payloads || {}\n            };\n        }\n        return {\n            featureFlags,\n            featureFlagPayloads\n        };\n    }\n    groupIdentify({ groupType, groupKey, properties, distinctId, disableGeoip }) {\n        super.groupIdentifyStateless(groupType, groupKey, properties, {\n            disableGeoip\n        }, distinctId);\n    }\n    async reloadFeatureFlags() {\n        await this.featureFlagsPoller?.loadFeatureFlags(true);\n    }\n    async _shutdown(shutdownTimeoutMs) {\n        this.featureFlagsPoller?.stopPoller();\n        this.errorTracking.shutdown();\n        return super._shutdown(shutdownTimeoutMs);\n    }\n    async _requestRemoteConfigPayload(flagKey) {\n        if (!this.options.personalApiKey) return;\n        const url = `${this.host}/api/projects/@current/feature_flags/${flagKey}/remote_config?token=${encodeURIComponent(this.apiKey)}`;\n        const options = {\n            method: 'GET',\n            headers: {\n                ...this.getCustomHeaders(),\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${this.options.personalApiKey}`\n            }\n        };\n        let abortTimeout = null;\n        if (this.options.requestTimeout && 'number' == typeof this.options.requestTimeout) {\n            const controller = new AbortController();\n            abortTimeout = (0,_posthog_core__WEBPACK_IMPORTED_MODULE_1__.safeSetTimeout)(()=>{\n                controller.abort();\n            }, this.options.requestTimeout);\n            options.signal = controller.signal;\n        }\n        try {\n            return await this.fetch(url, options);\n        } catch (error) {\n            this._events.emit('error', error);\n            return;\n        } finally{\n            if (abortTimeout) clearTimeout(abortTimeout);\n        }\n    }\n    extractPropertiesFromEvent(eventProperties, groups) {\n        if (!eventProperties) return {\n            personProperties: {},\n            groupProperties: {}\n        };\n        const personProperties = {};\n        const groupProperties = {};\n        for (const [key, value] of Object.entries(eventProperties))if ((0,_posthog_core__WEBPACK_IMPORTED_MODULE_1__.isPlainObject)(value) && groups && key in groups) {\n            const groupProps = {};\n            for (const [groupKey, groupValue] of Object.entries(value))groupProps[String(groupKey)] = String(groupValue);\n            groupProperties[String(key)] = groupProps;\n        } else personProperties[String(key)] = String(value);\n        return {\n            personProperties,\n            groupProperties\n        };\n    }\n    async getFeatureFlagsForEvent(distinctId, groups, disableGeoip, sendFeatureFlagsOptions) {\n        const finalPersonProperties = sendFeatureFlagsOptions?.personProperties || {};\n        const finalGroupProperties = sendFeatureFlagsOptions?.groupProperties || {};\n        const flagKeys = sendFeatureFlagsOptions?.flagKeys;\n        const onlyEvaluateLocally = sendFeatureFlagsOptions?.onlyEvaluateLocally ?? false;\n        if (onlyEvaluateLocally) if (!((this.featureFlagsPoller?.featureFlags?.length || 0) > 0)) return {};\n        else {\n            const groupsWithStringValues = {};\n            for (const [key, value] of Object.entries(groups || {}))groupsWithStringValues[key] = String(value);\n            return await this.getAllFlags(distinctId, {\n                groups: groupsWithStringValues,\n                personProperties: finalPersonProperties,\n                groupProperties: finalGroupProperties,\n                disableGeoip,\n                onlyEvaluateLocally: true,\n                flagKeys\n            });\n        }\n        if ((this.featureFlagsPoller?.featureFlags?.length || 0) > 0) {\n            const groupsWithStringValues = {};\n            for (const [key, value] of Object.entries(groups || {}))groupsWithStringValues[key] = String(value);\n            return await this.getAllFlags(distinctId, {\n                groups: groupsWithStringValues,\n                personProperties: finalPersonProperties,\n                groupProperties: finalGroupProperties,\n                disableGeoip,\n                onlyEvaluateLocally: true,\n                flagKeys\n            });\n        }\n        return (await super.getFeatureFlagsStateless(distinctId, groups, finalPersonProperties, finalGroupProperties, disableGeoip)).flags;\n    }\n    addLocalPersonAndGroupProperties(distinctId, groups, personProperties, groupProperties) {\n        const allPersonProperties = {\n            distinct_id: distinctId,\n            ...personProperties || {}\n        };\n        const allGroupProperties = {};\n        if (groups) for (const groupName of Object.keys(groups))allGroupProperties[groupName] = {\n            $group_key: groups[groupName],\n            ...groupProperties?.[groupName] || {}\n        };\n        return {\n            allPersonProperties,\n            allGroupProperties\n        };\n    }\n    captureException(error, distinctId, additionalProperties) {\n        const syntheticException = new Error('PostHog syntheticException');\n        this.addPendingPromise(_extensions_error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buildEventMessage(error, {\n            syntheticException\n        }, distinctId, additionalProperties).then((msg)=>this.capture(msg)));\n    }\n    async captureExceptionImmediate(error, distinctId, additionalProperties) {\n        const syntheticException = new Error('PostHog syntheticException');\n        this.addPendingPromise(_extensions_error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].buildEventMessage(error, {\n            syntheticException\n        }, distinctId, additionalProperties).then((msg)=>this.captureImmediate(msg)));\n    }\n    async prepareEventMessage(props) {\n        const { distinctId, event, properties, groups, sendFeatureFlags, timestamp, disableGeoip, uuid } = props;\n        const eventMessage = this._runBeforeSend({\n            distinctId,\n            event,\n            properties,\n            groups,\n            sendFeatureFlags,\n            timestamp,\n            disableGeoip,\n            uuid\n        });\n        if (!eventMessage) return Promise.reject(null);\n        const eventProperties = await Promise.resolve().then(async ()=>{\n            if (sendFeatureFlags) {\n                const sendFeatureFlagsOptions = 'object' == typeof sendFeatureFlags ? sendFeatureFlags : void 0;\n                return await this.getFeatureFlagsForEvent(distinctId, groups, disableGeoip, sendFeatureFlagsOptions);\n            }\n            return {};\n        }).then((flags)=>{\n            const additionalProperties = {};\n            if (flags) for (const [feature, variant] of Object.entries(flags))additionalProperties[`$feature/${feature}`] = variant;\n            const activeFlags = Object.keys(flags || {}).filter((flag)=>flags?.[flag] !== false).sort();\n            if (activeFlags.length > 0) additionalProperties['$active_feature_flags'] = activeFlags;\n            return additionalProperties;\n        }).catch(()=>({})).then((additionalProperties)=>{\n            const props = {\n                ...additionalProperties,\n                ...eventMessage.properties || {},\n                $groups: eventMessage.groups || groups\n            };\n            return props;\n        });\n        return {\n            distinctId: eventMessage.distinctId,\n            event: eventMessage.event,\n            properties: eventProperties,\n            options: {\n                timestamp: eventMessage.timestamp,\n                disableGeoip: eventMessage.disableGeoip,\n                uuid: eventMessage.uuid\n            }\n        };\n    }\n    _runBeforeSend(eventMessage) {\n        const beforeSend = this.options.before_send;\n        if (!beforeSend) return eventMessage;\n        const fns = Array.isArray(beforeSend) ? beforeSend : [\n            beforeSend\n        ];\n        let result = eventMessage;\n        for (const fn of fns){\n            result = fn(result);\n            if (!result) {\n                this._logger.info(`Event '${eventMessage.event}' was rejected in beforeSend function`);\n                return null;\n            }\n            if (!result.properties || 0 === Object.keys(result.properties).length) {\n                const message = `Event '${result.event}' has no properties after beforeSend function, this is likely an error.`;\n                this._logger.warn(message);\n            }\n        }\n        return result;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0M7QUFDaUU7QUFDMkI7QUFDakU7QUFDUDtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsK0RBQW9CO0FBQ3ZELG9DQUFvQztBQUNwQywwREFBMEQscUVBQW9CO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsMkZBQWtCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBLGlDQUFpQyw0RUFBYztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaURBQU87QUFDdEI7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0IsR0FBRyx5QkFBeUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsd0NBQXdDO0FBQy9HO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsd0NBQXdDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBLGVBQWUsc0NBQXNDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLDhCQUE4QixzQ0FBc0M7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsdUJBQXVCO0FBQ3ZDLGNBQWMsZ0ZBQWdGO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFtQjtBQUMxQztBQUNBO0FBQ0EsMENBQTBDLElBQUksR0FBRyxTQUFTO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLElBQUk7QUFDckM7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1QkFBdUI7QUFDdkMsY0FBYyx5REFBeUQ7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxpQ0FBaUMsaUdBQXdCLGlCQUFpQiwrRkFBc0Isd0JBQXdCLFFBQVEsK0JBQStCLFNBQVMsSUFBSSxVQUFVO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUNBQWlDO0FBQ2pELGNBQWMseURBQXlEO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQTJEO0FBQy9FO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixVQUFVLHVDQUF1QyxRQUFRLHVCQUF1QixnQ0FBZ0M7QUFDdkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw0QkFBNEI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2REFBYztBQUN6QztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsNERBQWE7QUFDcEY7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDRFQUFjO0FBQzdDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0RUFBYztBQUM3QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0JBQWdCLHlGQUF5RjtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSwrR0FBK0csUUFBUTtBQUN2SCx1REFBdUQ7QUFDdkQ7QUFDQTtBQUNBLFNBQVMsZUFBZTtBQUN4QjtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsbUJBQW1CO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxhQUFhO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNnQyIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4vdmVyc2lvbi5tanNcIjtcbmltcG9ydCB7IFBvc3RIb2dDb3JlU3RhdGVsZXNzLCBnZXRGZWF0dXJlRmxhZ1ZhbHVlLCBpc1BsYWluT2JqZWN0LCBzYWZlU2V0VGltZW91dCB9IGZyb20gXCJAcG9zdGhvZy9jb3JlXCI7XG5pbXBvcnQgeyBGZWF0dXJlRmxhZ3NQb2xsZXIsIEluY29uY2x1c2l2ZU1hdGNoRXJyb3IsIFJlcXVpcmVzU2VydmVyRXZhbHVhdGlvbiB9IGZyb20gXCIuL2V4dGVuc2lvbnMvZmVhdHVyZS1mbGFncy9mZWF0dXJlLWZsYWdzLm1qc1wiO1xuaW1wb3J0IGVycm9yX3RyYWNraW5nIGZyb20gXCIuL2V4dGVuc2lvbnMvZXJyb3ItdHJhY2tpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBQb3N0SG9nTWVtb3J5U3RvcmFnZSB9IGZyb20gXCIuL3N0b3JhZ2UtbWVtb3J5Lm1qc1wiO1xuY29uc3QgTUlOSU1VTV9QT0xMSU5HX0lOVEVSVkFMID0gMTAwO1xuY29uc3QgVEhJUlRZX1NFQ09ORFMgPSAzMDAwMDtcbmNvbnN0IE1BWF9DQUNIRV9TSVpFID0gNTAwMDA7XG5jbGFzcyBQb3N0SG9nQmFja2VuZENsaWVudCBleHRlbmRzIFBvc3RIb2dDb3JlU3RhdGVsZXNzIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIG9wdGlvbnMgPSB7fSl7XG4gICAgICAgIHN1cGVyKGFwaUtleSwgb3B0aW9ucyksIHRoaXMuX21lbW9yeVN0b3JhZ2UgPSBuZXcgUG9zdEhvZ01lbW9yeVN0b3JhZ2UoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5vcHRpb25zLmZlYXR1cmVGbGFnc1BvbGxpbmdJbnRlcnZhbCA9ICdudW1iZXInID09IHR5cGVvZiBvcHRpb25zLmZlYXR1cmVGbGFnc1BvbGxpbmdJbnRlcnZhbCA/IE1hdGgubWF4KG9wdGlvbnMuZmVhdHVyZUZsYWdzUG9sbGluZ0ludGVydmFsLCBNSU5JTVVNX1BPTExJTkdfSU5URVJWQUwpIDogVEhJUlRZX1NFQ09ORFM7XG4gICAgICAgIGlmIChvcHRpb25zLnBlcnNvbmFsQXBpS2V5KSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wZXJzb25hbEFwaUtleS5pbmNsdWRlcygncGhjXycpKSB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgUGVyc29uYWwgQVBJIGtleSBpcyBpbnZhbGlkLiBUaGVzZSBrZXlzIGFyZSBwcmVmaXhlZCB3aXRoIFwicGh4X1wiIGFuZCBjYW4gYmUgY3JlYXRlZCBpbiBQb3N0SG9nIHByb2plY3Qgc2V0dGluZ3MuJyk7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRFbmFibGVMb2NhbEV2YWx1YXRpb24gPSBmYWxzZSAhPT0gb3B0aW9ucy5lbmFibGVMb2NhbEV2YWx1YXRpb247XG4gICAgICAgICAgICBpZiAoc2hvdWxkRW5hYmxlTG9jYWxFdmFsdWF0aW9uKSB0aGlzLmZlYXR1cmVGbGFnc1BvbGxlciA9IG5ldyBGZWF0dXJlRmxhZ3NQb2xsZXIoe1xuICAgICAgICAgICAgICAgIHBvbGxpbmdJbnRlcnZhbDogdGhpcy5vcHRpb25zLmZlYXR1cmVGbGFnc1BvbGxpbmdJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICBwZXJzb25hbEFwaUtleTogb3B0aW9ucy5wZXJzb25hbEFwaUtleSxcbiAgICAgICAgICAgICAgICBwcm9qZWN0QXBpS2V5OiBhcGlLZXksXG4gICAgICAgICAgICAgICAgdGltZW91dDogb3B0aW9ucy5yZXF1ZXN0VGltZW91dCA/PyAxMDAwMCxcbiAgICAgICAgICAgICAgICBob3N0OiB0aGlzLmhvc3QsXG4gICAgICAgICAgICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgICAgICAgICAgICAgb25FcnJvcjogKGVycik9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uTG9hZDogKGNvdW50KT0+e1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHMuZW1pdCgnbG9jYWxFdmFsdWF0aW9uRmxhZ3NMb2FkZWQnLCBjb3VudCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjdXN0b21IZWFkZXJzOiB0aGlzLmdldEN1c3RvbUhlYWRlcnMoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lcnJvclRyYWNraW5nID0gbmV3IGVycm9yX3RyYWNraW5nKHRoaXMsIG9wdGlvbnMsIHRoaXMuX2xvZ2dlcik7XG4gICAgICAgIHRoaXMuZGlzdGluY3RJZEhhc1NlbnRGbGFnQ2FsbHMgPSB7fTtcbiAgICAgICAgdGhpcy5tYXhDYWNoZVNpemUgPSBvcHRpb25zLm1heENhY2hlU2l6ZSB8fCBNQVhfQ0FDSEVfU0laRTtcbiAgICB9XG4gICAgZ2V0UGVyc2lzdGVkUHJvcGVydHkoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tZW1vcnlTdG9yYWdlLmdldFByb3BlcnR5KGtleSk7XG4gICAgfVxuICAgIHNldFBlcnNpc3RlZFByb3BlcnR5KGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lbW9yeVN0b3JhZ2Uuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIGZldGNoKHVybCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmZldGNoID8gdGhpcy5vcHRpb25zLmZldGNoKHVybCwgb3B0aW9ucykgOiBmZXRjaCh1cmwsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXRMaWJyYXJ5VmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgfVxuICAgIGdldEN1c3RvbVVzZXJBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0TGlicmFyeUlkKCl9LyR7dGhpcy5nZXRMaWJyYXJ5VmVyc2lvbigpfWA7XG4gICAgfVxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLm9wdEluKCk7XG4gICAgfVxuICAgIGRpc2FibGUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5vcHRPdXQoKTtcbiAgICB9XG4gICAgZGVidWcoZW5hYmxlZCA9IHRydWUpIHtcbiAgICAgICAgc3VwZXIuZGVidWcoZW5hYmxlZCk7XG4gICAgICAgIHRoaXMuZmVhdHVyZUZsYWdzUG9sbGVyPy5kZWJ1ZyhlbmFibGVkKTtcbiAgICB9XG4gICAgY2FwdHVyZShwcm9wcykge1xuICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHByb3BzKSB0aGlzLl9sb2dnZXIud2FybignQ2FsbGVkIGNhcHR1cmUoKSB3aXRoIGEgc3RyaW5nIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB3aGVuIGFuIG9iamVjdCB3YXMgZXhwZWN0ZWQuJyk7XG4gICAgICAgIHRoaXMuYWRkUGVuZGluZ1Byb21pc2UodGhpcy5wcmVwYXJlRXZlbnRNZXNzYWdlKHByb3BzKS50aGVuKCh7IGRpc3RpbmN0SWQsIGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zIH0pPT5zdXBlci5jYXB0dXJlU3RhdGVsZXNzKGRpc3RpbmN0SWQsIGV2ZW50LCBwcm9wZXJ0aWVzLCB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBvcHRpb25zLnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlR2VvaXA6IG9wdGlvbnMuZGlzYWJsZUdlb2lwLFxuICAgICAgICAgICAgICAgIHV1aWQ6IG9wdGlvbnMudXVpZFxuICAgICAgICAgICAgfSkpLmNhdGNoKChlcnIpPT57XG4gICAgICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgY2FwdHVyZUltbWVkaWF0ZShwcm9wcykge1xuICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHByb3BzKSB0aGlzLl9sb2dnZXIud2FybignQ2FsbGVkIGNhcHR1cmVJbW1lZGlhdGUoKSB3aXRoIGEgc3RyaW5nIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB3aGVuIGFuIG9iamVjdCB3YXMgZXhwZWN0ZWQuJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZFBlbmRpbmdQcm9taXNlKHRoaXMucHJlcGFyZUV2ZW50TWVzc2FnZShwcm9wcykudGhlbigoeyBkaXN0aW5jdElkLCBldmVudCwgcHJvcGVydGllcywgb3B0aW9ucyB9KT0+c3VwZXIuY2FwdHVyZVN0YXRlbGVzc0ltbWVkaWF0ZShkaXN0aW5jdElkLCBldmVudCwgcHJvcGVydGllcywge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogb3B0aW9ucy50aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgZGlzYWJsZUdlb2lwOiBvcHRpb25zLmRpc2FibGVHZW9pcCxcbiAgICAgICAgICAgICAgICB1dWlkOiBvcHRpb25zLnV1aWRcbiAgICAgICAgICAgIH0pKS5jYXRjaCgoZXJyKT0+e1xuICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGlkZW50aWZ5KHsgZGlzdGluY3RJZCwgcHJvcGVydGllcywgZGlzYWJsZUdlb2lwIH0pIHtcbiAgICAgICAgY29uc3QgdXNlclByb3BzT25jZSA9IHByb3BlcnRpZXM/LiRzZXRfb25jZTtcbiAgICAgICAgZGVsZXRlIHByb3BlcnRpZXM/LiRzZXRfb25jZTtcbiAgICAgICAgY29uc3QgdXNlclByb3BzID0gcHJvcGVydGllcz8uJHNldCB8fCBwcm9wZXJ0aWVzO1xuICAgICAgICBzdXBlci5pZGVudGlmeVN0YXRlbGVzcyhkaXN0aW5jdElkLCB7XG4gICAgICAgICAgICAkc2V0OiB1c2VyUHJvcHMsXG4gICAgICAgICAgICAkc2V0X29uY2U6IHVzZXJQcm9wc09uY2VcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGlzYWJsZUdlb2lwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBpZGVudGlmeUltbWVkaWF0ZSh7IGRpc3RpbmN0SWQsIHByb3BlcnRpZXMsIGRpc2FibGVHZW9pcCB9KSB7XG4gICAgICAgIGNvbnN0IHVzZXJQcm9wc09uY2UgPSBwcm9wZXJ0aWVzPy4kc2V0X29uY2U7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzPy4kc2V0X29uY2U7XG4gICAgICAgIGNvbnN0IHVzZXJQcm9wcyA9IHByb3BlcnRpZXM/LiRzZXQgfHwgcHJvcGVydGllcztcbiAgICAgICAgYXdhaXQgc3VwZXIuaWRlbnRpZnlTdGF0ZWxlc3NJbW1lZGlhdGUoZGlzdGluY3RJZCwge1xuICAgICAgICAgICAgJHNldDogdXNlclByb3BzLFxuICAgICAgICAgICAgJHNldF9vbmNlOiB1c2VyUHJvcHNPbmNlXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRpc2FibGVHZW9pcFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWxpYXMoZGF0YSkge1xuICAgICAgICBzdXBlci5hbGlhc1N0YXRlbGVzcyhkYXRhLmFsaWFzLCBkYXRhLmRpc3RpbmN0SWQsIHZvaWQgMCwge1xuICAgICAgICAgICAgZGlzYWJsZUdlb2lwOiBkYXRhLmRpc2FibGVHZW9pcFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgYWxpYXNJbW1lZGlhdGUoZGF0YSkge1xuICAgICAgICBhd2FpdCBzdXBlci5hbGlhc1N0YXRlbGVzc0ltbWVkaWF0ZShkYXRhLmFsaWFzLCBkYXRhLmRpc3RpbmN0SWQsIHZvaWQgMCwge1xuICAgICAgICAgICAgZGlzYWJsZUdlb2lwOiBkYXRhLmRpc2FibGVHZW9pcFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNMb2NhbEV2YWx1YXRpb25SZWFkeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZUZsYWdzUG9sbGVyPy5pc0xvY2FsRXZhbHVhdGlvblJlYWR5KCkgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRGb3JMb2NhbEV2YWx1YXRpb25SZWFkeSh0aW1lb3V0TXMgPSBUSElSVFlfU0VDT05EUykge1xuICAgICAgICBpZiAodGhpcy5pc0xvY2FsRXZhbHVhdGlvblJlYWR5KCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLmZlYXR1cmVGbGFnc1BvbGxlcikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpPT57XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXRNcyk7XG4gICAgICAgICAgICBjb25zdCBjbGVhbnVwID0gdGhpcy5fZXZlbnRzLm9uKCdsb2NhbEV2YWx1YXRpb25GbGFnc0xvYWRlZCcsIChjb3VudCk9PntcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoY291bnQgPiAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVhdHVyZUZsYWcoa2V5LCBkaXN0aW5jdElkLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgZ3JvdXBzLCBkaXNhYmxlR2VvaXAgfSA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIGxldCB7IG9ubHlFdmFsdWF0ZUxvY2FsbHksIHNlbmRGZWF0dXJlRmxhZ0V2ZW50cywgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzIH0gPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBjb25zdCBhZGp1c3RlZFByb3BlcnRpZXMgPSB0aGlzLmFkZExvY2FsUGVyc29uQW5kR3JvdXBQcm9wZXJ0aWVzKGRpc3RpbmN0SWQsIGdyb3VwcywgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzKTtcbiAgICAgICAgcGVyc29uUHJvcGVydGllcyA9IGFkanVzdGVkUHJvcGVydGllcy5hbGxQZXJzb25Qcm9wZXJ0aWVzO1xuICAgICAgICBncm91cFByb3BlcnRpZXMgPSBhZGp1c3RlZFByb3BlcnRpZXMuYWxsR3JvdXBQcm9wZXJ0aWVzO1xuICAgICAgICBpZiAodm9pZCAwID09IG9ubHlFdmFsdWF0ZUxvY2FsbHkpIG9ubHlFdmFsdWF0ZUxvY2FsbHkgPSBmYWxzZTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PSBzZW5kRmVhdHVyZUZsYWdFdmVudHMpIHNlbmRGZWF0dXJlRmxhZ0V2ZW50cyA9IHRoaXMub3B0aW9ucy5zZW5kRmVhdHVyZUZsYWdFdmVudCA/PyB0cnVlO1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZlYXR1cmVGbGFnc1BvbGxlcj8uZ2V0RmVhdHVyZUZsYWcoa2V5LCBkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcyk7XG4gICAgICAgIGNvbnN0IGZsYWdXYXNMb2NhbGx5RXZhbHVhdGVkID0gdm9pZCAwICE9PSByZXNwb25zZTtcbiAgICAgICAgbGV0IHJlcXVlc3RJZDtcbiAgICAgICAgbGV0IGZsYWdEZXRhaWw7XG4gICAgICAgIGlmICghZmxhZ1dhc0xvY2FsbHlFdmFsdWF0ZWQgJiYgIW9ubHlFdmFsdWF0ZUxvY2FsbHkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZVJlc3BvbnNlID0gYXdhaXQgc3VwZXIuZ2V0RmVhdHVyZUZsYWdEZXRhaWxTdGF0ZWxlc3Moa2V5LCBkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcywgZGlzYWJsZUdlb2lwKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHJlbW90ZVJlc3BvbnNlKSByZXR1cm47XG4gICAgICAgICAgICBmbGFnRGV0YWlsID0gcmVtb3RlUmVzcG9uc2UucmVzcG9uc2U7XG4gICAgICAgICAgICByZXNwb25zZSA9IGdldEZlYXR1cmVGbGFnVmFsdWUoZmxhZ0RldGFpbCk7XG4gICAgICAgICAgICByZXF1ZXN0SWQgPSByZW1vdGVSZXNwb25zZT8ucmVxdWVzdElkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZlYXR1cmVGbGFnUmVwb3J0ZWRLZXkgPSBgJHtrZXl9XyR7cmVzcG9uc2V9YDtcbiAgICAgICAgaWYgKHNlbmRGZWF0dXJlRmxhZ0V2ZW50cyAmJiAoIShkaXN0aW5jdElkIGluIHRoaXMuZGlzdGluY3RJZEhhc1NlbnRGbGFnQ2FsbHMpIHx8ICF0aGlzLmRpc3RpbmN0SWRIYXNTZW50RmxhZ0NhbGxzW2Rpc3RpbmN0SWRdLmluY2x1ZGVzKGZlYXR1cmVGbGFnUmVwb3J0ZWRLZXkpKSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuZGlzdGluY3RJZEhhc1NlbnRGbGFnQ2FsbHMpLmxlbmd0aCA+PSB0aGlzLm1heENhY2hlU2l6ZSkgdGhpcy5kaXN0aW5jdElkSGFzU2VudEZsYWdDYWxscyA9IHt9O1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5kaXN0aW5jdElkSGFzU2VudEZsYWdDYWxsc1tkaXN0aW5jdElkXSkpIHRoaXMuZGlzdGluY3RJZEhhc1NlbnRGbGFnQ2FsbHNbZGlzdGluY3RJZF0ucHVzaChmZWF0dXJlRmxhZ1JlcG9ydGVkS2V5KTtcbiAgICAgICAgICAgIGVsc2UgdGhpcy5kaXN0aW5jdElkSGFzU2VudEZsYWdDYWxsc1tkaXN0aW5jdElkXSA9IFtcbiAgICAgICAgICAgICAgICBmZWF0dXJlRmxhZ1JlcG9ydGVkS2V5XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlKHtcbiAgICAgICAgICAgICAgICBkaXN0aW5jdElkLFxuICAgICAgICAgICAgICAgIGV2ZW50OiAnJGZlYXR1cmVfZmxhZ19jYWxsZWQnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgJGZlYXR1cmVfZmxhZzoga2V5LFxuICAgICAgICAgICAgICAgICAgICAkZmVhdHVyZV9mbGFnX3Jlc3BvbnNlOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgJGZlYXR1cmVfZmxhZ19pZDogZmxhZ0RldGFpbD8ubWV0YWRhdGE/LmlkLFxuICAgICAgICAgICAgICAgICAgICAkZmVhdHVyZV9mbGFnX3ZlcnNpb246IGZsYWdEZXRhaWw/Lm1ldGFkYXRhPy52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAkZmVhdHVyZV9mbGFnX3JlYXNvbjogZmxhZ0RldGFpbD8ucmVhc29uPy5kZXNjcmlwdGlvbiA/PyBmbGFnRGV0YWlsPy5yZWFzb24/LmNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsbHlfZXZhbHVhdGVkOiBmbGFnV2FzTG9jYWxseUV2YWx1YXRlZCxcbiAgICAgICAgICAgICAgICAgICAgW2AkZmVhdHVyZS8ke2tleX1gXTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICRmZWF0dXJlX2ZsYWdfcmVxdWVzdF9pZDogcmVxdWVzdElkXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBncm91cHMsXG4gICAgICAgICAgICAgICAgZGlzYWJsZUdlb2lwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIGFzeW5jIGdldEZlYXR1cmVGbGFnUGF5bG9hZChrZXksIGRpc3RpbmN0SWQsIG1hdGNoVmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBncm91cHMsIGRpc2FibGVHZW9pcCB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgbGV0IHsgb25seUV2YWx1YXRlTG9jYWxseSwgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzIH0gPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBjb25zdCBhZGp1c3RlZFByb3BlcnRpZXMgPSB0aGlzLmFkZExvY2FsUGVyc29uQW5kR3JvdXBQcm9wZXJ0aWVzKGRpc3RpbmN0SWQsIGdyb3VwcywgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzKTtcbiAgICAgICAgcGVyc29uUHJvcGVydGllcyA9IGFkanVzdGVkUHJvcGVydGllcy5hbGxQZXJzb25Qcm9wZXJ0aWVzO1xuICAgICAgICBncm91cFByb3BlcnRpZXMgPSBhZGp1c3RlZFByb3BlcnRpZXMuYWxsR3JvdXBQcm9wZXJ0aWVzO1xuICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IGxvY2FsRXZhbHVhdGlvbkVuYWJsZWQgPSB2b2lkIDAgIT09IHRoaXMuZmVhdHVyZUZsYWdzUG9sbGVyO1xuICAgICAgICBpZiAobG9jYWxFdmFsdWF0aW9uRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5mZWF0dXJlRmxhZ3NQb2xsZXI/LmxvYWRGZWF0dXJlRmxhZ3MoKTtcbiAgICAgICAgICAgIGNvbnN0IGZsYWcgPSB0aGlzLmZlYXR1cmVGbGFnc1BvbGxlcj8uZmVhdHVyZUZsYWdzQnlLZXlba2V5XTtcbiAgICAgICAgICAgIGlmIChmbGFnKSB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZmVhdHVyZUZsYWdzUG9sbGVyPy5jb21wdXRlRmxhZ0FuZFBheWxvYWRMb2NhbGx5KGZsYWcsIGRpc3RpbmN0SWQsIGdyb3VwcywgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzLCBtYXRjaFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoVmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVzdWx0LnBheWxvYWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVxdWlyZXNTZXJ2ZXJFdmFsdWF0aW9uIHx8IGUgaW5zdGFuY2VvZiBJbmNvbmNsdXNpdmVNYXRjaEVycm9yKSB0aGlzLl9sb2dnZXI/LmluZm8oYCR7ZS5uYW1lfSB3aGVuIGNvbXB1dGluZyBmbGFnIGxvY2FsbHk6ICR7ZmxhZy5rZXl9OiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICBlbHNlIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCA9PSBvbmx5RXZhbHVhdGVMb2NhbGx5KSBvbmx5RXZhbHVhdGVMb2NhbGx5ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHBheWxvYWRXYXNMb2NhbGx5RXZhbHVhdGVkID0gdm9pZCAwICE9PSByZXNwb25zZTtcbiAgICAgICAgaWYgKCFwYXlsb2FkV2FzTG9jYWxseUV2YWx1YXRlZCAmJiAhb25seUV2YWx1YXRlTG9jYWxseSkgcmVzcG9uc2UgPSBhd2FpdCBzdXBlci5nZXRGZWF0dXJlRmxhZ1BheWxvYWRTdGF0ZWxlc3Moa2V5LCBkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcywgZGlzYWJsZUdlb2lwKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICBhc3luYyBnZXRSZW1vdGVDb25maWdQYXlsb2FkKGZsYWdLZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucGVyc29uYWxBcGlLZXkpIHRocm93IG5ldyBFcnJvcignUGVyc29uYWwgQVBJIGtleSBpcyByZXF1aXJlZCBmb3IgcmVtb3RlIGNvbmZpZyBwYXlsb2FkIGRlY3J5cHRpb24nKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLl9yZXF1ZXN0UmVtb3RlQ29uZmlnUGF5bG9hZChmbGFnS2V5KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgcGFyc2VkKSB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UocGFyc2VkKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9XG4gICAgYXN5bmMgaXNGZWF0dXJlRW5hYmxlZChrZXksIGRpc3RpbmN0SWQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZmVhdCA9IGF3YWl0IHRoaXMuZ2V0RmVhdHVyZUZsYWcoa2V5LCBkaXN0aW5jdElkLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZmVhdCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gISFmZWF0IHx8IGZhbHNlO1xuICAgIH1cbiAgICBhc3luYyBnZXRBbGxGbGFncyhkaXN0aW5jdElkLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRBbGxGbGFnc0FuZFBheWxvYWRzKGRpc3RpbmN0SWQsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZmVhdHVyZUZsYWdzIHx8IHt9O1xuICAgIH1cbiAgICBhc3luYyBnZXRBbGxGbGFnc0FuZFBheWxvYWRzKGRpc3RpbmN0SWQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBncm91cHMsIGRpc2FibGVHZW9pcCwgZmxhZ0tleXMgfSA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIGxldCB7IG9ubHlFdmFsdWF0ZUxvY2FsbHksIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcyB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgY29uc3QgYWRqdXN0ZWRQcm9wZXJ0aWVzID0gdGhpcy5hZGRMb2NhbFBlcnNvbkFuZEdyb3VwUHJvcGVydGllcyhkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcyk7XG4gICAgICAgIHBlcnNvblByb3BlcnRpZXMgPSBhZGp1c3RlZFByb3BlcnRpZXMuYWxsUGVyc29uUHJvcGVydGllcztcbiAgICAgICAgZ3JvdXBQcm9wZXJ0aWVzID0gYWRqdXN0ZWRQcm9wZXJ0aWVzLmFsbEdyb3VwUHJvcGVydGllcztcbiAgICAgICAgaWYgKHZvaWQgMCA9PSBvbmx5RXZhbHVhdGVMb2NhbGx5KSBvbmx5RXZhbHVhdGVMb2NhbGx5ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGxvY2FsRXZhbHVhdGlvblJlc3VsdCA9IGF3YWl0IHRoaXMuZmVhdHVyZUZsYWdzUG9sbGVyPy5nZXRBbGxGbGFnc0FuZFBheWxvYWRzKGRpc3RpbmN0SWQsIGdyb3VwcywgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzLCBmbGFnS2V5cyk7XG4gICAgICAgIGxldCBmZWF0dXJlRmxhZ3MgPSB7fTtcbiAgICAgICAgbGV0IGZlYXR1cmVGbGFnUGF5bG9hZHMgPSB7fTtcbiAgICAgICAgbGV0IGZhbGxiYWNrVG9GbGFncyA9IHRydWU7XG4gICAgICAgIGlmIChsb2NhbEV2YWx1YXRpb25SZXN1bHQpIHtcbiAgICAgICAgICAgIGZlYXR1cmVGbGFncyA9IGxvY2FsRXZhbHVhdGlvblJlc3VsdC5yZXNwb25zZTtcbiAgICAgICAgICAgIGZlYXR1cmVGbGFnUGF5bG9hZHMgPSBsb2NhbEV2YWx1YXRpb25SZXN1bHQucGF5bG9hZHM7XG4gICAgICAgICAgICBmYWxsYmFja1RvRmxhZ3MgPSBsb2NhbEV2YWx1YXRpb25SZXN1bHQuZmFsbGJhY2tUb0ZsYWdzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmYWxsYmFja1RvRmxhZ3MgJiYgIW9ubHlFdmFsdWF0ZUxvY2FsbHkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZUV2YWx1YXRpb25SZXN1bHQgPSBhd2FpdCBzdXBlci5nZXRGZWF0dXJlRmxhZ3NBbmRQYXlsb2Fkc1N0YXRlbGVzcyhkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcywgZGlzYWJsZUdlb2lwLCBmbGFnS2V5cyk7XG4gICAgICAgICAgICBmZWF0dXJlRmxhZ3MgPSB7XG4gICAgICAgICAgICAgICAgLi4uZmVhdHVyZUZsYWdzLFxuICAgICAgICAgICAgICAgIC4uLnJlbW90ZUV2YWx1YXRpb25SZXN1bHQuZmxhZ3MgfHwge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmZWF0dXJlRmxhZ1BheWxvYWRzID0ge1xuICAgICAgICAgICAgICAgIC4uLmZlYXR1cmVGbGFnUGF5bG9hZHMsXG4gICAgICAgICAgICAgICAgLi4ucmVtb3RlRXZhbHVhdGlvblJlc3VsdC5wYXlsb2FkcyB8fCB7fVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmVhdHVyZUZsYWdzLFxuICAgICAgICAgICAgZmVhdHVyZUZsYWdQYXlsb2Fkc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBncm91cElkZW50aWZ5KHsgZ3JvdXBUeXBlLCBncm91cEtleSwgcHJvcGVydGllcywgZGlzdGluY3RJZCwgZGlzYWJsZUdlb2lwIH0pIHtcbiAgICAgICAgc3VwZXIuZ3JvdXBJZGVudGlmeVN0YXRlbGVzcyhncm91cFR5cGUsIGdyb3VwS2V5LCBwcm9wZXJ0aWVzLCB7XG4gICAgICAgICAgICBkaXNhYmxlR2VvaXBcbiAgICAgICAgfSwgZGlzdGluY3RJZCk7XG4gICAgfVxuICAgIGFzeW5jIHJlbG9hZEZlYXR1cmVGbGFncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5mZWF0dXJlRmxhZ3NQb2xsZXI/LmxvYWRGZWF0dXJlRmxhZ3ModHJ1ZSk7XG4gICAgfVxuICAgIGFzeW5jIF9zaHV0ZG93bihzaHV0ZG93blRpbWVvdXRNcykge1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFnc1BvbGxlcj8uc3RvcFBvbGxlcigpO1xuICAgICAgICB0aGlzLmVycm9yVHJhY2tpbmcuc2h1dGRvd24oKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9zaHV0ZG93bihzaHV0ZG93blRpbWVvdXRNcyk7XG4gICAgfVxuICAgIGFzeW5jIF9yZXF1ZXN0UmVtb3RlQ29uZmlnUGF5bG9hZChmbGFnS2V5KSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnBlcnNvbmFsQXBpS2V5KSByZXR1cm47XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuaG9zdH0vYXBpL3Byb2plY3RzL0BjdXJyZW50L2ZlYXR1cmVfZmxhZ3MvJHtmbGFnS2V5fS9yZW1vdGVfY29uZmlnP3Rva2VuPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuYXBpS2V5KX1gO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdldEN1c3RvbUhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLm9wdGlvbnMucGVyc29uYWxBcGlLZXl9YFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsZXQgYWJvcnRUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXF1ZXN0VGltZW91dCAmJiAnbnVtYmVyJyA9PSB0eXBlb2YgdGhpcy5vcHRpb25zLnJlcXVlc3RUaW1lb3V0KSB7XG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgYWJvcnRUaW1lb3V0ID0gc2FmZVNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMucmVxdWVzdFRpbWVvdXQpO1xuICAgICAgICAgICAgb3B0aW9ucy5zaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2godXJsLCBvcHRpb25zKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBmaW5hbGx5e1xuICAgICAgICAgICAgaWYgKGFib3J0VGltZW91dCkgY2xlYXJUaW1lb3V0KGFib3J0VGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXh0cmFjdFByb3BlcnRpZXNGcm9tRXZlbnQoZXZlbnRQcm9wZXJ0aWVzLCBncm91cHMpIHtcbiAgICAgICAgaWYgKCFldmVudFByb3BlcnRpZXMpIHJldHVybiB7XG4gICAgICAgICAgICBwZXJzb25Qcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgIGdyb3VwUHJvcGVydGllczoge31cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcGVyc29uUHJvcGVydGllcyA9IHt9O1xuICAgICAgICBjb25zdCBncm91cFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZXZlbnRQcm9wZXJ0aWVzKSlpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiYgZ3JvdXBzICYmIGtleSBpbiBncm91cHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwUHJvcHMgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2dyb3VwS2V5LCBncm91cFZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpZ3JvdXBQcm9wc1tTdHJpbmcoZ3JvdXBLZXkpXSA9IFN0cmluZyhncm91cFZhbHVlKTtcbiAgICAgICAgICAgIGdyb3VwUHJvcGVydGllc1tTdHJpbmcoa2V5KV0gPSBncm91cFByb3BzO1xuICAgICAgICB9IGVsc2UgcGVyc29uUHJvcGVydGllc1tTdHJpbmcoa2V5KV0gPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGVyc29uUHJvcGVydGllcyxcbiAgICAgICAgICAgIGdyb3VwUHJvcGVydGllc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBnZXRGZWF0dXJlRmxhZ3NGb3JFdmVudChkaXN0aW5jdElkLCBncm91cHMsIGRpc2FibGVHZW9pcCwgc2VuZEZlYXR1cmVGbGFnc09wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZmluYWxQZXJzb25Qcm9wZXJ0aWVzID0gc2VuZEZlYXR1cmVGbGFnc09wdGlvbnM/LnBlcnNvblByb3BlcnRpZXMgfHwge307XG4gICAgICAgIGNvbnN0IGZpbmFsR3JvdXBQcm9wZXJ0aWVzID0gc2VuZEZlYXR1cmVGbGFnc09wdGlvbnM/Lmdyb3VwUHJvcGVydGllcyB8fCB7fTtcbiAgICAgICAgY29uc3QgZmxhZ0tleXMgPSBzZW5kRmVhdHVyZUZsYWdzT3B0aW9ucz8uZmxhZ0tleXM7XG4gICAgICAgIGNvbnN0IG9ubHlFdmFsdWF0ZUxvY2FsbHkgPSBzZW5kRmVhdHVyZUZsYWdzT3B0aW9ucz8ub25seUV2YWx1YXRlTG9jYWxseSA/PyBmYWxzZTtcbiAgICAgICAgaWYgKG9ubHlFdmFsdWF0ZUxvY2FsbHkpIGlmICghKCh0aGlzLmZlYXR1cmVGbGFnc1BvbGxlcj8uZmVhdHVyZUZsYWdzPy5sZW5ndGggfHwgMCkgPiAwKSkgcmV0dXJuIHt9O1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3Vwc1dpdGhTdHJpbmdWYWx1ZXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGdyb3VwcyB8fCB7fSkpZ3JvdXBzV2l0aFN0cmluZ1ZhbHVlc1trZXldID0gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEFsbEZsYWdzKGRpc3RpbmN0SWQsIHtcbiAgICAgICAgICAgICAgICBncm91cHM6IGdyb3Vwc1dpdGhTdHJpbmdWYWx1ZXMsXG4gICAgICAgICAgICAgICAgcGVyc29uUHJvcGVydGllczogZmluYWxQZXJzb25Qcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgIGdyb3VwUHJvcGVydGllczogZmluYWxHcm91cFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgZGlzYWJsZUdlb2lwLFxuICAgICAgICAgICAgICAgIG9ubHlFdmFsdWF0ZUxvY2FsbHk6IHRydWUsXG4gICAgICAgICAgICAgICAgZmxhZ0tleXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgodGhpcy5mZWF0dXJlRmxhZ3NQb2xsZXI/LmZlYXR1cmVGbGFncz8ubGVuZ3RoIHx8IDApID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBzV2l0aFN0cmluZ1ZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZ3JvdXBzIHx8IHt9KSlncm91cHNXaXRoU3RyaW5nVmFsdWVzW2tleV0gPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0QWxsRmxhZ3MoZGlzdGluY3RJZCwge1xuICAgICAgICAgICAgICAgIGdyb3VwczogZ3JvdXBzV2l0aFN0cmluZ1ZhbHVlcyxcbiAgICAgICAgICAgICAgICBwZXJzb25Qcm9wZXJ0aWVzOiBmaW5hbFBlcnNvblByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgZ3JvdXBQcm9wZXJ0aWVzOiBmaW5hbEdyb3VwUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICBkaXNhYmxlR2VvaXAsXG4gICAgICAgICAgICAgICAgb25seUV2YWx1YXRlTG9jYWxseTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmbGFnS2V5c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChhd2FpdCBzdXBlci5nZXRGZWF0dXJlRmxhZ3NTdGF0ZWxlc3MoZGlzdGluY3RJZCwgZ3JvdXBzLCBmaW5hbFBlcnNvblByb3BlcnRpZXMsIGZpbmFsR3JvdXBQcm9wZXJ0aWVzLCBkaXNhYmxlR2VvaXApKS5mbGFncztcbiAgICB9XG4gICAgYWRkTG9jYWxQZXJzb25BbmRHcm91cFByb3BlcnRpZXMoZGlzdGluY3RJZCwgZ3JvdXBzLCBwZXJzb25Qcm9wZXJ0aWVzLCBncm91cFByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3QgYWxsUGVyc29uUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBkaXN0aW5jdElkLFxuICAgICAgICAgICAgLi4ucGVyc29uUHJvcGVydGllcyB8fCB7fVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhbGxHcm91cFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgaWYgKGdyb3VwcykgZm9yIChjb25zdCBncm91cE5hbWUgb2YgT2JqZWN0LmtleXMoZ3JvdXBzKSlhbGxHcm91cFByb3BlcnRpZXNbZ3JvdXBOYW1lXSA9IHtcbiAgICAgICAgICAgICRncm91cF9rZXk6IGdyb3Vwc1tncm91cE5hbWVdLFxuICAgICAgICAgICAgLi4uZ3JvdXBQcm9wZXJ0aWVzPy5bZ3JvdXBOYW1lXSB8fCB7fVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWxsUGVyc29uUHJvcGVydGllcyxcbiAgICAgICAgICAgIGFsbEdyb3VwUHJvcGVydGllc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXB0dXJlRXhjZXB0aW9uKGVycm9yLCBkaXN0aW5jdElkLCBhZGRpdGlvbmFsUHJvcGVydGllcykge1xuICAgICAgICBjb25zdCBzeW50aGV0aWNFeGNlcHRpb24gPSBuZXcgRXJyb3IoJ1Bvc3RIb2cgc3ludGhldGljRXhjZXB0aW9uJyk7XG4gICAgICAgIHRoaXMuYWRkUGVuZGluZ1Byb21pc2UoZXJyb3JfdHJhY2tpbmcuYnVpbGRFdmVudE1lc3NhZ2UoZXJyb3IsIHtcbiAgICAgICAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvblxuICAgICAgICB9LCBkaXN0aW5jdElkLCBhZGRpdGlvbmFsUHJvcGVydGllcykudGhlbigobXNnKT0+dGhpcy5jYXB0dXJlKG1zZykpKTtcbiAgICB9XG4gICAgYXN5bmMgY2FwdHVyZUV4Y2VwdGlvbkltbWVkaWF0ZShlcnJvciwgZGlzdGluY3RJZCwgYWRkaXRpb25hbFByb3BlcnRpZXMpIHtcbiAgICAgICAgY29uc3Qgc3ludGhldGljRXhjZXB0aW9uID0gbmV3IEVycm9yKCdQb3N0SG9nIHN5bnRoZXRpY0V4Y2VwdGlvbicpO1xuICAgICAgICB0aGlzLmFkZFBlbmRpbmdQcm9taXNlKGVycm9yX3RyYWNraW5nLmJ1aWxkRXZlbnRNZXNzYWdlKGVycm9yLCB7XG4gICAgICAgICAgICBzeW50aGV0aWNFeGNlcHRpb25cbiAgICAgICAgfSwgZGlzdGluY3RJZCwgYWRkaXRpb25hbFByb3BlcnRpZXMpLnRoZW4oKG1zZyk9PnRoaXMuY2FwdHVyZUltbWVkaWF0ZShtc2cpKSk7XG4gICAgfVxuICAgIGFzeW5jIHByZXBhcmVFdmVudE1lc3NhZ2UocHJvcHMpIHtcbiAgICAgICAgY29uc3QgeyBkaXN0aW5jdElkLCBldmVudCwgcHJvcGVydGllcywgZ3JvdXBzLCBzZW5kRmVhdHVyZUZsYWdzLCB0aW1lc3RhbXAsIGRpc2FibGVHZW9pcCwgdXVpZCB9ID0gcHJvcHM7XG4gICAgICAgIGNvbnN0IGV2ZW50TWVzc2FnZSA9IHRoaXMuX3J1bkJlZm9yZVNlbmQoe1xuICAgICAgICAgICAgZGlzdGluY3RJZCxcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgcHJvcGVydGllcyxcbiAgICAgICAgICAgIGdyb3VwcyxcbiAgICAgICAgICAgIHNlbmRGZWF0dXJlRmxhZ3MsXG4gICAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgICBkaXNhYmxlR2VvaXAsXG4gICAgICAgICAgICB1dWlkXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWV2ZW50TWVzc2FnZSkgcmV0dXJuIFByb21pc2UucmVqZWN0KG51bGwpO1xuICAgICAgICBjb25zdCBldmVudFByb3BlcnRpZXMgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKGFzeW5jICgpPT57XG4gICAgICAgICAgICBpZiAoc2VuZEZlYXR1cmVGbGFncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbmRGZWF0dXJlRmxhZ3NPcHRpb25zID0gJ29iamVjdCcgPT0gdHlwZW9mIHNlbmRGZWF0dXJlRmxhZ3MgPyBzZW5kRmVhdHVyZUZsYWdzIDogdm9pZCAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldEZlYXR1cmVGbGFnc0ZvckV2ZW50KGRpc3RpbmN0SWQsIGdyb3VwcywgZGlzYWJsZUdlb2lwLCBzZW5kRmVhdHVyZUZsYWdzT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH0pLnRoZW4oKGZsYWdzKT0+e1xuICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbFByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgIGlmIChmbGFncykgZm9yIChjb25zdCBbZmVhdHVyZSwgdmFyaWFudF0gb2YgT2JqZWN0LmVudHJpZXMoZmxhZ3MpKWFkZGl0aW9uYWxQcm9wZXJ0aWVzW2AkZmVhdHVyZS8ke2ZlYXR1cmV9YF0gPSB2YXJpYW50O1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlRmxhZ3MgPSBPYmplY3Qua2V5cyhmbGFncyB8fCB7fSkuZmlsdGVyKChmbGFnKT0+ZmxhZ3M/LltmbGFnXSAhPT0gZmFsc2UpLnNvcnQoKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVGbGFncy5sZW5ndGggPiAwKSBhZGRpdGlvbmFsUHJvcGVydGllc1snJGFjdGl2ZV9mZWF0dXJlX2ZsYWdzJ10gPSBhY3RpdmVGbGFncztcbiAgICAgICAgICAgIHJldHVybiBhZGRpdGlvbmFsUHJvcGVydGllcztcbiAgICAgICAgfSkuY2F0Y2goKCk9Pih7fSkpLnRoZW4oKGFkZGl0aW9uYWxQcm9wZXJ0aWVzKT0+e1xuICAgICAgICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgLi4uYWRkaXRpb25hbFByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgLi4uZXZlbnRNZXNzYWdlLnByb3BlcnRpZXMgfHwge30sXG4gICAgICAgICAgICAgICAgJGdyb3VwczogZXZlbnRNZXNzYWdlLmdyb3VwcyB8fCBncm91cHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGlzdGluY3RJZDogZXZlbnRNZXNzYWdlLmRpc3RpbmN0SWQsXG4gICAgICAgICAgICBldmVudDogZXZlbnRNZXNzYWdlLmV2ZW50LFxuICAgICAgICAgICAgcHJvcGVydGllczogZXZlbnRQcm9wZXJ0aWVzLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogZXZlbnRNZXNzYWdlLnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlR2VvaXA6IGV2ZW50TWVzc2FnZS5kaXNhYmxlR2VvaXAsXG4gICAgICAgICAgICAgICAgdXVpZDogZXZlbnRNZXNzYWdlLnV1aWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3J1bkJlZm9yZVNlbmQoZXZlbnRNZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGJlZm9yZVNlbmQgPSB0aGlzLm9wdGlvbnMuYmVmb3JlX3NlbmQ7XG4gICAgICAgIGlmICghYmVmb3JlU2VuZCkgcmV0dXJuIGV2ZW50TWVzc2FnZTtcbiAgICAgICAgY29uc3QgZm5zID0gQXJyYXkuaXNBcnJheShiZWZvcmVTZW5kKSA/IGJlZm9yZVNlbmQgOiBbXG4gICAgICAgICAgICBiZWZvcmVTZW5kXG4gICAgICAgIF07XG4gICAgICAgIGxldCByZXN1bHQgPSBldmVudE1lc3NhZ2U7XG4gICAgICAgIGZvciAoY29uc3QgZm4gb2YgZm5zKXtcbiAgICAgICAgICAgIHJlc3VsdCA9IGZuKHJlc3VsdCk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKGBFdmVudCAnJHtldmVudE1lc3NhZ2UuZXZlbnR9JyB3YXMgcmVqZWN0ZWQgaW4gYmVmb3JlU2VuZCBmdW5jdGlvbmApO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXN1bHQucHJvcGVydGllcyB8fCAwID09PSBPYmplY3Qua2V5cyhyZXN1bHQucHJvcGVydGllcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBFdmVudCAnJHtyZXN1bHQuZXZlbnR9JyBoYXMgbm8gcHJvcGVydGllcyBhZnRlciBiZWZvcmVTZW5kIGZ1bmN0aW9uLCB0aGlzIGlzIGxpa2VseSBhbiBlcnJvci5gO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci53YXJuKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZXhwb3J0IHsgUG9zdEhvZ0JhY2tlbmRDbGllbnQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/client.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/entrypoints/index.node.mjs":
/*!***********************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/entrypoints/index.node.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHog: () => (/* binding */ PostHog),\n/* harmony export */   PostHogSentryIntegration: () => (/* reexport safe */ _exports_mjs__WEBPACK_IMPORTED_MODULE_5__.PostHogSentryIntegration),\n/* harmony export */   createEventProcessor: () => (/* reexport safe */ _exports_mjs__WEBPACK_IMPORTED_MODULE_5__.createEventProcessor),\n/* harmony export */   sentryIntegration: () => (/* reexport safe */ _exports_mjs__WEBPACK_IMPORTED_MODULE_5__.sentryIntegration),\n/* harmony export */   setupExpressErrorHandler: () => (/* reexport safe */ _exports_mjs__WEBPACK_IMPORTED_MODULE_5__.setupExpressErrorHandler)\n/* harmony export */ });\n/* harmony import */ var _extensions_error_tracking_modifiers_module_node_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../extensions/error-tracking/modifiers/module.node.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/module.node.mjs\");\n/* harmony import */ var _extensions_error_tracking_modifiers_context_lines_node_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../extensions/error-tracking/modifiers/context-lines.node.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/context-lines.node.mjs\");\n/* harmony import */ var _extensions_error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../extensions/error-tracking/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/index.mjs\");\n/* harmony import */ var _client_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../client.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/client.mjs\");\n/* harmony import */ var _posthog_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @posthog/core */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs\");\n/* harmony import */ var _exports_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../exports.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/exports.mjs\");\n\n\n\n\n\n\n_extensions_error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].errorPropertiesBuilder = new _posthog_core__WEBPACK_IMPORTED_MODULE_4__.ErrorTracking.ErrorPropertiesBuilder([\n    new _posthog_core__WEBPACK_IMPORTED_MODULE_4__.ErrorTracking.EventCoercer(),\n    new _posthog_core__WEBPACK_IMPORTED_MODULE_4__.ErrorTracking.ErrorCoercer(),\n    new _posthog_core__WEBPACK_IMPORTED_MODULE_4__.ErrorTracking.ObjectCoercer(),\n    new _posthog_core__WEBPACK_IMPORTED_MODULE_4__.ErrorTracking.StringCoercer(),\n    new _posthog_core__WEBPACK_IMPORTED_MODULE_4__.ErrorTracking.PrimitiveCoercer()\n], [\n    _posthog_core__WEBPACK_IMPORTED_MODULE_4__.ErrorTracking.nodeStackLineParser\n], [\n    (0,_extensions_error_tracking_modifiers_module_node_mjs__WEBPACK_IMPORTED_MODULE_0__.createModulerModifier)(),\n    _extensions_error_tracking_modifiers_context_lines_node_mjs__WEBPACK_IMPORTED_MODULE_1__.addSourceContext\n]);\nclass PostHog extends _client_mjs__WEBPACK_IMPORTED_MODULE_3__.PostHogBackendClient {\n    getLibraryId() {\n        return 'posthog-node';\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZW50cnlwb2ludHMvaW5kZXgubm9kZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDRTtBQUM3QjtBQUNmO0FBQ1A7QUFDZjtBQUMvQiw0RUFBYyw4QkFBOEIsK0VBQW9DO0FBQ2hGLFFBQVEscUVBQTBCO0FBQ2xDLFFBQVEscUVBQTBCO0FBQ2xDLFFBQVEsc0VBQTJCO0FBQ25DLFFBQVEsc0VBQTJCO0FBQ25DLFFBQVEseUVBQThCO0FBQ3RDO0FBQ0EsSUFBSSw0RUFBaUM7QUFDckM7QUFDQSxJQUFJLDJHQUFxQjtBQUN6QixJQUFJLHlHQUFnQjtBQUNwQjtBQUNBLHNCQUFzQiw2REFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDbUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9kaXN0L2VudHJ5cG9pbnRzL2luZGV4Lm5vZGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZU1vZHVsZXJNb2RpZmllciB9IGZyb20gXCIuLi9leHRlbnNpb25zL2Vycm9yLXRyYWNraW5nL21vZGlmaWVycy9tb2R1bGUubm9kZS5tanNcIjtcbmltcG9ydCB7IGFkZFNvdXJjZUNvbnRleHQgfSBmcm9tIFwiLi4vZXh0ZW5zaW9ucy9lcnJvci10cmFja2luZy9tb2RpZmllcnMvY29udGV4dC1saW5lcy5ub2RlLm1qc1wiO1xuaW1wb3J0IGVycm9yX3RyYWNraW5nIGZyb20gXCIuLi9leHRlbnNpb25zL2Vycm9yLXRyYWNraW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgUG9zdEhvZ0JhY2tlbmRDbGllbnQgfSBmcm9tIFwiLi4vY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgRXJyb3JUcmFja2luZyB9IGZyb20gXCJAcG9zdGhvZy9jb3JlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi4vZXhwb3J0cy5tanNcIjtcbmVycm9yX3RyYWNraW5nLmVycm9yUHJvcGVydGllc0J1aWxkZXIgPSBuZXcgRXJyb3JUcmFja2luZy5FcnJvclByb3BlcnRpZXNCdWlsZGVyKFtcbiAgICBuZXcgRXJyb3JUcmFja2luZy5FdmVudENvZXJjZXIoKSxcbiAgICBuZXcgRXJyb3JUcmFja2luZy5FcnJvckNvZXJjZXIoKSxcbiAgICBuZXcgRXJyb3JUcmFja2luZy5PYmplY3RDb2VyY2VyKCksXG4gICAgbmV3IEVycm9yVHJhY2tpbmcuU3RyaW5nQ29lcmNlcigpLFxuICAgIG5ldyBFcnJvclRyYWNraW5nLlByaW1pdGl2ZUNvZXJjZXIoKVxuXSwgW1xuICAgIEVycm9yVHJhY2tpbmcubm9kZVN0YWNrTGluZVBhcnNlclxuXSwgW1xuICAgIGNyZWF0ZU1vZHVsZXJNb2RpZmllcigpLFxuICAgIGFkZFNvdXJjZUNvbnRleHRcbl0pO1xuY2xhc3MgUG9zdEhvZyBleHRlbmRzIFBvc3RIb2dCYWNrZW5kQ2xpZW50IHtcbiAgICBnZXRMaWJyYXJ5SWQoKSB7XG4gICAgICAgIHJldHVybiAncG9zdGhvZy1ub2RlJztcbiAgICB9XG59XG5leHBvcnQgeyBQb3N0SG9nIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/entrypoints/index.node.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/exports.mjs":
/*!********************************************************!*\
  !*** ../../node_modules/posthog-node/dist/exports.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHogSentryIntegration: () => (/* reexport safe */ _extensions_sentry_integration_mjs__WEBPACK_IMPORTED_MODULE_0__.PostHogSentryIntegration),\n/* harmony export */   createEventProcessor: () => (/* reexport safe */ _extensions_sentry_integration_mjs__WEBPACK_IMPORTED_MODULE_0__.createEventProcessor),\n/* harmony export */   sentryIntegration: () => (/* reexport safe */ _extensions_sentry_integration_mjs__WEBPACK_IMPORTED_MODULE_0__.sentryIntegration),\n/* harmony export */   setupExpressErrorHandler: () => (/* reexport safe */ _extensions_express_mjs__WEBPACK_IMPORTED_MODULE_1__.setupExpressErrorHandler)\n/* harmony export */ });\n/* harmony import */ var _extensions_sentry_integration_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extensions/sentry-integration.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/sentry-integration.mjs\");\n/* harmony import */ var _extensions_express_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./extensions/express.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/express.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/types.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXhwb3J0cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvRDtBQUNYO0FBQ2IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9kaXN0L2V4cG9ydHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2V4dGVuc2lvbnMvc2VudHJ5LWludGVncmF0aW9uLm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZXh0ZW5zaW9ucy9leHByZXNzLm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHlwZXMubWpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/exports.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/autocapture.mjs":
/*!**************************************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/error-tracking/autocapture.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addUncaughtExceptionListener: () => (/* binding */ addUncaughtExceptionListener),\n/* harmony export */   addUnhandledRejectionListener: () => (/* binding */ addUnhandledRejectionListener)\n/* harmony export */ });\nfunction makeUncaughtExceptionHandler(captureFn, onFatalFn) {\n    let calledFatalError = false;\n    return Object.assign((error)=>{\n        const userProvidedListenersCount = global.process.listeners('uncaughtException').filter((listener)=>'domainUncaughtExceptionClear' !== listener.name && true !== listener._posthogErrorHandler).length;\n        const processWouldExit = 0 === userProvidedListenersCount;\n        captureFn(error, {\n            mechanism: {\n                type: 'onuncaughtexception',\n                handled: false\n            }\n        });\n        if (!calledFatalError && processWouldExit) {\n            calledFatalError = true;\n            onFatalFn(error);\n        }\n    }, {\n        _posthogErrorHandler: true\n    });\n}\nfunction addUncaughtExceptionListener(captureFn, onFatalFn) {\n    global.process.on('uncaughtException', makeUncaughtExceptionHandler(captureFn, onFatalFn));\n}\nfunction addUnhandledRejectionListener(captureFn) {\n    global.process.on('unhandledRejection', (reason)=>captureFn(reason, {\n            mechanism: {\n                type: 'onunhandledrejection',\n                handled: false\n            }\n        }));\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9lcnJvci10cmFja2luZy9hdXRvY2FwdHVyZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUN1RSIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9lcnJvci10cmFja2luZy9hdXRvY2FwdHVyZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gbWFrZVVuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlcihjYXB0dXJlRm4sIG9uRmF0YWxGbikge1xuICAgIGxldCBjYWxsZWRGYXRhbEVycm9yID0gZmFsc2U7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oKGVycm9yKT0+e1xuICAgICAgICBjb25zdCB1c2VyUHJvdmlkZWRMaXN0ZW5lcnNDb3VudCA9IGdsb2JhbC5wcm9jZXNzLmxpc3RlbmVycygndW5jYXVnaHRFeGNlcHRpb24nKS5maWx0ZXIoKGxpc3RlbmVyKT0+J2RvbWFpblVuY2F1Z2h0RXhjZXB0aW9uQ2xlYXInICE9PSBsaXN0ZW5lci5uYW1lICYmIHRydWUgIT09IGxpc3RlbmVyLl9wb3N0aG9nRXJyb3JIYW5kbGVyKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NXb3VsZEV4aXQgPSAwID09PSB1c2VyUHJvdmlkZWRMaXN0ZW5lcnNDb3VudDtcbiAgICAgICAgY2FwdHVyZUZuKGVycm9yLCB7XG4gICAgICAgICAgICBtZWNoYW5pc206IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb251bmNhdWdodGV4Y2VwdGlvbicsXG4gICAgICAgICAgICAgICAgaGFuZGxlZDogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghY2FsbGVkRmF0YWxFcnJvciAmJiBwcm9jZXNzV291bGRFeGl0KSB7XG4gICAgICAgICAgICBjYWxsZWRGYXRhbEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIG9uRmF0YWxGbihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIF9wb3N0aG9nRXJyb3JIYW5kbGVyOiB0cnVlXG4gICAgfSk7XG59XG5mdW5jdGlvbiBhZGRVbmNhdWdodEV4Y2VwdGlvbkxpc3RlbmVyKGNhcHR1cmVGbiwgb25GYXRhbEZuKSB7XG4gICAgZ2xvYmFsLnByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgbWFrZVVuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlcihjYXB0dXJlRm4sIG9uRmF0YWxGbikpO1xufVxuZnVuY3Rpb24gYWRkVW5oYW5kbGVkUmVqZWN0aW9uTGlzdGVuZXIoY2FwdHVyZUZuKSB7XG4gICAgZ2xvYmFsLnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24pPT5jYXB0dXJlRm4ocmVhc29uLCB7XG4gICAgICAgICAgICBtZWNoYW5pc206IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb251bmhhbmRsZWRyZWplY3Rpb24nLFxuICAgICAgICAgICAgICAgIGhhbmRsZWQ6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbn1cbmV4cG9ydCB7IGFkZFVuY2F1Z2h0RXhjZXB0aW9uTGlzdGVuZXIsIGFkZFVuaGFuZGxlZFJlamVjdGlvbkxpc3RlbmVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/autocapture.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/index.mjs":
/*!********************************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/error-tracking/index.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ErrorTracking)\n/* harmony export */ });\n/* harmony import */ var _autocapture_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./autocapture.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/autocapture.mjs\");\n/* harmony import */ var _posthog_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @posthog/core */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs\");\n\n\nconst SHUTDOWN_TIMEOUT = 2000;\nclass ErrorTracking {\n    constructor(client, options, _logger){\n        this.client = client;\n        this._exceptionAutocaptureEnabled = options.enableExceptionAutocapture || false;\n        this._logger = _logger;\n        this._rateLimiter = new _posthog_core__WEBPACK_IMPORTED_MODULE_1__.BucketedRateLimiter({\n            refillRate: 1,\n            bucketSize: 10,\n            refillInterval: 10000,\n            _logger: this._logger\n        });\n        this.startAutocaptureIfEnabled();\n    }\n    static async buildEventMessage(error, hint, distinctId, additionalProperties) {\n        const properties = {\n            ...additionalProperties\n        };\n        if (!distinctId) properties.$process_person_profile = false;\n        const exceptionProperties = this.errorPropertiesBuilder.buildFromUnknown(error, hint);\n        exceptionProperties.$exception_list = await this.errorPropertiesBuilder.modifyFrames(exceptionProperties.$exception_list);\n        return {\n            event: '$exception',\n            distinctId: distinctId || (0,_posthog_core__WEBPACK_IMPORTED_MODULE_1__.uuidv7)(),\n            properties: {\n                ...exceptionProperties,\n                ...properties\n            }\n        };\n    }\n    startAutocaptureIfEnabled() {\n        if (this.isEnabled()) {\n            (0,_autocapture_mjs__WEBPACK_IMPORTED_MODULE_0__.addUncaughtExceptionListener)(this.onException.bind(this), this.onFatalError.bind(this));\n            (0,_autocapture_mjs__WEBPACK_IMPORTED_MODULE_0__.addUnhandledRejectionListener)(this.onException.bind(this));\n        }\n    }\n    onException(exception, hint) {\n        this.client.addPendingPromise((async ()=>{\n            const eventMessage = await ErrorTracking.buildEventMessage(exception, hint);\n            const exceptionProperties = eventMessage.properties;\n            const exceptionType = exceptionProperties?.$exception_list[0]?.type ?? 'Exception';\n            const isRateLimited = this._rateLimiter.consumeRateLimit(exceptionType);\n            if (isRateLimited) return void this._logger.info('Skipping exception capture because of client rate limiting.', {\n                exception: exceptionType\n            });\n            return this.client.capture(eventMessage);\n        })());\n    }\n    async onFatalError(exception) {\n        console.error(exception);\n        await this.client.shutdown(SHUTDOWN_TIMEOUT);\n        process.exit(1);\n    }\n    isEnabled() {\n        return !this.client.isDisabled && this._exceptionAutocaptureEnabled;\n    }\n    shutdown() {\n        this._rateLimiter.stop();\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9lcnJvci10cmFja2luZy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdHO0FBQ3BDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw4REFBbUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxREFBTTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4RUFBNEI7QUFDeEMsWUFBWSwrRUFBNkI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDb0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9kaXN0L2V4dGVuc2lvbnMvZXJyb3ItdHJhY2tpbmcvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZFVuY2F1Z2h0RXhjZXB0aW9uTGlzdGVuZXIsIGFkZFVuaGFuZGxlZFJlamVjdGlvbkxpc3RlbmVyIH0gZnJvbSBcIi4vYXV0b2NhcHR1cmUubWpzXCI7XG5pbXBvcnQgeyBCdWNrZXRlZFJhdGVMaW1pdGVyLCB1dWlkdjcgfSBmcm9tIFwiQHBvc3Rob2cvY29yZVwiO1xuY29uc3QgU0hVVERPV05fVElNRU9VVCA9IDIwMDA7XG5jbGFzcyBFcnJvclRyYWNraW5nIHtcbiAgICBjb25zdHJ1Y3RvcihjbGllbnQsIG9wdGlvbnMsIF9sb2dnZXIpe1xuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICAgICAgdGhpcy5fZXhjZXB0aW9uQXV0b2NhcHR1cmVFbmFibGVkID0gb3B0aW9ucy5lbmFibGVFeGNlcHRpb25BdXRvY2FwdHVyZSB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5fbG9nZ2VyID0gX2xvZ2dlcjtcbiAgICAgICAgdGhpcy5fcmF0ZUxpbWl0ZXIgPSBuZXcgQnVja2V0ZWRSYXRlTGltaXRlcih7XG4gICAgICAgICAgICByZWZpbGxSYXRlOiAxLFxuICAgICAgICAgICAgYnVja2V0U2l6ZTogMTAsXG4gICAgICAgICAgICByZWZpbGxJbnRlcnZhbDogMTAwMDAsXG4gICAgICAgICAgICBfbG9nZ2VyOiB0aGlzLl9sb2dnZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RhcnRBdXRvY2FwdHVyZUlmRW5hYmxlZCgpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgYnVpbGRFdmVudE1lc3NhZ2UoZXJyb3IsIGhpbnQsIGRpc3RpbmN0SWQsIGFkZGl0aW9uYWxQcm9wZXJ0aWVzKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICAuLi5hZGRpdGlvbmFsUHJvcGVydGllc1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIWRpc3RpbmN0SWQpIHByb3BlcnRpZXMuJHByb2Nlc3NfcGVyc29uX3Byb2ZpbGUgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZXhjZXB0aW9uUHJvcGVydGllcyA9IHRoaXMuZXJyb3JQcm9wZXJ0aWVzQnVpbGRlci5idWlsZEZyb21Vbmtub3duKGVycm9yLCBoaW50KTtcbiAgICAgICAgZXhjZXB0aW9uUHJvcGVydGllcy4kZXhjZXB0aW9uX2xpc3QgPSBhd2FpdCB0aGlzLmVycm9yUHJvcGVydGllc0J1aWxkZXIubW9kaWZ5RnJhbWVzKGV4Y2VwdGlvblByb3BlcnRpZXMuJGV4Y2VwdGlvbl9saXN0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGV2ZW50OiAnJGV4Y2VwdGlvbicsXG4gICAgICAgICAgICBkaXN0aW5jdElkOiBkaXN0aW5jdElkIHx8IHV1aWR2NygpLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgIC4uLmV4Y2VwdGlvblByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGFydEF1dG9jYXB0dXJlSWZFbmFibGVkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWQoKSkge1xuICAgICAgICAgICAgYWRkVW5jYXVnaHRFeGNlcHRpb25MaXN0ZW5lcih0aGlzLm9uRXhjZXB0aW9uLmJpbmQodGhpcyksIHRoaXMub25GYXRhbEVycm9yLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgYWRkVW5oYW5kbGVkUmVqZWN0aW9uTGlzdGVuZXIodGhpcy5vbkV4Y2VwdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkV4Y2VwdGlvbihleGNlcHRpb24sIGhpbnQpIHtcbiAgICAgICAgdGhpcy5jbGllbnQuYWRkUGVuZGluZ1Byb21pc2UoKGFzeW5jICgpPT57XG4gICAgICAgICAgICBjb25zdCBldmVudE1lc3NhZ2UgPSBhd2FpdCBFcnJvclRyYWNraW5nLmJ1aWxkRXZlbnRNZXNzYWdlKGV4Y2VwdGlvbiwgaGludCk7XG4gICAgICAgICAgICBjb25zdCBleGNlcHRpb25Qcm9wZXJ0aWVzID0gZXZlbnRNZXNzYWdlLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBjb25zdCBleGNlcHRpb25UeXBlID0gZXhjZXB0aW9uUHJvcGVydGllcz8uJGV4Y2VwdGlvbl9saXN0WzBdPy50eXBlID8/ICdFeGNlcHRpb24nO1xuICAgICAgICAgICAgY29uc3QgaXNSYXRlTGltaXRlZCA9IHRoaXMuX3JhdGVMaW1pdGVyLmNvbnN1bWVSYXRlTGltaXQoZXhjZXB0aW9uVHlwZSk7XG4gICAgICAgICAgICBpZiAoaXNSYXRlTGltaXRlZCkgcmV0dXJuIHZvaWQgdGhpcy5fbG9nZ2VyLmluZm8oJ1NraXBwaW5nIGV4Y2VwdGlvbiBjYXB0dXJlIGJlY2F1c2Ugb2YgY2xpZW50IHJhdGUgbGltaXRpbmcuJywge1xuICAgICAgICAgICAgICAgIGV4Y2VwdGlvbjogZXhjZXB0aW9uVHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuY2FwdHVyZShldmVudE1lc3NhZ2UpO1xuICAgICAgICB9KSgpKTtcbiAgICB9XG4gICAgYXN5bmMgb25GYXRhbEVycm9yKGV4Y2VwdGlvbikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGV4Y2VwdGlvbik7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnNodXRkb3duKFNIVVRET1dOX1RJTUVPVVQpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICAgIGlzRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNsaWVudC5pc0Rpc2FibGVkICYmIHRoaXMuX2V4Y2VwdGlvbkF1dG9jYXB0dXJlRW5hYmxlZDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuX3JhdGVMaW1pdGVyLnN0b3AoKTtcbiAgICB9XG59XG5leHBvcnQgeyBFcnJvclRyYWNraW5nIGFzIGRlZmF1bHQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/index.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/context-lines.node.mjs":
/*!*******************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/context-lines.node.mjs ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAX_CONTEXTLINES_COLNO: () => (/* binding */ MAX_CONTEXTLINES_COLNO),\n/* harmony export */   MAX_CONTEXTLINES_LINENO: () => (/* binding */ MAX_CONTEXTLINES_LINENO),\n/* harmony export */   addSourceContext: () => (/* binding */ addSourceContext)\n/* harmony export */ });\n/* harmony import */ var _posthog_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @posthog/core */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_readline__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:readline */ \"node:readline\");\n\n\n\nconst LRU_FILE_CONTENTS_CACHE = new _posthog_core__WEBPACK_IMPORTED_MODULE_0__.ErrorTracking.ReduceableCache(25);\nconst LRU_FILE_CONTENTS_FS_READ_FAILED = new _posthog_core__WEBPACK_IMPORTED_MODULE_0__.ErrorTracking.ReduceableCache(20);\nconst DEFAULT_LINES_OF_CONTEXT = 7;\nconst MAX_CONTEXTLINES_COLNO = 1000;\nconst MAX_CONTEXTLINES_LINENO = 10000;\nasync function addSourceContext(frames) {\n    const filesToLines = {};\n    for(let i = frames.length - 1; i >= 0; i--){\n        const frame = frames[i];\n        const filename = frame?.filename;\n        if (!frame || 'string' != typeof filename || 'number' != typeof frame.lineno || shouldSkipContextLinesForFile(filename) || shouldSkipContextLinesForFrame(frame)) continue;\n        const filesToLinesOutput = filesToLines[filename];\n        if (!filesToLinesOutput) filesToLines[filename] = [];\n        filesToLines[filename].push(frame.lineno);\n    }\n    const files = Object.keys(filesToLines);\n    if (0 == files.length) return frames;\n    const readlinePromises = [];\n    for (const file of files){\n        if (LRU_FILE_CONTENTS_FS_READ_FAILED.get(file)) continue;\n        const filesToLineRanges = filesToLines[file];\n        if (!filesToLineRanges) continue;\n        filesToLineRanges.sort((a, b)=>a - b);\n        const ranges = makeLineReaderRanges(filesToLineRanges);\n        if (ranges.every((r)=>rangeExistsInContentCache(file, r))) continue;\n        const cache = emplace(LRU_FILE_CONTENTS_CACHE, file, {});\n        readlinePromises.push(getContextLinesFromFile(file, ranges, cache));\n    }\n    await Promise.all(readlinePromises).catch(()=>{});\n    if (frames && frames.length > 0) addSourceContextToFrames(frames, LRU_FILE_CONTENTS_CACHE);\n    LRU_FILE_CONTENTS_CACHE.reduce();\n    return frames;\n}\nfunction getContextLinesFromFile(path, ranges, output) {\n    return new Promise((resolve)=>{\n        const stream = (0,node_fs__WEBPACK_IMPORTED_MODULE_1__.createReadStream)(path);\n        const lineReaded = (0,node_readline__WEBPACK_IMPORTED_MODULE_2__.createInterface)({\n            input: stream\n        });\n        function destroyStreamAndResolve() {\n            stream.destroy();\n            resolve();\n        }\n        let lineNumber = 0;\n        let currentRangeIndex = 0;\n        const range = ranges[currentRangeIndex];\n        if (void 0 === range) return void destroyStreamAndResolve();\n        let rangeStart = range[0];\n        let rangeEnd = range[1];\n        function onStreamError() {\n            LRU_FILE_CONTENTS_FS_READ_FAILED.set(path, 1);\n            lineReaded.close();\n            lineReaded.removeAllListeners();\n            destroyStreamAndResolve();\n        }\n        stream.on('error', onStreamError);\n        lineReaded.on('error', onStreamError);\n        lineReaded.on('close', destroyStreamAndResolve);\n        lineReaded.on('line', (line)=>{\n            lineNumber++;\n            if (lineNumber < rangeStart) return;\n            output[lineNumber] = snipLine(line, 0);\n            if (lineNumber >= rangeEnd) {\n                if (currentRangeIndex === ranges.length - 1) {\n                    lineReaded.close();\n                    lineReaded.removeAllListeners();\n                    return;\n                }\n                currentRangeIndex++;\n                const range = ranges[currentRangeIndex];\n                if (void 0 === range) {\n                    lineReaded.close();\n                    lineReaded.removeAllListeners();\n                    return;\n                }\n                rangeStart = range[0];\n                rangeEnd = range[1];\n            }\n        });\n    });\n}\nfunction addSourceContextToFrames(frames, cache) {\n    for (const frame of frames)if (frame.filename && void 0 === frame.context_line && 'number' == typeof frame.lineno) {\n        const contents = cache.get(frame.filename);\n        if (void 0 === contents) continue;\n        addContextToFrame(frame.lineno, frame, contents);\n    }\n}\nfunction addContextToFrame(lineno, frame, contents) {\n    if (void 0 === frame.lineno || void 0 === contents) return;\n    frame.pre_context = [];\n    for(let i = makeRangeStart(lineno); i < lineno; i++){\n        const line = contents[i];\n        if (void 0 === line) return void clearLineContext(frame);\n        frame.pre_context.push(line);\n    }\n    if (void 0 === contents[lineno]) return void clearLineContext(frame);\n    frame.context_line = contents[lineno];\n    const end = makeRangeEnd(lineno);\n    frame.post_context = [];\n    for(let i = lineno + 1; i <= end; i++){\n        const line = contents[i];\n        if (void 0 === line) break;\n        frame.post_context.push(line);\n    }\n}\nfunction clearLineContext(frame) {\n    delete frame.pre_context;\n    delete frame.context_line;\n    delete frame.post_context;\n}\nfunction shouldSkipContextLinesForFile(path) {\n    return path.startsWith('node:') || path.endsWith('.min.js') || path.endsWith('.min.cjs') || path.endsWith('.min.mjs') || path.startsWith('data:');\n}\nfunction shouldSkipContextLinesForFrame(frame) {\n    if (void 0 !== frame.lineno && frame.lineno > MAX_CONTEXTLINES_LINENO) return true;\n    if (void 0 !== frame.colno && frame.colno > MAX_CONTEXTLINES_COLNO) return true;\n    return false;\n}\nfunction rangeExistsInContentCache(file, range) {\n    const contents = LRU_FILE_CONTENTS_CACHE.get(file);\n    if (void 0 === contents) return false;\n    for(let i = range[0]; i <= range[1]; i++)if (void 0 === contents[i]) return false;\n    return true;\n}\nfunction makeLineReaderRanges(lines) {\n    if (!lines.length) return [];\n    let i = 0;\n    const line = lines[0];\n    if ('number' != typeof line) return [];\n    let current = makeContextRange(line);\n    const out = [];\n    while(true){\n        if (i === lines.length - 1) {\n            out.push(current);\n            break;\n        }\n        const next = lines[i + 1];\n        if ('number' != typeof next) break;\n        if (next <= current[1]) current[1] = next + DEFAULT_LINES_OF_CONTEXT;\n        else {\n            out.push(current);\n            current = makeContextRange(next);\n        }\n        i++;\n    }\n    return out;\n}\nfunction makeContextRange(line) {\n    return [\n        makeRangeStart(line),\n        makeRangeEnd(line)\n    ];\n}\nfunction makeRangeStart(line) {\n    return Math.max(1, line - DEFAULT_LINES_OF_CONTEXT);\n}\nfunction makeRangeEnd(line) {\n    return line + DEFAULT_LINES_OF_CONTEXT;\n}\nfunction emplace(map, key, contents) {\n    const value = map.get(key);\n    if (void 0 === value) {\n        map.set(key, contents);\n        return contents;\n    }\n    return value;\n}\nfunction snipLine(line, colno) {\n    let newLine = line;\n    const lineLength = newLine.length;\n    if (lineLength <= 150) return newLine;\n    if (colno > lineLength) colno = lineLength;\n    let start = Math.max(colno - 60, 0);\n    if (start < 5) start = 0;\n    let end = Math.min(start + 140, lineLength);\n    if (end > lineLength - 5) end = lineLength;\n    if (end === lineLength) start = Math.max(end - 140, 0);\n    newLine = newLine.slice(start, end);\n    if (start > 0) newLine = `...${newLine}`;\n    if (end < lineLength) newLine += '...';\n    return newLine;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9lcnJvci10cmFja2luZy9tb2RpZmllcnMvY29udGV4dC1saW5lcy5ub2RlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBOEM7QUFDSDtBQUNLO0FBQ2hELG9DQUFvQyx3RUFBNkI7QUFDakUsNkNBQTZDLHdFQUE2QjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5REFBZ0I7QUFDdkMsMkJBQTJCLDhEQUFlO0FBQzFDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxZQUFZO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQzZFIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvZGlzdC9leHRlbnNpb25zL2Vycm9yLXRyYWNraW5nL21vZGlmaWVycy9jb250ZXh0LWxpbmVzLm5vZGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVycm9yVHJhY2tpbmcgfSBmcm9tIFwiQHBvc3Rob2cvY29yZVwiO1xuaW1wb3J0IHsgY3JlYXRlUmVhZFN0cmVhbSB9IGZyb20gXCJub2RlOmZzXCI7XG5pbXBvcnQgeyBjcmVhdGVJbnRlcmZhY2UgfSBmcm9tIFwibm9kZTpyZWFkbGluZVwiO1xuY29uc3QgTFJVX0ZJTEVfQ09OVEVOVFNfQ0FDSEUgPSBuZXcgRXJyb3JUcmFja2luZy5SZWR1Y2VhYmxlQ2FjaGUoMjUpO1xuY29uc3QgTFJVX0ZJTEVfQ09OVEVOVFNfRlNfUkVBRF9GQUlMRUQgPSBuZXcgRXJyb3JUcmFja2luZy5SZWR1Y2VhYmxlQ2FjaGUoMjApO1xuY29uc3QgREVGQVVMVF9MSU5FU19PRl9DT05URVhUID0gNztcbmNvbnN0IE1BWF9DT05URVhUTElORVNfQ09MTk8gPSAxMDAwO1xuY29uc3QgTUFYX0NPTlRFWFRMSU5FU19MSU5FTk8gPSAxMDAwMDtcbmFzeW5jIGZ1bmN0aW9uIGFkZFNvdXJjZUNvbnRleHQoZnJhbWVzKSB7XG4gICAgY29uc3QgZmlsZXNUb0xpbmVzID0ge307XG4gICAgZm9yKGxldCBpID0gZnJhbWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgICAgY29uc3QgZnJhbWUgPSBmcmFtZXNbaV07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZnJhbWU/LmZpbGVuYW1lO1xuICAgICAgICBpZiAoIWZyYW1lIHx8ICdzdHJpbmcnICE9IHR5cGVvZiBmaWxlbmFtZSB8fCAnbnVtYmVyJyAhPSB0eXBlb2YgZnJhbWUubGluZW5vIHx8IHNob3VsZFNraXBDb250ZXh0TGluZXNGb3JGaWxlKGZpbGVuYW1lKSB8fCBzaG91bGRTa2lwQ29udGV4dExpbmVzRm9yRnJhbWUoZnJhbWUpKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgZmlsZXNUb0xpbmVzT3V0cHV0ID0gZmlsZXNUb0xpbmVzW2ZpbGVuYW1lXTtcbiAgICAgICAgaWYgKCFmaWxlc1RvTGluZXNPdXRwdXQpIGZpbGVzVG9MaW5lc1tmaWxlbmFtZV0gPSBbXTtcbiAgICAgICAgZmlsZXNUb0xpbmVzW2ZpbGVuYW1lXS5wdXNoKGZyYW1lLmxpbmVubyk7XG4gICAgfVxuICAgIGNvbnN0IGZpbGVzID0gT2JqZWN0LmtleXMoZmlsZXNUb0xpbmVzKTtcbiAgICBpZiAoMCA9PSBmaWxlcy5sZW5ndGgpIHJldHVybiBmcmFtZXM7XG4gICAgY29uc3QgcmVhZGxpbmVQcm9taXNlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcyl7XG4gICAgICAgIGlmIChMUlVfRklMRV9DT05URU5UU19GU19SRUFEX0ZBSUxFRC5nZXQoZmlsZSkpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBmaWxlc1RvTGluZVJhbmdlcyA9IGZpbGVzVG9MaW5lc1tmaWxlXTtcbiAgICAgICAgaWYgKCFmaWxlc1RvTGluZVJhbmdlcykgY29udGludWU7XG4gICAgICAgIGZpbGVzVG9MaW5lUmFuZ2VzLnNvcnQoKGEsIGIpPT5hIC0gYik7XG4gICAgICAgIGNvbnN0IHJhbmdlcyA9IG1ha2VMaW5lUmVhZGVyUmFuZ2VzKGZpbGVzVG9MaW5lUmFuZ2VzKTtcbiAgICAgICAgaWYgKHJhbmdlcy5ldmVyeSgocik9PnJhbmdlRXhpc3RzSW5Db250ZW50Q2FjaGUoZmlsZSwgcikpKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgY2FjaGUgPSBlbXBsYWNlKExSVV9GSUxFX0NPTlRFTlRTX0NBQ0hFLCBmaWxlLCB7fSk7XG4gICAgICAgIHJlYWRsaW5lUHJvbWlzZXMucHVzaChnZXRDb250ZXh0TGluZXNGcm9tRmlsZShmaWxlLCByYW5nZXMsIGNhY2hlKSk7XG4gICAgfVxuICAgIGF3YWl0IFByb21pc2UuYWxsKHJlYWRsaW5lUHJvbWlzZXMpLmNhdGNoKCgpPT57fSk7XG4gICAgaWYgKGZyYW1lcyAmJiBmcmFtZXMubGVuZ3RoID4gMCkgYWRkU291cmNlQ29udGV4dFRvRnJhbWVzKGZyYW1lcywgTFJVX0ZJTEVfQ09OVEVOVFNfQ0FDSEUpO1xuICAgIExSVV9GSUxFX0NPTlRFTlRTX0NBQ0hFLnJlZHVjZSgpO1xuICAgIHJldHVybiBmcmFtZXM7XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0TGluZXNGcm9tRmlsZShwYXRoLCByYW5nZXMsIG91dHB1dCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PntcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gY3JlYXRlUmVhZFN0cmVhbShwYXRoKTtcbiAgICAgICAgY29uc3QgbGluZVJlYWRlZCA9IGNyZWF0ZUludGVyZmFjZSh7XG4gICAgICAgICAgICBpbnB1dDogc3RyZWFtXG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBkZXN0cm95U3RyZWFtQW5kUmVzb2x2ZSgpIHtcbiAgICAgICAgICAgIHN0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmVOdW1iZXIgPSAwO1xuICAgICAgICBsZXQgY3VycmVudFJhbmdlSW5kZXggPSAwO1xuICAgICAgICBjb25zdCByYW5nZSA9IHJhbmdlc1tjdXJyZW50UmFuZ2VJbmRleF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHJhbmdlKSByZXR1cm4gdm9pZCBkZXN0cm95U3RyZWFtQW5kUmVzb2x2ZSgpO1xuICAgICAgICBsZXQgcmFuZ2VTdGFydCA9IHJhbmdlWzBdO1xuICAgICAgICBsZXQgcmFuZ2VFbmQgPSByYW5nZVsxXTtcbiAgICAgICAgZnVuY3Rpb24gb25TdHJlYW1FcnJvcigpIHtcbiAgICAgICAgICAgIExSVV9GSUxFX0NPTlRFTlRTX0ZTX1JFQURfRkFJTEVELnNldChwYXRoLCAxKTtcbiAgICAgICAgICAgIGxpbmVSZWFkZWQuY2xvc2UoKTtcbiAgICAgICAgICAgIGxpbmVSZWFkZWQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBkZXN0cm95U3RyZWFtQW5kUmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHN0cmVhbS5vbignZXJyb3InLCBvblN0cmVhbUVycm9yKTtcbiAgICAgICAgbGluZVJlYWRlZC5vbignZXJyb3InLCBvblN0cmVhbUVycm9yKTtcbiAgICAgICAgbGluZVJlYWRlZC5vbignY2xvc2UnLCBkZXN0cm95U3RyZWFtQW5kUmVzb2x2ZSk7XG4gICAgICAgIGxpbmVSZWFkZWQub24oJ2xpbmUnLCAobGluZSk9PntcbiAgICAgICAgICAgIGxpbmVOdW1iZXIrKztcbiAgICAgICAgICAgIGlmIChsaW5lTnVtYmVyIDwgcmFuZ2VTdGFydCkgcmV0dXJuO1xuICAgICAgICAgICAgb3V0cHV0W2xpbmVOdW1iZXJdID0gc25pcExpbmUobGluZSwgMCk7XG4gICAgICAgICAgICBpZiAobGluZU51bWJlciA+PSByYW5nZUVuZCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UmFuZ2VJbmRleCA9PT0gcmFuZ2VzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZVJlYWRlZC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBsaW5lUmVhZGVkLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRSYW5nZUluZGV4Kys7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSByYW5nZXNbY3VycmVudFJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVSZWFkZWQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZVJlYWRlZC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByYW5nZVN0YXJ0ID0gcmFuZ2VbMF07XG4gICAgICAgICAgICAgICAgcmFuZ2VFbmQgPSByYW5nZVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBhZGRTb3VyY2VDb250ZXh0VG9GcmFtZXMoZnJhbWVzLCBjYWNoZSkge1xuICAgIGZvciAoY29uc3QgZnJhbWUgb2YgZnJhbWVzKWlmIChmcmFtZS5maWxlbmFtZSAmJiB2b2lkIDAgPT09IGZyYW1lLmNvbnRleHRfbGluZSAmJiAnbnVtYmVyJyA9PSB0eXBlb2YgZnJhbWUubGluZW5vKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gY2FjaGUuZ2V0KGZyYW1lLmZpbGVuYW1lKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gY29udGVudHMpIGNvbnRpbnVlO1xuICAgICAgICBhZGRDb250ZXh0VG9GcmFtZShmcmFtZS5saW5lbm8sIGZyYW1lLCBjb250ZW50cyk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkQ29udGV4dFRvRnJhbWUobGluZW5vLCBmcmFtZSwgY29udGVudHMpIHtcbiAgICBpZiAodm9pZCAwID09PSBmcmFtZS5saW5lbm8gfHwgdm9pZCAwID09PSBjb250ZW50cykgcmV0dXJuO1xuICAgIGZyYW1lLnByZV9jb250ZXh0ID0gW107XG4gICAgZm9yKGxldCBpID0gbWFrZVJhbmdlU3RhcnQobGluZW5vKTsgaSA8IGxpbmVubzsgaSsrKXtcbiAgICAgICAgY29uc3QgbGluZSA9IGNvbnRlbnRzW2ldO1xuICAgICAgICBpZiAodm9pZCAwID09PSBsaW5lKSByZXR1cm4gdm9pZCBjbGVhckxpbmVDb250ZXh0KGZyYW1lKTtcbiAgICAgICAgZnJhbWUucHJlX2NvbnRleHQucHVzaChsaW5lKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCA9PT0gY29udGVudHNbbGluZW5vXSkgcmV0dXJuIHZvaWQgY2xlYXJMaW5lQ29udGV4dChmcmFtZSk7XG4gICAgZnJhbWUuY29udGV4dF9saW5lID0gY29udGVudHNbbGluZW5vXTtcbiAgICBjb25zdCBlbmQgPSBtYWtlUmFuZ2VFbmQobGluZW5vKTtcbiAgICBmcmFtZS5wb3N0X2NvbnRleHQgPSBbXTtcbiAgICBmb3IobGV0IGkgPSBsaW5lbm8gKyAxOyBpIDw9IGVuZDsgaSsrKXtcbiAgICAgICAgY29uc3QgbGluZSA9IGNvbnRlbnRzW2ldO1xuICAgICAgICBpZiAodm9pZCAwID09PSBsaW5lKSBicmVhaztcbiAgICAgICAgZnJhbWUucG9zdF9jb250ZXh0LnB1c2gobGluZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJMaW5lQ29udGV4dChmcmFtZSkge1xuICAgIGRlbGV0ZSBmcmFtZS5wcmVfY29udGV4dDtcbiAgICBkZWxldGUgZnJhbWUuY29udGV4dF9saW5lO1xuICAgIGRlbGV0ZSBmcmFtZS5wb3N0X2NvbnRleHQ7XG59XG5mdW5jdGlvbiBzaG91bGRTa2lwQ29udGV4dExpbmVzRm9yRmlsZShwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGguc3RhcnRzV2l0aCgnbm9kZTonKSB8fCBwYXRoLmVuZHNXaXRoKCcubWluLmpzJykgfHwgcGF0aC5lbmRzV2l0aCgnLm1pbi5janMnKSB8fCBwYXRoLmVuZHNXaXRoKCcubWluLm1qcycpIHx8IHBhdGguc3RhcnRzV2l0aCgnZGF0YTonKTtcbn1cbmZ1bmN0aW9uIHNob3VsZFNraXBDb250ZXh0TGluZXNGb3JGcmFtZShmcmFtZSkge1xuICAgIGlmICh2b2lkIDAgIT09IGZyYW1lLmxpbmVubyAmJiBmcmFtZS5saW5lbm8gPiBNQVhfQ09OVEVYVExJTkVTX0xJTkVOTykgcmV0dXJuIHRydWU7XG4gICAgaWYgKHZvaWQgMCAhPT0gZnJhbWUuY29sbm8gJiYgZnJhbWUuY29sbm8gPiBNQVhfQ09OVEVYVExJTkVTX0NPTE5PKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiByYW5nZUV4aXN0c0luQ29udGVudENhY2hlKGZpbGUsIHJhbmdlKSB7XG4gICAgY29uc3QgY29udGVudHMgPSBMUlVfRklMRV9DT05URU5UU19DQUNIRS5nZXQoZmlsZSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gY29udGVudHMpIHJldHVybiBmYWxzZTtcbiAgICBmb3IobGV0IGkgPSByYW5nZVswXTsgaSA8PSByYW5nZVsxXTsgaSsrKWlmICh2b2lkIDAgPT09IGNvbnRlbnRzW2ldKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBtYWtlTGluZVJlYWRlclJhbmdlcyhsaW5lcykge1xuICAgIGlmICghbGluZXMubGVuZ3RoKSByZXR1cm4gW107XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGxpbmUgPSBsaW5lc1swXTtcbiAgICBpZiAoJ251bWJlcicgIT0gdHlwZW9mIGxpbmUpIHJldHVybiBbXTtcbiAgICBsZXQgY3VycmVudCA9IG1ha2VDb250ZXh0UmFuZ2UobGluZSk7XG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgd2hpbGUodHJ1ZSl7XG4gICAgICAgIGlmIChpID09PSBsaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBvdXQucHVzaChjdXJyZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHQgPSBsaW5lc1tpICsgMV07XG4gICAgICAgIGlmICgnbnVtYmVyJyAhPSB0eXBlb2YgbmV4dCkgYnJlYWs7XG4gICAgICAgIGlmIChuZXh0IDw9IGN1cnJlbnRbMV0pIGN1cnJlbnRbMV0gPSBuZXh0ICsgREVGQVVMVF9MSU5FU19PRl9DT05URVhUO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgICAgICAgICAgY3VycmVudCA9IG1ha2VDb250ZXh0UmFuZ2UobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gbWFrZUNvbnRleHRSYW5nZShsaW5lKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbWFrZVJhbmdlU3RhcnQobGluZSksXG4gICAgICAgIG1ha2VSYW5nZUVuZChsaW5lKVxuICAgIF07XG59XG5mdW5jdGlvbiBtYWtlUmFuZ2VTdGFydChsaW5lKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KDEsIGxpbmUgLSBERUZBVUxUX0xJTkVTX09GX0NPTlRFWFQpO1xufVxuZnVuY3Rpb24gbWFrZVJhbmdlRW5kKGxpbmUpIHtcbiAgICByZXR1cm4gbGluZSArIERFRkFVTFRfTElORVNfT0ZfQ09OVEVYVDtcbn1cbmZ1bmN0aW9uIGVtcGxhY2UobWFwLCBrZXksIGNvbnRlbnRzKSB7XG4gICAgY29uc3QgdmFsdWUgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gdmFsdWUpIHtcbiAgICAgICAgbWFwLnNldChrZXksIGNvbnRlbnRzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRzO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBzbmlwTGluZShsaW5lLCBjb2xubykge1xuICAgIGxldCBuZXdMaW5lID0gbGluZTtcbiAgICBjb25zdCBsaW5lTGVuZ3RoID0gbmV3TGluZS5sZW5ndGg7XG4gICAgaWYgKGxpbmVMZW5ndGggPD0gMTUwKSByZXR1cm4gbmV3TGluZTtcbiAgICBpZiAoY29sbm8gPiBsaW5lTGVuZ3RoKSBjb2xubyA9IGxpbmVMZW5ndGg7XG4gICAgbGV0IHN0YXJ0ID0gTWF0aC5tYXgoY29sbm8gLSA2MCwgMCk7XG4gICAgaWYgKHN0YXJ0IDwgNSkgc3RhcnQgPSAwO1xuICAgIGxldCBlbmQgPSBNYXRoLm1pbihzdGFydCArIDE0MCwgbGluZUxlbmd0aCk7XG4gICAgaWYgKGVuZCA+IGxpbmVMZW5ndGggLSA1KSBlbmQgPSBsaW5lTGVuZ3RoO1xuICAgIGlmIChlbmQgPT09IGxpbmVMZW5ndGgpIHN0YXJ0ID0gTWF0aC5tYXgoZW5kIC0gMTQwLCAwKTtcbiAgICBuZXdMaW5lID0gbmV3TGluZS5zbGljZShzdGFydCwgZW5kKTtcbiAgICBpZiAoc3RhcnQgPiAwKSBuZXdMaW5lID0gYC4uLiR7bmV3TGluZX1gO1xuICAgIGlmIChlbmQgPCBsaW5lTGVuZ3RoKSBuZXdMaW5lICs9ICcuLi4nO1xuICAgIHJldHVybiBuZXdMaW5lO1xufVxuZXhwb3J0IHsgTUFYX0NPTlRFWFRMSU5FU19DT0xOTywgTUFYX0NPTlRFWFRMSU5FU19MSU5FTk8sIGFkZFNvdXJjZUNvbnRleHQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/context-lines.node.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/module.node.mjs":
/*!************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/module.node.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createModulerModifier: () => (/* binding */ createModulerModifier)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n\nfunction createModulerModifier() {\n    const getModuleFromFileName = createGetModuleFromFilename();\n    return async (frames)=>{\n        for (const frame of frames)frame.module = getModuleFromFileName(frame.filename);\n        return frames;\n    };\n}\nfunction createGetModuleFromFilename(basePath = process.argv[1] ? (0,path__WEBPACK_IMPORTED_MODULE_0__.dirname)(process.argv[1]) : process.cwd(), isWindows = '\\\\' === path__WEBPACK_IMPORTED_MODULE_0__.sep) {\n    const normalizedBase = isWindows ? normalizeWindowsPath(basePath) : basePath;\n    return (filename)=>{\n        if (!filename) return;\n        const normalizedFilename = isWindows ? normalizeWindowsPath(filename) : filename;\n        let { dir, base: file, ext } = path__WEBPACK_IMPORTED_MODULE_0__.posix.parse(normalizedFilename);\n        if ('.js' === ext || '.mjs' === ext || '.cjs' === ext) file = file.slice(0, -1 * ext.length);\n        const decodedFile = decodeURIComponent(file);\n        if (!dir) dir = '.';\n        const n = dir.lastIndexOf('/node_modules');\n        if (n > -1) return `${dir.slice(n + 14).replace(/\\//g, '.')}:${decodedFile}`;\n        if (dir.startsWith(normalizedBase)) {\n            const moduleName = dir.slice(normalizedBase.length + 1).replace(/\\//g, '.');\n            return moduleName ? `${moduleName}:${decodedFile}` : decodedFile;\n        }\n        return decodedFile;\n    };\n}\nfunction normalizeWindowsPath(path) {\n    return path.replace(/^[A-Z]:/, '').replace(/\\\\/g, '/');\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9lcnJvci10cmFja2luZy9tb2RpZmllcnMvbW9kdWxlLm5vZGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLDZDQUFPLHdEQUF3RCxxQ0FBRztBQUNwSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsdUJBQXVCLEVBQUUsdUNBQUs7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0NBQXNDLEdBQUcsWUFBWTtBQUNuRjtBQUNBO0FBQ0EsbUNBQW1DLFdBQVcsR0FBRyxZQUFZO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2lDIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvZGlzdC9leHRlbnNpb25zL2Vycm9yLXRyYWNraW5nL21vZGlmaWVycy9tb2R1bGUubm9kZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGlybmFtZSwgcG9zaXgsIHNlcCB9IGZyb20gXCJwYXRoXCI7XG5mdW5jdGlvbiBjcmVhdGVNb2R1bGVyTW9kaWZpZXIoKSB7XG4gICAgY29uc3QgZ2V0TW9kdWxlRnJvbUZpbGVOYW1lID0gY3JlYXRlR2V0TW9kdWxlRnJvbUZpbGVuYW1lKCk7XG4gICAgcmV0dXJuIGFzeW5jIChmcmFtZXMpPT57XG4gICAgICAgIGZvciAoY29uc3QgZnJhbWUgb2YgZnJhbWVzKWZyYW1lLm1vZHVsZSA9IGdldE1vZHVsZUZyb21GaWxlTmFtZShmcmFtZS5maWxlbmFtZSk7XG4gICAgICAgIHJldHVybiBmcmFtZXM7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUdldE1vZHVsZUZyb21GaWxlbmFtZShiYXNlUGF0aCA9IHByb2Nlc3MuYXJndlsxXSA/IGRpcm5hbWUocHJvY2Vzcy5hcmd2WzFdKSA6IHByb2Nlc3MuY3dkKCksIGlzV2luZG93cyA9ICdcXFxcJyA9PT0gc2VwKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZEJhc2UgPSBpc1dpbmRvd3MgPyBub3JtYWxpemVXaW5kb3dzUGF0aChiYXNlUGF0aCkgOiBiYXNlUGF0aDtcbiAgICByZXR1cm4gKGZpbGVuYW1lKT0+e1xuICAgICAgICBpZiAoIWZpbGVuYW1lKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRGaWxlbmFtZSA9IGlzV2luZG93cyA/IG5vcm1hbGl6ZVdpbmRvd3NQYXRoKGZpbGVuYW1lKSA6IGZpbGVuYW1lO1xuICAgICAgICBsZXQgeyBkaXIsIGJhc2U6IGZpbGUsIGV4dCB9ID0gcG9zaXgucGFyc2Uobm9ybWFsaXplZEZpbGVuYW1lKTtcbiAgICAgICAgaWYgKCcuanMnID09PSBleHQgfHwgJy5tanMnID09PSBleHQgfHwgJy5janMnID09PSBleHQpIGZpbGUgPSBmaWxlLnNsaWNlKDAsIC0xICogZXh0Lmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGRlY29kZWRGaWxlID0gZGVjb2RlVVJJQ29tcG9uZW50KGZpbGUpO1xuICAgICAgICBpZiAoIWRpcikgZGlyID0gJy4nO1xuICAgICAgICBjb25zdCBuID0gZGlyLmxhc3RJbmRleE9mKCcvbm9kZV9tb2R1bGVzJyk7XG4gICAgICAgIGlmIChuID4gLTEpIHJldHVybiBgJHtkaXIuc2xpY2UobiArIDE0KS5yZXBsYWNlKC9cXC8vZywgJy4nKX06JHtkZWNvZGVkRmlsZX1gO1xuICAgICAgICBpZiAoZGlyLnN0YXJ0c1dpdGgobm9ybWFsaXplZEJhc2UpKSB7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGVOYW1lID0gZGlyLnNsaWNlKG5vcm1hbGl6ZWRCYXNlLmxlbmd0aCArIDEpLnJlcGxhY2UoL1xcLy9nLCAnLicpO1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZU5hbWUgPyBgJHttb2R1bGVOYW1lfToke2RlY29kZWRGaWxlfWAgOiBkZWNvZGVkRmlsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVjb2RlZEZpbGU7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVdpbmRvd3NQYXRoKHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9eW0EtWl06LywgJycpLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbn1cbmV4cG9ydCB7IGNyZWF0ZU1vZHVsZXJNb2RpZmllciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/modifiers/module.node.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/express.mjs":
/*!*******************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/express.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupExpressErrorHandler: () => (/* binding */ setupExpressErrorHandler)\n/* harmony export */ });\n/* harmony import */ var _posthog_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @posthog/core */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs\");\n/* harmony import */ var _error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./error-tracking/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/error-tracking/index.mjs\");\n\n\nfunction setupExpressErrorHandler(_posthog, app) {\n    app.use((error, _, __, next)=>{\n        const hint = {\n            mechanism: {\n                type: 'middleware',\n                handled: false\n            }\n        };\n        _error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].buildEventMessage(error, hint, (0,_posthog_core__WEBPACK_IMPORTED_MODULE_0__.uuidv7)(), {\n            $process_person_profile: false\n        }).then((msg)=>_posthog.capture(msg));\n        next(error);\n    });\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9leHByZXNzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDaUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWMsZ0NBQWdDLHFEQUFNO0FBQzVEO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ29DIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvZGlzdC9leHRlbnNpb25zL2V4cHJlc3MubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHV1aWR2NyB9IGZyb20gXCJAcG9zdGhvZy9jb3JlXCI7XG5pbXBvcnQgZXJyb3JfdHJhY2tpbmcgZnJvbSBcIi4vZXJyb3ItdHJhY2tpbmcvaW5kZXgubWpzXCI7XG5mdW5jdGlvbiBzZXR1cEV4cHJlc3NFcnJvckhhbmRsZXIoX3Bvc3Rob2csIGFwcCkge1xuICAgIGFwcC51c2UoKGVycm9yLCBfLCBfXywgbmV4dCk9PntcbiAgICAgICAgY29uc3QgaGludCA9IHtcbiAgICAgICAgICAgIG1lY2hhbmlzbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtaWRkbGV3YXJlJyxcbiAgICAgICAgICAgICAgICBoYW5kbGVkOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBlcnJvcl90cmFja2luZy5idWlsZEV2ZW50TWVzc2FnZShlcnJvciwgaGludCwgdXVpZHY3KCksIHtcbiAgICAgICAgICAgICRwcm9jZXNzX3BlcnNvbl9wcm9maWxlOiBmYWxzZVxuICAgICAgICB9KS50aGVuKChtc2cpPT5fcG9zdGhvZy5jYXB0dXJlKG1zZykpO1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHNldHVwRXhwcmVzc0Vycm9ySGFuZGxlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/express.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/feature-flags/crypto.mjs":
/*!********************************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/feature-flags/crypto.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashSHA1: () => (/* binding */ hashSHA1)\n/* harmony export */ });\nasync function hashSHA1(text) {\n    const subtle = globalThis.crypto?.subtle;\n    if (!subtle) throw new Error('SubtleCrypto API not available');\n    const hashBuffer = await subtle.digest('SHA-1', new TextEncoder().encode(text));\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    return hashArray.map((byte)=>byte.toString(16).padStart(2, '0')).join('');\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9mZWF0dXJlLWZsYWdzL2NyeXB0by5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ29CIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvZGlzdC9leHRlbnNpb25zL2ZlYXR1cmUtZmxhZ3MvY3J5cHRvLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyBmdW5jdGlvbiBoYXNoU0hBMSh0ZXh0KSB7XG4gICAgY29uc3Qgc3VidGxlID0gZ2xvYmFsVGhpcy5jcnlwdG8/LnN1YnRsZTtcbiAgICBpZiAoIXN1YnRsZSkgdGhyb3cgbmV3IEVycm9yKCdTdWJ0bGVDcnlwdG8gQVBJIG5vdCBhdmFpbGFibGUnKTtcbiAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgc3VidGxlLmRpZ2VzdCgnU0hBLTEnLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodGV4dCkpO1xuICAgIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcikpO1xuICAgIHJldHVybiBoYXNoQXJyYXkubWFwKChieXRlKT0+Ynl0ZS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XG59XG5leHBvcnQgeyBoYXNoU0hBMSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/feature-flags/crypto.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/feature-flags/feature-flags.mjs":
/*!***************************************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/feature-flags/feature-flags.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientError: () => (/* binding */ ClientError),\n/* harmony export */   FeatureFlagsPoller: () => (/* binding */ FeatureFlagsPoller),\n/* harmony export */   InconclusiveMatchError: () => (/* binding */ InconclusiveMatchError),\n/* harmony export */   RequiresServerEvaluation: () => (/* binding */ RequiresServerEvaluation),\n/* harmony export */   matchProperty: () => (/* binding */ matchProperty),\n/* harmony export */   relativeDateParseForFeatureFlagMatching: () => (/* binding */ relativeDateParseForFeatureFlagMatching)\n/* harmony export */ });\n/* harmony import */ var _posthog_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @posthog/core */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs\");\n/* harmony import */ var _crypto_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto.mjs */ \"(action-browser)/../../node_modules/posthog-node/dist/extensions/feature-flags/crypto.mjs\");\n\n\nconst SIXTY_SECONDS = 60000;\nconst LONG_SCALE = 0xfffffffffffffff;\nconst NULL_VALUES_ALLOWED_OPERATORS = [\n    'is_not'\n];\nclass ClientError extends Error {\n    constructor(message){\n        super();\n        Error.captureStackTrace(this, this.constructor);\n        this.name = 'ClientError';\n        this.message = message;\n        Object.setPrototypeOf(this, ClientError.prototype);\n    }\n}\nclass InconclusiveMatchError extends Error {\n    constructor(message){\n        super(message);\n        this.name = this.constructor.name;\n        Error.captureStackTrace(this, this.constructor);\n        Object.setPrototypeOf(this, InconclusiveMatchError.prototype);\n    }\n}\nclass RequiresServerEvaluation extends Error {\n    constructor(message){\n        super(message);\n        this.name = this.constructor.name;\n        Error.captureStackTrace(this, this.constructor);\n        Object.setPrototypeOf(this, RequiresServerEvaluation.prototype);\n    }\n}\nclass FeatureFlagsPoller {\n    constructor({ pollingInterval, personalApiKey, projectApiKey, timeout, host, customHeaders, ...options }){\n        this.debugMode = false;\n        this.shouldBeginExponentialBackoff = false;\n        this.backOffCount = 0;\n        this.pollingInterval = pollingInterval;\n        this.personalApiKey = personalApiKey;\n        this.featureFlags = [];\n        this.featureFlagsByKey = {};\n        this.groupTypeMapping = {};\n        this.cohorts = {};\n        this.loadedSuccessfullyOnce = false;\n        this.timeout = timeout;\n        this.projectApiKey = projectApiKey;\n        this.host = host;\n        this.poller = void 0;\n        this.fetch = options.fetch || fetch;\n        this.onError = options.onError;\n        this.customHeaders = customHeaders;\n        this.onLoad = options.onLoad;\n        this.loadFeatureFlags();\n    }\n    debug(enabled = true) {\n        this.debugMode = enabled;\n    }\n    logMsgIfDebug(fn) {\n        if (this.debugMode) fn();\n    }\n    async getFeatureFlag(key, distinctId, groups = {}, personProperties = {}, groupProperties = {}) {\n        await this.loadFeatureFlags();\n        let response;\n        let featureFlag;\n        if (!this.loadedSuccessfullyOnce) return response;\n        featureFlag = this.featureFlagsByKey[key];\n        if (void 0 !== featureFlag) try {\n            const result = await this.computeFlagAndPayloadLocally(featureFlag, distinctId, groups, personProperties, groupProperties);\n            response = result.value;\n            this.logMsgIfDebug(()=>console.debug(`Successfully computed flag locally: ${key} -> ${response}`));\n        } catch (e) {\n            if (e instanceof RequiresServerEvaluation || e instanceof InconclusiveMatchError) this.logMsgIfDebug(()=>console.debug(`${e.name} when computing flag locally: ${key}: ${e.message}`));\n            else if (e instanceof Error) this.onError?.(new Error(`Error computing flag locally: ${key}: ${e}`));\n        }\n        return response;\n    }\n    async getAllFlagsAndPayloads(distinctId, groups = {}, personProperties = {}, groupProperties = {}, flagKeysToExplicitlyEvaluate) {\n        await this.loadFeatureFlags();\n        const response = {};\n        const payloads = {};\n        let fallbackToFlags = 0 == this.featureFlags.length;\n        const flagsToEvaluate = flagKeysToExplicitlyEvaluate ? flagKeysToExplicitlyEvaluate.map((key)=>this.featureFlagsByKey[key]).filter(Boolean) : this.featureFlags;\n        const sharedEvaluationCache = {};\n        await Promise.all(flagsToEvaluate.map(async (flag)=>{\n            try {\n                const { value: matchValue, payload: matchPayload } = await this.computeFlagAndPayloadLocally(flag, distinctId, groups, personProperties, groupProperties, void 0, sharedEvaluationCache);\n                response[flag.key] = matchValue;\n                if (matchPayload) payloads[flag.key] = matchPayload;\n            } catch (e) {\n                if (e instanceof RequiresServerEvaluation || e instanceof InconclusiveMatchError) this.logMsgIfDebug(()=>console.debug(`${e.name} when computing flag locally: ${flag.key}: ${e.message}`));\n                else if (e instanceof Error) this.onError?.(new Error(`Error computing flag locally: ${flag.key}: ${e}`));\n                fallbackToFlags = true;\n            }\n        }));\n        return {\n            response,\n            payloads,\n            fallbackToFlags\n        };\n    }\n    async computeFlagAndPayloadLocally(flag, distinctId, groups = {}, personProperties = {}, groupProperties = {}, matchValue, evaluationCache, skipLoadCheck = false) {\n        if (!skipLoadCheck) await this.loadFeatureFlags();\n        if (!this.loadedSuccessfullyOnce) return {\n            value: false,\n            payload: null\n        };\n        let flagValue;\n        flagValue = void 0 !== matchValue ? matchValue : await this.computeFlagValueLocally(flag, distinctId, groups, personProperties, groupProperties, evaluationCache);\n        const payload = this.getFeatureFlagPayload(flag.key, flagValue);\n        return {\n            value: flagValue,\n            payload\n        };\n    }\n    async computeFlagValueLocally(flag, distinctId, groups = {}, personProperties = {}, groupProperties = {}, evaluationCache = {}) {\n        if (flag.ensure_experience_continuity) throw new InconclusiveMatchError('Flag has experience continuity enabled');\n        if (!flag.active) return false;\n        const flagFilters = flag.filters || {};\n        const aggregation_group_type_index = flagFilters.aggregation_group_type_index;\n        if (void 0 == aggregation_group_type_index) return await this.matchFeatureFlagProperties(flag, distinctId, personProperties, evaluationCache);\n        {\n            const groupName = this.groupTypeMapping[String(aggregation_group_type_index)];\n            if (!groupName) {\n                this.logMsgIfDebug(()=>console.warn(`[FEATURE FLAGS] Unknown group type index ${aggregation_group_type_index} for feature flag ${flag.key}`));\n                throw new InconclusiveMatchError('Flag has unknown group type index');\n            }\n            if (!(groupName in groups)) {\n                this.logMsgIfDebug(()=>console.warn(`[FEATURE FLAGS] Can't compute group feature flag: ${flag.key} without group names passed in`));\n                return false;\n            }\n            const focusedGroupProperties = groupProperties[groupName];\n            return await this.matchFeatureFlagProperties(flag, groups[groupName], focusedGroupProperties, evaluationCache);\n        }\n    }\n    getFeatureFlagPayload(key, flagValue) {\n        let payload = null;\n        if (false !== flagValue && null != flagValue) {\n            if ('boolean' == typeof flagValue) payload = this.featureFlagsByKey?.[key]?.filters?.payloads?.[flagValue.toString()] || null;\n            else if ('string' == typeof flagValue) payload = this.featureFlagsByKey?.[key]?.filters?.payloads?.[flagValue] || null;\n            if (null != payload) {\n                if ('object' == typeof payload) return payload;\n                if ('string' == typeof payload) try {\n                    return JSON.parse(payload);\n                } catch  {}\n                return payload;\n            }\n        }\n        return null;\n    }\n    async evaluateFlagDependency(property, distinctId, properties, evaluationCache) {\n        const targetFlagKey = property.key;\n        if (!this.featureFlagsByKey) throw new InconclusiveMatchError('Feature flags not available for dependency evaluation');\n        if (!('dependency_chain' in property)) throw new InconclusiveMatchError(`Flag dependency property for '${targetFlagKey}' is missing required 'dependency_chain' field`);\n        const dependencyChain = property.dependency_chain;\n        if (!Array.isArray(dependencyChain)) throw new InconclusiveMatchError(`Flag dependency property for '${targetFlagKey}' has an invalid 'dependency_chain' (expected array, got ${typeof dependencyChain})`);\n        if (0 === dependencyChain.length) throw new InconclusiveMatchError(`Circular dependency detected for flag '${targetFlagKey}' (empty dependency chain)`);\n        for (const depFlagKey of dependencyChain){\n            if (!(depFlagKey in evaluationCache)) {\n                const depFlag = this.featureFlagsByKey[depFlagKey];\n                if (depFlag) if (depFlag.active) try {\n                    const depResult = await this.matchFeatureFlagProperties(depFlag, distinctId, properties, evaluationCache);\n                    evaluationCache[depFlagKey] = depResult;\n                } catch (error) {\n                    throw new InconclusiveMatchError(`Error evaluating flag dependency '${depFlagKey}' for flag '${targetFlagKey}': ${error}`);\n                }\n                else evaluationCache[depFlagKey] = false;\n                else throw new InconclusiveMatchError(`Missing flag dependency '${depFlagKey}' for flag '${targetFlagKey}'`);\n            }\n            const cachedResult = evaluationCache[depFlagKey];\n            if (null == cachedResult) throw new InconclusiveMatchError(`Dependency '${depFlagKey}' could not be evaluated`);\n        }\n        const targetFlagValue = evaluationCache[targetFlagKey];\n        return this.flagEvaluatesToExpectedValue(property.value, targetFlagValue);\n    }\n    flagEvaluatesToExpectedValue(expectedValue, flagValue) {\n        if ('boolean' == typeof expectedValue) return expectedValue === flagValue || 'string' == typeof flagValue && '' !== flagValue && true === expectedValue;\n        if ('string' == typeof expectedValue) return flagValue === expectedValue;\n        return false;\n    }\n    async matchFeatureFlagProperties(flag, distinctId, properties, evaluationCache = {}) {\n        const flagFilters = flag.filters || {};\n        const flagConditions = flagFilters.groups || [];\n        let isInconclusive = false;\n        let result;\n        for (const condition of flagConditions)try {\n            if (await this.isConditionMatch(flag, distinctId, condition, properties, evaluationCache)) {\n                const variantOverride = condition.variant;\n                const flagVariants = flagFilters.multivariate?.variants || [];\n                result = variantOverride && flagVariants.some((variant)=>variant.key === variantOverride) ? variantOverride : await this.getMatchingVariant(flag, distinctId) || true;\n                break;\n            }\n        } catch (e) {\n            if (e instanceof RequiresServerEvaluation) throw e;\n            if (e instanceof InconclusiveMatchError) isInconclusive = true;\n            else throw e;\n        }\n        if (void 0 !== result) return result;\n        if (isInconclusive) throw new InconclusiveMatchError(\"Can't determine if feature flag is enabled or not with given properties\");\n        return false;\n    }\n    async isConditionMatch(flag, distinctId, condition, properties, evaluationCache = {}) {\n        const rolloutPercentage = condition.rollout_percentage;\n        const warnFunction = (msg)=>{\n            this.logMsgIfDebug(()=>console.warn(msg));\n        };\n        if ((condition.properties || []).length > 0) {\n            for (const prop of condition.properties){\n                const propertyType = prop.type;\n                let matches = false;\n                matches = 'cohort' === propertyType ? matchCohort(prop, properties, this.cohorts, this.debugMode) : 'flag' === propertyType ? await this.evaluateFlagDependency(prop, distinctId, properties, evaluationCache) : matchProperty(prop, properties, warnFunction);\n                if (!matches) return false;\n            }\n            if (void 0 == rolloutPercentage) return true;\n        }\n        if (void 0 != rolloutPercentage && await _hash(flag.key, distinctId) > rolloutPercentage / 100.0) return false;\n        return true;\n    }\n    async getMatchingVariant(flag, distinctId) {\n        const hashValue = await _hash(flag.key, distinctId, 'variant');\n        const matchingVariant = this.variantLookupTable(flag).find((variant)=>hashValue >= variant.valueMin && hashValue < variant.valueMax);\n        if (matchingVariant) return matchingVariant.key;\n    }\n    variantLookupTable(flag) {\n        const lookupTable = [];\n        let valueMin = 0;\n        let valueMax = 0;\n        const flagFilters = flag.filters || {};\n        const multivariates = flagFilters.multivariate?.variants || [];\n        multivariates.forEach((variant)=>{\n            valueMax = valueMin + variant.rollout_percentage / 100.0;\n            lookupTable.push({\n                valueMin,\n                valueMax,\n                key: variant.key\n            });\n            valueMin = valueMax;\n        });\n        return lookupTable;\n    }\n    async loadFeatureFlags(forceReload = false) {\n        if (!this.loadedSuccessfullyOnce || forceReload) await this._loadFeatureFlags();\n    }\n    isLocalEvaluationReady() {\n        return (this.loadedSuccessfullyOnce ?? false) && (this.featureFlags?.length ?? 0) > 0;\n    }\n    getPollingInterval() {\n        if (!this.shouldBeginExponentialBackoff) return this.pollingInterval;\n        return Math.min(SIXTY_SECONDS, this.pollingInterval * 2 ** this.backOffCount);\n    }\n    async _loadFeatureFlags() {\n        if (this.poller) {\n            clearTimeout(this.poller);\n            this.poller = void 0;\n        }\n        this.poller = setTimeout(()=>this._loadFeatureFlags(), this.getPollingInterval());\n        try {\n            const res = await this._requestFeatureFlagDefinitions();\n            if (!res) return;\n            switch(res.status){\n                case 401:\n                    this.shouldBeginExponentialBackoff = true;\n                    this.backOffCount += 1;\n                    throw new ClientError(`Your project key or personal API key is invalid. Setting next polling interval to ${this.getPollingInterval()}ms. More information: https://posthog.com/docs/api#rate-limiting`);\n                case 402:\n                    console.warn('[FEATURE FLAGS] Feature flags quota limit exceeded - unsetting all local flags. Learn more about billing limits at https://posthog.com/docs/billing/limits-alerts');\n                    this.featureFlags = [];\n                    this.featureFlagsByKey = {};\n                    this.groupTypeMapping = {};\n                    this.cohorts = {};\n                    return;\n                case 403:\n                    this.shouldBeginExponentialBackoff = true;\n                    this.backOffCount += 1;\n                    throw new ClientError(`Your personal API key does not have permission to fetch feature flag definitions for local evaluation. Setting next polling interval to ${this.getPollingInterval()}ms. Are you sure you're using the correct personal and Project API key pair? More information: https://posthog.com/docs/api/overview`);\n                case 429:\n                    this.shouldBeginExponentialBackoff = true;\n                    this.backOffCount += 1;\n                    throw new ClientError(`You are being rate limited. Setting next polling interval to ${this.getPollingInterval()}ms. More information: https://posthog.com/docs/api#rate-limiting`);\n                case 200:\n                    {\n                        const responseJson = await res.json() ?? {};\n                        if (!('flags' in responseJson)) return void this.onError?.(new Error(`Invalid response when getting feature flags: ${JSON.stringify(responseJson)}`));\n                        this.featureFlags = responseJson.flags ?? [];\n                        this.featureFlagsByKey = this.featureFlags.reduce((acc, curr)=>(acc[curr.key] = curr, acc), {});\n                        this.groupTypeMapping = responseJson.group_type_mapping || {};\n                        this.cohorts = responseJson.cohorts || {};\n                        this.loadedSuccessfullyOnce = true;\n                        this.shouldBeginExponentialBackoff = false;\n                        this.backOffCount = 0;\n                        this.onLoad?.(this.featureFlags.length);\n                        break;\n                    }\n                default:\n                    return;\n            }\n        } catch (err) {\n            if (err instanceof ClientError) this.onError?.(err);\n        }\n    }\n    getPersonalApiKeyRequestOptions(method = 'GET') {\n        return {\n            method,\n            headers: {\n                ...this.customHeaders,\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${this.personalApiKey}`\n            }\n        };\n    }\n    async _requestFeatureFlagDefinitions() {\n        const url = `${this.host}/api/feature_flag/local_evaluation?token=${this.projectApiKey}&send_cohorts`;\n        const options = this.getPersonalApiKeyRequestOptions();\n        let abortTimeout = null;\n        if (this.timeout && 'number' == typeof this.timeout) {\n            const controller = new AbortController();\n            abortTimeout = (0,_posthog_core__WEBPACK_IMPORTED_MODULE_0__.safeSetTimeout)(()=>{\n                controller.abort();\n            }, this.timeout);\n            options.signal = controller.signal;\n        }\n        try {\n            return await this.fetch(url, options);\n        } finally{\n            clearTimeout(abortTimeout);\n        }\n    }\n    stopPoller() {\n        clearTimeout(this.poller);\n    }\n}\nasync function _hash(key, distinctId, salt = '') {\n    const hashString = await (0,_crypto_mjs__WEBPACK_IMPORTED_MODULE_1__.hashSHA1)(`${key}.${distinctId}${salt}`);\n    return parseInt(hashString.slice(0, 15), 16) / LONG_SCALE;\n}\nfunction matchProperty(property, propertyValues, warnFunction) {\n    const key = property.key;\n    const value = property.value;\n    const operator = property.operator || 'exact';\n    if (key in propertyValues) {\n        if ('is_not_set' === operator) throw new InconclusiveMatchError(\"Operator is_not_set is not supported\");\n    } else throw new InconclusiveMatchError(`Property ${key} not found in propertyValues`);\n    const overrideValue = propertyValues[key];\n    if (null == overrideValue && !NULL_VALUES_ALLOWED_OPERATORS.includes(operator)) {\n        if (warnFunction) warnFunction(`Property ${key} cannot have a value of null/undefined with the ${operator} operator`);\n        return false;\n    }\n    function computeExactMatch(value, overrideValue) {\n        if (Array.isArray(value)) return value.map((val)=>String(val).toLowerCase()).includes(String(overrideValue).toLowerCase());\n        return String(value).toLowerCase() === String(overrideValue).toLowerCase();\n    }\n    function compare(lhs, rhs, operator) {\n        if ('gt' === operator) return lhs > rhs;\n        if ('gte' === operator) return lhs >= rhs;\n        if ('lt' === operator) return lhs < rhs;\n        if ('lte' === operator) return lhs <= rhs;\n        throw new Error(`Invalid operator: ${operator}`);\n    }\n    switch(operator){\n        case 'exact':\n            return computeExactMatch(value, overrideValue);\n        case 'is_not':\n            return !computeExactMatch(value, overrideValue);\n        case 'is_set':\n            return key in propertyValues;\n        case 'icontains':\n            return String(overrideValue).toLowerCase().includes(String(value).toLowerCase());\n        case 'not_icontains':\n            return !String(overrideValue).toLowerCase().includes(String(value).toLowerCase());\n        case 'regex':\n            return isValidRegex(String(value)) && null !== String(overrideValue).match(String(value));\n        case 'not_regex':\n            return isValidRegex(String(value)) && null === String(overrideValue).match(String(value));\n        case 'gt':\n        case 'gte':\n        case 'lt':\n        case 'lte':\n            {\n                let parsedValue = 'number' == typeof value ? value : null;\n                if ('string' == typeof value) try {\n                    parsedValue = parseFloat(value);\n                } catch (err) {}\n                if (null == parsedValue || null == overrideValue) return compare(String(overrideValue), String(value), operator);\n                if ('string' == typeof overrideValue) return compare(overrideValue, String(value), operator);\n                return compare(overrideValue, parsedValue, operator);\n            }\n        case 'is_date_after':\n        case 'is_date_before':\n            {\n                if ('boolean' == typeof value) throw new InconclusiveMatchError(\"Date operations cannot be performed on boolean values\");\n                let parsedDate = relativeDateParseForFeatureFlagMatching(String(value));\n                if (null == parsedDate) parsedDate = convertToDateTime(value);\n                if (null == parsedDate) throw new InconclusiveMatchError(`Invalid date: ${value}`);\n                const overrideDate = convertToDateTime(overrideValue);\n                if ([\n                    'is_date_before'\n                ].includes(operator)) return overrideDate < parsedDate;\n                return overrideDate > parsedDate;\n            }\n        default:\n            throw new InconclusiveMatchError(`Unknown operator: ${operator}`);\n    }\n}\nfunction checkCohortExists(cohortId, cohortProperties) {\n    if (!(cohortId in cohortProperties)) throw new RequiresServerEvaluation(`cohort ${cohortId} not found in local cohorts - likely a static cohort that requires server evaluation`);\n}\nfunction matchCohort(property, propertyValues, cohortProperties, debugMode = false) {\n    const cohortId = String(property.value);\n    checkCohortExists(cohortId, cohortProperties);\n    const propertyGroup = cohortProperties[cohortId];\n    return matchPropertyGroup(propertyGroup, propertyValues, cohortProperties, debugMode);\n}\nfunction matchPropertyGroup(propertyGroup, propertyValues, cohortProperties, debugMode = false) {\n    if (!propertyGroup) return true;\n    const propertyGroupType = propertyGroup.type;\n    const properties = propertyGroup.values;\n    if (!properties || 0 === properties.length) return true;\n    let errorMatchingLocally = false;\n    if ('values' in properties[0]) {\n        for (const prop of properties)try {\n            const matches = matchPropertyGroup(prop, propertyValues, cohortProperties, debugMode);\n            if ('AND' === propertyGroupType) {\n                if (!matches) return false;\n            } else if (matches) return true;\n        } catch (err) {\n            if (err instanceof RequiresServerEvaluation) throw err;\n            if (err instanceof InconclusiveMatchError) {\n                if (debugMode) console.debug(`Failed to compute property ${prop} locally: ${err}`);\n                errorMatchingLocally = true;\n            } else throw err;\n        }\n        if (errorMatchingLocally) throw new InconclusiveMatchError(\"Can't match cohort without a given cohort property value\");\n        return 'AND' === propertyGroupType;\n    }\n    for (const prop of properties)try {\n        let matches;\n        if ('cohort' === prop.type) matches = matchCohort(prop, propertyValues, cohortProperties, debugMode);\n        else if ('flag' === prop.type) {\n            if (debugMode) console.warn(`[FEATURE FLAGS] Flag dependency filters are not supported in local evaluation. Skipping condition with dependency on flag '${prop.key || 'unknown'}'`);\n            continue;\n        } else matches = matchProperty(prop, propertyValues);\n        const negation = prop.negation || false;\n        if ('AND' === propertyGroupType) {\n            if (!matches && !negation) return false;\n            if (matches && negation) return false;\n        } else {\n            if (matches && !negation) return true;\n            if (!matches && negation) return true;\n        }\n    } catch (err) {\n        if (err instanceof RequiresServerEvaluation) throw err;\n        if (err instanceof InconclusiveMatchError) {\n            if (debugMode) console.debug(`Failed to compute property ${prop} locally: ${err}`);\n            errorMatchingLocally = true;\n        } else throw err;\n    }\n    if (errorMatchingLocally) throw new InconclusiveMatchError(\"can't match cohort without a given cohort property value\");\n    return 'AND' === propertyGroupType;\n}\nfunction isValidRegex(regex) {\n    try {\n        new RegExp(regex);\n        return true;\n    } catch (err) {\n        return false;\n    }\n}\nfunction convertToDateTime(value) {\n    if (value instanceof Date) return value;\n    if ('string' == typeof value || 'number' == typeof value) {\n        const date = new Date(value);\n        if (!isNaN(date.valueOf())) return date;\n        throw new InconclusiveMatchError(`${value} is in an invalid date format`);\n    }\n    throw new InconclusiveMatchError(`The date provided ${value} must be a string, number, or date object`);\n}\nfunction relativeDateParseForFeatureFlagMatching(value) {\n    const regex = /^-?(?<number>[0-9]+)(?<interval>[a-z])$/;\n    const match = value.match(regex);\n    const parsedDt = new Date(new Date().toISOString());\n    if (!match) return null;\n    {\n        if (!match.groups) return null;\n        const number = parseInt(match.groups['number']);\n        if (number >= 10000) return null;\n        const interval = match.groups['interval'];\n        if ('h' == interval) parsedDt.setUTCHours(parsedDt.getUTCHours() - number);\n        else if ('d' == interval) parsedDt.setUTCDate(parsedDt.getUTCDate() - number);\n        else if ('w' == interval) parsedDt.setUTCDate(parsedDt.getUTCDate() - 7 * number);\n        else if ('m' == interval) parsedDt.setUTCMonth(parsedDt.getUTCMonth() - number);\n        else {\n            if ('y' != interval) return null;\n            parsedDt.setUTCFullYear(parsedDt.getUTCFullYear() - number);\n        }\n        return parsedDt;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9mZWF0dXJlLWZsYWdzL2ZlYXR1cmUtZmxhZ3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStDO0FBQ1A7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEZBQTBGO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsdUJBQXVCLHNCQUFzQjtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGLEtBQUssS0FBSyxTQUFTO0FBQzNHLFVBQVU7QUFDVixzSUFBc0ksUUFBUSwrQkFBK0IsSUFBSSxJQUFJLFVBQVU7QUFDL0wsbUdBQW1HLElBQUksSUFBSSxFQUFFO0FBQzdHO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx1QkFBdUIsc0JBQXNCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQTJDO0FBQ25FO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsMElBQTBJLFFBQVEsK0JBQStCLFNBQVMsSUFBSSxVQUFVO0FBQ3hNLHVHQUF1RyxTQUFTLElBQUksRUFBRTtBQUN0SDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSx1QkFBdUIsc0JBQXNCO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELHVCQUF1QixzQkFBc0Isc0JBQXNCO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnR0FBZ0csOEJBQThCLG1CQUFtQixTQUFTO0FBQzFKO0FBQ0E7QUFDQTtBQUNBLHlHQUF5RyxVQUFVO0FBQ25IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUhBQWlILGNBQWM7QUFDL0g7QUFDQSwrR0FBK0csY0FBYywyREFBMkQsdUJBQXVCO0FBQy9NLHFIQUFxSCxjQUFjO0FBQ25JO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQiwwRkFBMEYsV0FBVyxjQUFjLGNBQWMsS0FBSyxNQUFNO0FBQzVJO0FBQ0E7QUFDQSxrRkFBa0YsV0FBVyxjQUFjLGNBQWM7QUFDekg7QUFDQTtBQUNBLHNGQUFzRixXQUFXO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RkFBd0Y7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0hBQStILDBCQUEwQjtBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFMQUFxTCwwQkFBMEI7QUFDL007QUFDQTtBQUNBO0FBQ0EsMEdBQTBHLDBCQUEwQjtBQUNwSTtBQUNBO0FBQ0E7QUFDQSw2SUFBNkksNkJBQTZCO0FBQzFLO0FBQ0Esc0hBQXNIO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG9CQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixVQUFVLDJDQUEyQyxtQkFBbUI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsNkRBQWM7QUFDekM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxREFBUSxJQUFJLElBQUksR0FBRyxXQUFXLEVBQUUsS0FBSztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxrREFBa0QsS0FBSztBQUM3RDtBQUNBO0FBQ0EsbURBQW1ELEtBQUssaURBQWlELFVBQVU7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxTQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixNQUFNO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLFNBQVM7QUFDM0U7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLFVBQVU7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLFVBQVU7QUFDVjtBQUNBO0FBQ0EsMkVBQTJFLE1BQU0sV0FBVyxJQUFJO0FBQ2hHO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzS0FBc0ssc0JBQXNCO0FBQzVMO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsdUVBQXVFLE1BQU0sV0FBVyxJQUFJO0FBQzVGO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxPQUFPO0FBQ25EO0FBQ0EsMERBQTBELE9BQU87QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDcUoiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9kaXN0L2V4dGVuc2lvbnMvZmVhdHVyZS1mbGFncy9mZWF0dXJlLWZsYWdzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzYWZlU2V0VGltZW91dCB9IGZyb20gXCJAcG9zdGhvZy9jb3JlXCI7XG5pbXBvcnQgeyBoYXNoU0hBMSB9IGZyb20gXCIuL2NyeXB0by5tanNcIjtcbmNvbnN0IFNJWFRZX1NFQ09ORFMgPSA2MDAwMDtcbmNvbnN0IExPTkdfU0NBTEUgPSAweGZmZmZmZmZmZmZmZmZmZjtcbmNvbnN0IE5VTExfVkFMVUVTX0FMTE9XRURfT1BFUkFUT1JTID0gW1xuICAgICdpc19ub3QnXG5dO1xuY2xhc3MgQ2xpZW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSl7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnQ2xpZW50RXJyb3InO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgQ2xpZW50RXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5jbGFzcyBJbmNvbmNsdXNpdmVNYXRjaEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2Upe1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEluY29uY2x1c2l2ZU1hdGNoRXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG5jbGFzcyBSZXF1aXJlc1NlcnZlckV2YWx1YXRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSl7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgUmVxdWlyZXNTZXJ2ZXJFdmFsdWF0aW9uLnByb3RvdHlwZSk7XG4gICAgfVxufVxuY2xhc3MgRmVhdHVyZUZsYWdzUG9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHBvbGxpbmdJbnRlcnZhbCwgcGVyc29uYWxBcGlLZXksIHByb2plY3RBcGlLZXksIHRpbWVvdXQsIGhvc3QsIGN1c3RvbUhlYWRlcnMsIC4uLm9wdGlvbnMgfSl7XG4gICAgICAgIHRoaXMuZGVidWdNb2RlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2hvdWxkQmVnaW5FeHBvbmVudGlhbEJhY2tvZmYgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5iYWNrT2ZmQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnBvbGxpbmdJbnRlcnZhbCA9IHBvbGxpbmdJbnRlcnZhbDtcbiAgICAgICAgdGhpcy5wZXJzb25hbEFwaUtleSA9IHBlcnNvbmFsQXBpS2V5O1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFncyA9IFtdO1xuICAgICAgICB0aGlzLmZlYXR1cmVGbGFnc0J5S2V5ID0ge307XG4gICAgICAgIHRoaXMuZ3JvdXBUeXBlTWFwcGluZyA9IHt9O1xuICAgICAgICB0aGlzLmNvaG9ydHMgPSB7fTtcbiAgICAgICAgdGhpcy5sb2FkZWRTdWNjZXNzZnVsbHlPbmNlID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICAgIHRoaXMucHJvamVjdEFwaUtleSA9IHByb2plY3RBcGlLZXk7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMucG9sbGVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmZldGNoID0gb3B0aW9ucy5mZXRjaCB8fCBmZXRjaDtcbiAgICAgICAgdGhpcy5vbkVycm9yID0gb3B0aW9ucy5vbkVycm9yO1xuICAgICAgICB0aGlzLmN1c3RvbUhlYWRlcnMgPSBjdXN0b21IZWFkZXJzO1xuICAgICAgICB0aGlzLm9uTG9hZCA9IG9wdGlvbnMub25Mb2FkO1xuICAgICAgICB0aGlzLmxvYWRGZWF0dXJlRmxhZ3MoKTtcbiAgICB9XG4gICAgZGVidWcoZW5hYmxlZCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5kZWJ1Z01vZGUgPSBlbmFibGVkO1xuICAgIH1cbiAgICBsb2dNc2dJZkRlYnVnKGZuKSB7XG4gICAgICAgIGlmICh0aGlzLmRlYnVnTW9kZSkgZm4oKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVhdHVyZUZsYWcoa2V5LCBkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRGZWF0dXJlRmxhZ3MoKTtcbiAgICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgICBsZXQgZmVhdHVyZUZsYWc7XG4gICAgICAgIGlmICghdGhpcy5sb2FkZWRTdWNjZXNzZnVsbHlPbmNlKSByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIGZlYXR1cmVGbGFnID0gdGhpcy5mZWF0dXJlRmxhZ3NCeUtleVtrZXldO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBmZWF0dXJlRmxhZykgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29tcHV0ZUZsYWdBbmRQYXlsb2FkTG9jYWxseShmZWF0dXJlRmxhZywgZGlzdGluY3RJZCwgZ3JvdXBzLCBwZXJzb25Qcm9wZXJ0aWVzLCBncm91cFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgcmVzcG9uc2UgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICB0aGlzLmxvZ01zZ0lmRGVidWcoKCk9PmNvbnNvbGUuZGVidWcoYFN1Y2Nlc3NmdWxseSBjb21wdXRlZCBmbGFnIGxvY2FsbHk6ICR7a2V5fSAtPiAke3Jlc3BvbnNlfWApKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZXF1aXJlc1NlcnZlckV2YWx1YXRpb24gfHwgZSBpbnN0YW5jZW9mIEluY29uY2x1c2l2ZU1hdGNoRXJyb3IpIHRoaXMubG9nTXNnSWZEZWJ1ZygoKT0+Y29uc29sZS5kZWJ1ZyhgJHtlLm5hbWV9IHdoZW4gY29tcHV0aW5nIGZsYWcgbG9jYWxseTogJHtrZXl9OiAke2UubWVzc2FnZX1gKSk7XG4gICAgICAgICAgICBlbHNlIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHRoaXMub25FcnJvcj8uKG5ldyBFcnJvcihgRXJyb3IgY29tcHV0aW5nIGZsYWcgbG9jYWxseTogJHtrZXl9OiAke2V9YCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0QWxsRmxhZ3NBbmRQYXlsb2FkcyhkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgZmxhZ0tleXNUb0V4cGxpY2l0bHlFdmFsdWF0ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRGZWF0dXJlRmxhZ3MoKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7fTtcbiAgICAgICAgY29uc3QgcGF5bG9hZHMgPSB7fTtcbiAgICAgICAgbGV0IGZhbGxiYWNrVG9GbGFncyA9IDAgPT0gdGhpcy5mZWF0dXJlRmxhZ3MubGVuZ3RoO1xuICAgICAgICBjb25zdCBmbGFnc1RvRXZhbHVhdGUgPSBmbGFnS2V5c1RvRXhwbGljaXRseUV2YWx1YXRlID8gZmxhZ0tleXNUb0V4cGxpY2l0bHlFdmFsdWF0ZS5tYXAoKGtleSk9PnRoaXMuZmVhdHVyZUZsYWdzQnlLZXlba2V5XSkuZmlsdGVyKEJvb2xlYW4pIDogdGhpcy5mZWF0dXJlRmxhZ3M7XG4gICAgICAgIGNvbnN0IHNoYXJlZEV2YWx1YXRpb25DYWNoZSA9IHt9O1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChmbGFnc1RvRXZhbHVhdGUubWFwKGFzeW5jIChmbGFnKT0+e1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBtYXRjaFZhbHVlLCBwYXlsb2FkOiBtYXRjaFBheWxvYWQgfSA9IGF3YWl0IHRoaXMuY29tcHV0ZUZsYWdBbmRQYXlsb2FkTG9jYWxseShmbGFnLCBkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcywgdm9pZCAwLCBzaGFyZWRFdmFsdWF0aW9uQ2FjaGUpO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlW2ZsYWcua2V5XSA9IG1hdGNoVmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoUGF5bG9hZCkgcGF5bG9hZHNbZmxhZy5rZXldID0gbWF0Y2hQYXlsb2FkO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVxdWlyZXNTZXJ2ZXJFdmFsdWF0aW9uIHx8IGUgaW5zdGFuY2VvZiBJbmNvbmNsdXNpdmVNYXRjaEVycm9yKSB0aGlzLmxvZ01zZ0lmRGVidWcoKCk9PmNvbnNvbGUuZGVidWcoYCR7ZS5uYW1lfSB3aGVuIGNvbXB1dGluZyBmbGFnIGxvY2FsbHk6ICR7ZmxhZy5rZXl9OiAke2UubWVzc2FnZX1gKSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB0aGlzLm9uRXJyb3I/LihuZXcgRXJyb3IoYEVycm9yIGNvbXB1dGluZyBmbGFnIGxvY2FsbHk6ICR7ZmxhZy5rZXl9OiAke2V9YCkpO1xuICAgICAgICAgICAgICAgIGZhbGxiYWNrVG9GbGFncyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgICAgcGF5bG9hZHMsXG4gICAgICAgICAgICBmYWxsYmFja1RvRmxhZ3NcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgY29tcHV0ZUZsYWdBbmRQYXlsb2FkTG9jYWxseShmbGFnLCBkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgbWF0Y2hWYWx1ZSwgZXZhbHVhdGlvbkNhY2hlLCBza2lwTG9hZENoZWNrID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFza2lwTG9hZENoZWNrKSBhd2FpdCB0aGlzLmxvYWRGZWF0dXJlRmxhZ3MoKTtcbiAgICAgICAgaWYgKCF0aGlzLmxvYWRlZFN1Y2Nlc3NmdWxseU9uY2UpIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICAgICAgICBwYXlsb2FkOiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBmbGFnVmFsdWU7XG4gICAgICAgIGZsYWdWYWx1ZSA9IHZvaWQgMCAhPT0gbWF0Y2hWYWx1ZSA/IG1hdGNoVmFsdWUgOiBhd2FpdCB0aGlzLmNvbXB1dGVGbGFnVmFsdWVMb2NhbGx5KGZsYWcsIGRpc3RpbmN0SWQsIGdyb3VwcywgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzLCBldmFsdWF0aW9uQ2FjaGUpO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gdGhpcy5nZXRGZWF0dXJlRmxhZ1BheWxvYWQoZmxhZy5rZXksIGZsYWdWYWx1ZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogZmxhZ1ZhbHVlLFxuICAgICAgICAgICAgcGF5bG9hZFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBjb21wdXRlRmxhZ1ZhbHVlTG9jYWxseShmbGFnLCBkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgZXZhbHVhdGlvbkNhY2hlID0ge30pIHtcbiAgICAgICAgaWYgKGZsYWcuZW5zdXJlX2V4cGVyaWVuY2VfY29udGludWl0eSkgdGhyb3cgbmV3IEluY29uY2x1c2l2ZU1hdGNoRXJyb3IoJ0ZsYWcgaGFzIGV4cGVyaWVuY2UgY29udGludWl0eSBlbmFibGVkJyk7XG4gICAgICAgIGlmICghZmxhZy5hY3RpdmUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgZmxhZ0ZpbHRlcnMgPSBmbGFnLmZpbHRlcnMgfHwge307XG4gICAgICAgIGNvbnN0IGFnZ3JlZ2F0aW9uX2dyb3VwX3R5cGVfaW5kZXggPSBmbGFnRmlsdGVycy5hZ2dyZWdhdGlvbl9ncm91cF90eXBlX2luZGV4O1xuICAgICAgICBpZiAodm9pZCAwID09IGFnZ3JlZ2F0aW9uX2dyb3VwX3R5cGVfaW5kZXgpIHJldHVybiBhd2FpdCB0aGlzLm1hdGNoRmVhdHVyZUZsYWdQcm9wZXJ0aWVzKGZsYWcsIGRpc3RpbmN0SWQsIHBlcnNvblByb3BlcnRpZXMsIGV2YWx1YXRpb25DYWNoZSk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IHRoaXMuZ3JvdXBUeXBlTWFwcGluZ1tTdHJpbmcoYWdncmVnYXRpb25fZ3JvdXBfdHlwZV9pbmRleCldO1xuICAgICAgICAgICAgaWYgKCFncm91cE5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ01zZ0lmRGVidWcoKCk9PmNvbnNvbGUud2FybihgW0ZFQVRVUkUgRkxBR1NdIFVua25vd24gZ3JvdXAgdHlwZSBpbmRleCAke2FnZ3JlZ2F0aW9uX2dyb3VwX3R5cGVfaW5kZXh9IGZvciBmZWF0dXJlIGZsYWcgJHtmbGFnLmtleX1gKSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEluY29uY2x1c2l2ZU1hdGNoRXJyb3IoJ0ZsYWcgaGFzIHVua25vd24gZ3JvdXAgdHlwZSBpbmRleCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEoZ3JvdXBOYW1lIGluIGdyb3VwcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ01zZ0lmRGVidWcoKCk9PmNvbnNvbGUud2FybihgW0ZFQVRVUkUgRkxBR1NdIENhbid0IGNvbXB1dGUgZ3JvdXAgZmVhdHVyZSBmbGFnOiAke2ZsYWcua2V5fSB3aXRob3V0IGdyb3VwIG5hbWVzIHBhc3NlZCBpbmApKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmb2N1c2VkR3JvdXBQcm9wZXJ0aWVzID0gZ3JvdXBQcm9wZXJ0aWVzW2dyb3VwTmFtZV07XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5tYXRjaEZlYXR1cmVGbGFnUHJvcGVydGllcyhmbGFnLCBncm91cHNbZ3JvdXBOYW1lXSwgZm9jdXNlZEdyb3VwUHJvcGVydGllcywgZXZhbHVhdGlvbkNhY2hlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGZWF0dXJlRmxhZ1BheWxvYWQoa2V5LCBmbGFnVmFsdWUpIHtcbiAgICAgICAgbGV0IHBheWxvYWQgPSBudWxsO1xuICAgICAgICBpZiAoZmFsc2UgIT09IGZsYWdWYWx1ZSAmJiBudWxsICE9IGZsYWdWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKCdib29sZWFuJyA9PSB0eXBlb2YgZmxhZ1ZhbHVlKSBwYXlsb2FkID0gdGhpcy5mZWF0dXJlRmxhZ3NCeUtleT8uW2tleV0/LmZpbHRlcnM/LnBheWxvYWRzPy5bZmxhZ1ZhbHVlLnRvU3RyaW5nKCldIHx8IG51bGw7XG4gICAgICAgICAgICBlbHNlIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZmxhZ1ZhbHVlKSBwYXlsb2FkID0gdGhpcy5mZWF0dXJlRmxhZ3NCeUtleT8uW2tleV0/LmZpbHRlcnM/LnBheWxvYWRzPy5bZmxhZ1ZhbHVlXSB8fCBudWxsO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gcGF5bG9hZCkge1xuICAgICAgICAgICAgICAgIGlmICgnb2JqZWN0JyA9PSB0eXBlb2YgcGF5bG9hZCkgcmV0dXJuIHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBwYXlsb2FkKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoICB7fVxuICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBhc3luYyBldmFsdWF0ZUZsYWdEZXBlbmRlbmN5KHByb3BlcnR5LCBkaXN0aW5jdElkLCBwcm9wZXJ0aWVzLCBldmFsdWF0aW9uQ2FjaGUpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RmxhZ0tleSA9IHByb3BlcnR5LmtleTtcbiAgICAgICAgaWYgKCF0aGlzLmZlYXR1cmVGbGFnc0J5S2V5KSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcignRmVhdHVyZSBmbGFncyBub3QgYXZhaWxhYmxlIGZvciBkZXBlbmRlbmN5IGV2YWx1YXRpb24nKTtcbiAgICAgICAgaWYgKCEoJ2RlcGVuZGVuY3lfY2hhaW4nIGluIHByb3BlcnR5KSkgdGhyb3cgbmV3IEluY29uY2x1c2l2ZU1hdGNoRXJyb3IoYEZsYWcgZGVwZW5kZW5jeSBwcm9wZXJ0eSBmb3IgJyR7dGFyZ2V0RmxhZ0tleX0nIGlzIG1pc3NpbmcgcmVxdWlyZWQgJ2RlcGVuZGVuY3lfY2hhaW4nIGZpZWxkYCk7XG4gICAgICAgIGNvbnN0IGRlcGVuZGVuY3lDaGFpbiA9IHByb3BlcnR5LmRlcGVuZGVuY3lfY2hhaW47XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkZXBlbmRlbmN5Q2hhaW4pKSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihgRmxhZyBkZXBlbmRlbmN5IHByb3BlcnR5IGZvciAnJHt0YXJnZXRGbGFnS2V5fScgaGFzIGFuIGludmFsaWQgJ2RlcGVuZGVuY3lfY2hhaW4nIChleHBlY3RlZCBhcnJheSwgZ290ICR7dHlwZW9mIGRlcGVuZGVuY3lDaGFpbn0pYCk7XG4gICAgICAgIGlmICgwID09PSBkZXBlbmRlbmN5Q2hhaW4ubGVuZ3RoKSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihgQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3RlZCBmb3IgZmxhZyAnJHt0YXJnZXRGbGFnS2V5fScgKGVtcHR5IGRlcGVuZGVuY3kgY2hhaW4pYCk7XG4gICAgICAgIGZvciAoY29uc3QgZGVwRmxhZ0tleSBvZiBkZXBlbmRlbmN5Q2hhaW4pe1xuICAgICAgICAgICAgaWYgKCEoZGVwRmxhZ0tleSBpbiBldmFsdWF0aW9uQ2FjaGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwRmxhZyA9IHRoaXMuZmVhdHVyZUZsYWdzQnlLZXlbZGVwRmxhZ0tleV07XG4gICAgICAgICAgICAgICAgaWYgKGRlcEZsYWcpIGlmIChkZXBGbGFnLmFjdGl2ZSkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVwUmVzdWx0ID0gYXdhaXQgdGhpcy5tYXRjaEZlYXR1cmVGbGFnUHJvcGVydGllcyhkZXBGbGFnLCBkaXN0aW5jdElkLCBwcm9wZXJ0aWVzLCBldmFsdWF0aW9uQ2FjaGUpO1xuICAgICAgICAgICAgICAgICAgICBldmFsdWF0aW9uQ2FjaGVbZGVwRmxhZ0tleV0gPSBkZXBSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEluY29uY2x1c2l2ZU1hdGNoRXJyb3IoYEVycm9yIGV2YWx1YXRpbmcgZmxhZyBkZXBlbmRlbmN5ICcke2RlcEZsYWdLZXl9JyBmb3IgZmxhZyAnJHt0YXJnZXRGbGFnS2V5fSc6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgZXZhbHVhdGlvbkNhY2hlW2RlcEZsYWdLZXldID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZWxzZSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihgTWlzc2luZyBmbGFnIGRlcGVuZGVuY3kgJyR7ZGVwRmxhZ0tleX0nIGZvciBmbGFnICcke3RhcmdldEZsYWdLZXl9J2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2FjaGVkUmVzdWx0ID0gZXZhbHVhdGlvbkNhY2hlW2RlcEZsYWdLZXldO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gY2FjaGVkUmVzdWx0KSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihgRGVwZW5kZW5jeSAnJHtkZXBGbGFnS2V5fScgY291bGQgbm90IGJlIGV2YWx1YXRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldEZsYWdWYWx1ZSA9IGV2YWx1YXRpb25DYWNoZVt0YXJnZXRGbGFnS2V5XTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhZ0V2YWx1YXRlc1RvRXhwZWN0ZWRWYWx1ZShwcm9wZXJ0eS52YWx1ZSwgdGFyZ2V0RmxhZ1ZhbHVlKTtcbiAgICB9XG4gICAgZmxhZ0V2YWx1YXRlc1RvRXhwZWN0ZWRWYWx1ZShleHBlY3RlZFZhbHVlLCBmbGFnVmFsdWUpIHtcbiAgICAgICAgaWYgKCdib29sZWFuJyA9PSB0eXBlb2YgZXhwZWN0ZWRWYWx1ZSkgcmV0dXJuIGV4cGVjdGVkVmFsdWUgPT09IGZsYWdWYWx1ZSB8fCAnc3RyaW5nJyA9PSB0eXBlb2YgZmxhZ1ZhbHVlICYmICcnICE9PSBmbGFnVmFsdWUgJiYgdHJ1ZSA9PT0gZXhwZWN0ZWRWYWx1ZTtcbiAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBleHBlY3RlZFZhbHVlKSByZXR1cm4gZmxhZ1ZhbHVlID09PSBleHBlY3RlZFZhbHVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIG1hdGNoRmVhdHVyZUZsYWdQcm9wZXJ0aWVzKGZsYWcsIGRpc3RpbmN0SWQsIHByb3BlcnRpZXMsIGV2YWx1YXRpb25DYWNoZSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGZsYWdGaWx0ZXJzID0gZmxhZy5maWx0ZXJzIHx8IHt9O1xuICAgICAgICBjb25zdCBmbGFnQ29uZGl0aW9ucyA9IGZsYWdGaWx0ZXJzLmdyb3VwcyB8fCBbXTtcbiAgICAgICAgbGV0IGlzSW5jb25jbHVzaXZlID0gZmFsc2U7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGZvciAoY29uc3QgY29uZGl0aW9uIG9mIGZsYWdDb25kaXRpb25zKXRyeSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5pc0NvbmRpdGlvbk1hdGNoKGZsYWcsIGRpc3RpbmN0SWQsIGNvbmRpdGlvbiwgcHJvcGVydGllcywgZXZhbHVhdGlvbkNhY2hlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhbnRPdmVycmlkZSA9IGNvbmRpdGlvbi52YXJpYW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdWYXJpYW50cyA9IGZsYWdGaWx0ZXJzLm11bHRpdmFyaWF0ZT8udmFyaWFudHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFyaWFudE92ZXJyaWRlICYmIGZsYWdWYXJpYW50cy5zb21lKCh2YXJpYW50KT0+dmFyaWFudC5rZXkgPT09IHZhcmlhbnRPdmVycmlkZSkgPyB2YXJpYW50T3ZlcnJpZGUgOiBhd2FpdCB0aGlzLmdldE1hdGNoaW5nVmFyaWFudChmbGFnLCBkaXN0aW5jdElkKSB8fCB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFJlcXVpcmVzU2VydmVyRXZhbHVhdGlvbikgdGhyb3cgZTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcikgaXNJbmNvbmNsdXNpdmUgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHJlc3VsdCkgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgaWYgKGlzSW5jb25jbHVzaXZlKSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihcIkNhbid0IGRldGVybWluZSBpZiBmZWF0dXJlIGZsYWcgaXMgZW5hYmxlZCBvciBub3Qgd2l0aCBnaXZlbiBwcm9wZXJ0aWVzXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIGlzQ29uZGl0aW9uTWF0Y2goZmxhZywgZGlzdGluY3RJZCwgY29uZGl0aW9uLCBwcm9wZXJ0aWVzLCBldmFsdWF0aW9uQ2FjaGUgPSB7fSkge1xuICAgICAgICBjb25zdCByb2xsb3V0UGVyY2VudGFnZSA9IGNvbmRpdGlvbi5yb2xsb3V0X3BlcmNlbnRhZ2U7XG4gICAgICAgIGNvbnN0IHdhcm5GdW5jdGlvbiA9IChtc2cpPT57XG4gICAgICAgICAgICB0aGlzLmxvZ01zZ0lmRGVidWcoKCk9PmNvbnNvbGUud2Fybihtc2cpKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKChjb25kaXRpb24ucHJvcGVydGllcyB8fCBbXSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIGNvbmRpdGlvbi5wcm9wZXJ0aWVzKXtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVR5cGUgPSBwcm9wLnR5cGU7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBtYXRjaGVzID0gJ2NvaG9ydCcgPT09IHByb3BlcnR5VHlwZSA/IG1hdGNoQ29ob3J0KHByb3AsIHByb3BlcnRpZXMsIHRoaXMuY29ob3J0cywgdGhpcy5kZWJ1Z01vZGUpIDogJ2ZsYWcnID09PSBwcm9wZXJ0eVR5cGUgPyBhd2FpdCB0aGlzLmV2YWx1YXRlRmxhZ0RlcGVuZGVuY3kocHJvcCwgZGlzdGluY3RJZCwgcHJvcGVydGllcywgZXZhbHVhdGlvbkNhY2hlKSA6IG1hdGNoUHJvcGVydHkocHJvcCwgcHJvcGVydGllcywgd2FybkZ1bmN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT0gcm9sbG91dFBlcmNlbnRhZ2UpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgIT0gcm9sbG91dFBlcmNlbnRhZ2UgJiYgYXdhaXQgX2hhc2goZmxhZy5rZXksIGRpc3RpbmN0SWQpID4gcm9sbG91dFBlcmNlbnRhZ2UgLyAxMDAuMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWF0Y2hpbmdWYXJpYW50KGZsYWcsIGRpc3RpbmN0SWQpIHtcbiAgICAgICAgY29uc3QgaGFzaFZhbHVlID0gYXdhaXQgX2hhc2goZmxhZy5rZXksIGRpc3RpbmN0SWQsICd2YXJpYW50Jyk7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmFyaWFudCA9IHRoaXMudmFyaWFudExvb2t1cFRhYmxlKGZsYWcpLmZpbmQoKHZhcmlhbnQpPT5oYXNoVmFsdWUgPj0gdmFyaWFudC52YWx1ZU1pbiAmJiBoYXNoVmFsdWUgPCB2YXJpYW50LnZhbHVlTWF4KTtcbiAgICAgICAgaWYgKG1hdGNoaW5nVmFyaWFudCkgcmV0dXJuIG1hdGNoaW5nVmFyaWFudC5rZXk7XG4gICAgfVxuICAgIHZhcmlhbnRMb29rdXBUYWJsZShmbGFnKSB7XG4gICAgICAgIGNvbnN0IGxvb2t1cFRhYmxlID0gW107XG4gICAgICAgIGxldCB2YWx1ZU1pbiA9IDA7XG4gICAgICAgIGxldCB2YWx1ZU1heCA9IDA7XG4gICAgICAgIGNvbnN0IGZsYWdGaWx0ZXJzID0gZmxhZy5maWx0ZXJzIHx8IHt9O1xuICAgICAgICBjb25zdCBtdWx0aXZhcmlhdGVzID0gZmxhZ0ZpbHRlcnMubXVsdGl2YXJpYXRlPy52YXJpYW50cyB8fCBbXTtcbiAgICAgICAgbXVsdGl2YXJpYXRlcy5mb3JFYWNoKCh2YXJpYW50KT0+e1xuICAgICAgICAgICAgdmFsdWVNYXggPSB2YWx1ZU1pbiArIHZhcmlhbnQucm9sbG91dF9wZXJjZW50YWdlIC8gMTAwLjA7XG4gICAgICAgICAgICBsb29rdXBUYWJsZS5wdXNoKHtcbiAgICAgICAgICAgICAgICB2YWx1ZU1pbixcbiAgICAgICAgICAgICAgICB2YWx1ZU1heCxcbiAgICAgICAgICAgICAgICBrZXk6IHZhcmlhbnQua2V5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhbHVlTWluID0gdmFsdWVNYXg7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbG9va3VwVGFibGU7XG4gICAgfVxuICAgIGFzeW5jIGxvYWRGZWF0dXJlRmxhZ3MoZm9yY2VSZWxvYWQgPSBmYWxzZSkge1xuICAgICAgICBpZiAoIXRoaXMubG9hZGVkU3VjY2Vzc2Z1bGx5T25jZSB8fCBmb3JjZVJlbG9hZCkgYXdhaXQgdGhpcy5fbG9hZEZlYXR1cmVGbGFncygpO1xuICAgIH1cbiAgICBpc0xvY2FsRXZhbHVhdGlvblJlYWR5KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMubG9hZGVkU3VjY2Vzc2Z1bGx5T25jZSA/PyBmYWxzZSkgJiYgKHRoaXMuZmVhdHVyZUZsYWdzPy5sZW5ndGggPz8gMCkgPiAwO1xuICAgIH1cbiAgICBnZXRQb2xsaW5nSW50ZXJ2YWwoKSB7XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRCZWdpbkV4cG9uZW50aWFsQmFja29mZikgcmV0dXJuIHRoaXMucG9sbGluZ0ludGVydmFsO1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oU0lYVFlfU0VDT05EUywgdGhpcy5wb2xsaW5nSW50ZXJ2YWwgKiAyICoqIHRoaXMuYmFja09mZkNvdW50KTtcbiAgICB9XG4gICAgYXN5bmMgX2xvYWRGZWF0dXJlRmxhZ3MoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvbGxlcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucG9sbGVyKTtcbiAgICAgICAgICAgIHRoaXMucG9sbGVyID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9sbGVyID0gc2V0VGltZW91dCgoKT0+dGhpcy5fbG9hZEZlYXR1cmVGbGFncygpLCB0aGlzLmdldFBvbGxpbmdJbnRlcnZhbCgpKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX3JlcXVlc3RGZWF0dXJlRmxhZ0RlZmluaXRpb25zKCk7XG4gICAgICAgICAgICBpZiAoIXJlcykgcmV0dXJuO1xuICAgICAgICAgICAgc3dpdGNoKHJlcy5zdGF0dXMpe1xuICAgICAgICAgICAgICAgIGNhc2UgNDAxOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEJlZ2luRXhwb25lbnRpYWxCYWNrb2ZmID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrT2ZmQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENsaWVudEVycm9yKGBZb3VyIHByb2plY3Qga2V5IG9yIHBlcnNvbmFsIEFQSSBrZXkgaXMgaW52YWxpZC4gU2V0dGluZyBuZXh0IHBvbGxpbmcgaW50ZXJ2YWwgdG8gJHt0aGlzLmdldFBvbGxpbmdJbnRlcnZhbCgpfW1zLiBNb3JlIGluZm9ybWF0aW9uOiBodHRwczovL3Bvc3Rob2cuY29tL2RvY3MvYXBpI3JhdGUtbGltaXRpbmdgKTtcbiAgICAgICAgICAgICAgICBjYXNlIDQwMjpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRkVBVFVSRSBGTEFHU10gRmVhdHVyZSBmbGFncyBxdW90YSBsaW1pdCBleGNlZWRlZCAtIHVuc2V0dGluZyBhbGwgbG9jYWwgZmxhZ3MuIExlYXJuIG1vcmUgYWJvdXQgYmlsbGluZyBsaW1pdHMgYXQgaHR0cHM6Ly9wb3N0aG9nLmNvbS9kb2NzL2JpbGxpbmcvbGltaXRzLWFsZXJ0cycpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVGbGFncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVGbGFnc0J5S2V5ID0ge307XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBUeXBlTWFwcGluZyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvaG9ydHMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhc2UgNDAzOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEJlZ2luRXhwb25lbnRpYWxCYWNrb2ZmID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrT2ZmQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENsaWVudEVycm9yKGBZb3VyIHBlcnNvbmFsIEFQSSBrZXkgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGZldGNoIGZlYXR1cmUgZmxhZyBkZWZpbml0aW9ucyBmb3IgbG9jYWwgZXZhbHVhdGlvbi4gU2V0dGluZyBuZXh0IHBvbGxpbmcgaW50ZXJ2YWwgdG8gJHt0aGlzLmdldFBvbGxpbmdJbnRlcnZhbCgpfW1zLiBBcmUgeW91IHN1cmUgeW91J3JlIHVzaW5nIHRoZSBjb3JyZWN0IHBlcnNvbmFsIGFuZCBQcm9qZWN0IEFQSSBrZXkgcGFpcj8gTW9yZSBpbmZvcm1hdGlvbjogaHR0cHM6Ly9wb3N0aG9nLmNvbS9kb2NzL2FwaS9vdmVydmlld2ApO1xuICAgICAgICAgICAgICAgIGNhc2UgNDI5OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEJlZ2luRXhwb25lbnRpYWxCYWNrb2ZmID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrT2ZmQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENsaWVudEVycm9yKGBZb3UgYXJlIGJlaW5nIHJhdGUgbGltaXRlZC4gU2V0dGluZyBuZXh0IHBvbGxpbmcgaW50ZXJ2YWwgdG8gJHt0aGlzLmdldFBvbGxpbmdJbnRlcnZhbCgpfW1zLiBNb3JlIGluZm9ybWF0aW9uOiBodHRwczovL3Bvc3Rob2cuY29tL2RvY3MvYXBpI3JhdGUtbGltaXRpbmdgKTtcbiAgICAgICAgICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VKc29uID0gYXdhaXQgcmVzLmpzb24oKSA/PyB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCdmbGFncycgaW4gcmVzcG9uc2VKc29uKSkgcmV0dXJuIHZvaWQgdGhpcy5vbkVycm9yPy4obmV3IEVycm9yKGBJbnZhbGlkIHJlc3BvbnNlIHdoZW4gZ2V0dGluZyBmZWF0dXJlIGZsYWdzOiAke0pTT04uc3RyaW5naWZ5KHJlc3BvbnNlSnNvbil9YCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3MgPSByZXNwb25zZUpzb24uZmxhZ3MgPz8gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVGbGFnc0J5S2V5ID0gdGhpcy5mZWF0dXJlRmxhZ3MucmVkdWNlKChhY2MsIGN1cnIpPT4oYWNjW2N1cnIua2V5XSA9IGN1cnIsIGFjYyksIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBUeXBlTWFwcGluZyA9IHJlc3BvbnNlSnNvbi5ncm91cF90eXBlX21hcHBpbmcgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvaG9ydHMgPSByZXNwb25zZUpzb24uY29ob3J0cyB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkU3VjY2Vzc2Z1bGx5T25jZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEJlZ2luRXhwb25lbnRpYWxCYWNrb2ZmID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tPZmZDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTG9hZD8uKHRoaXMuZmVhdHVyZUZsYWdzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQ2xpZW50RXJyb3IpIHRoaXMub25FcnJvcj8uKGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UGVyc29uYWxBcGlLZXlSZXF1ZXN0T3B0aW9ucyhtZXRob2QgPSAnR0VUJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY3VzdG9tSGVhZGVycyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLnBlcnNvbmFsQXBpS2V5fWBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgX3JlcXVlc3RGZWF0dXJlRmxhZ0RlZmluaXRpb25zKCkge1xuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmhvc3R9L2FwaS9mZWF0dXJlX2ZsYWcvbG9jYWxfZXZhbHVhdGlvbj90b2tlbj0ke3RoaXMucHJvamVjdEFwaUtleX0mc2VuZF9jb2hvcnRzYDtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2V0UGVyc29uYWxBcGlLZXlSZXF1ZXN0T3B0aW9ucygpO1xuICAgICAgICBsZXQgYWJvcnRUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMudGltZW91dCAmJiAnbnVtYmVyJyA9PSB0eXBlb2YgdGhpcy50aW1lb3V0KSB7XG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICAgICAgYWJvcnRUaW1lb3V0ID0gc2FmZVNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB9LCB0aGlzLnRpbWVvdXQpO1xuICAgICAgICAgICAgb3B0aW9ucy5zaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2godXJsLCBvcHRpb25zKTtcbiAgICAgICAgfSBmaW5hbGx5e1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFib3J0VGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcFBvbGxlcigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucG9sbGVyKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBfaGFzaChrZXksIGRpc3RpbmN0SWQsIHNhbHQgPSAnJykge1xuICAgIGNvbnN0IGhhc2hTdHJpbmcgPSBhd2FpdCBoYXNoU0hBMShgJHtrZXl9LiR7ZGlzdGluY3RJZH0ke3NhbHR9YCk7XG4gICAgcmV0dXJuIHBhcnNlSW50KGhhc2hTdHJpbmcuc2xpY2UoMCwgMTUpLCAxNikgLyBMT05HX1NDQUxFO1xufVxuZnVuY3Rpb24gbWF0Y2hQcm9wZXJ0eShwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZXMsIHdhcm5GdW5jdGlvbikge1xuICAgIGNvbnN0IGtleSA9IHByb3BlcnR5LmtleTtcbiAgICBjb25zdCB2YWx1ZSA9IHByb3BlcnR5LnZhbHVlO1xuICAgIGNvbnN0IG9wZXJhdG9yID0gcHJvcGVydHkub3BlcmF0b3IgfHwgJ2V4YWN0JztcbiAgICBpZiAoa2V5IGluIHByb3BlcnR5VmFsdWVzKSB7XG4gICAgICAgIGlmICgnaXNfbm90X3NldCcgPT09IG9wZXJhdG9yKSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihcIk9wZXJhdG9yIGlzX25vdF9zZXQgaXMgbm90IHN1cHBvcnRlZFwiKTtcbiAgICB9IGVsc2UgdGhyb3cgbmV3IEluY29uY2x1c2l2ZU1hdGNoRXJyb3IoYFByb3BlcnR5ICR7a2V5fSBub3QgZm91bmQgaW4gcHJvcGVydHlWYWx1ZXNgKTtcbiAgICBjb25zdCBvdmVycmlkZVZhbHVlID0gcHJvcGVydHlWYWx1ZXNba2V5XTtcbiAgICBpZiAobnVsbCA9PSBvdmVycmlkZVZhbHVlICYmICFOVUxMX1ZBTFVFU19BTExPV0VEX09QRVJBVE9SUy5pbmNsdWRlcyhvcGVyYXRvcikpIHtcbiAgICAgICAgaWYgKHdhcm5GdW5jdGlvbikgd2FybkZ1bmN0aW9uKGBQcm9wZXJ0eSAke2tleX0gY2Fubm90IGhhdmUgYSB2YWx1ZSBvZiBudWxsL3VuZGVmaW5lZCB3aXRoIHRoZSAke29wZXJhdG9yfSBvcGVyYXRvcmApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbXB1dGVFeGFjdE1hdGNoKHZhbHVlLCBvdmVycmlkZVZhbHVlKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLm1hcCgodmFsKT0+U3RyaW5nKHZhbCkudG9Mb3dlckNhc2UoKSkuaW5jbHVkZXMoU3RyaW5nKG92ZXJyaWRlVmFsdWUpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09PSBTdHJpbmcob3ZlcnJpZGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29tcGFyZShsaHMsIHJocywgb3BlcmF0b3IpIHtcbiAgICAgICAgaWYgKCdndCcgPT09IG9wZXJhdG9yKSByZXR1cm4gbGhzID4gcmhzO1xuICAgICAgICBpZiAoJ2d0ZScgPT09IG9wZXJhdG9yKSByZXR1cm4gbGhzID49IHJocztcbiAgICAgICAgaWYgKCdsdCcgPT09IG9wZXJhdG9yKSByZXR1cm4gbGhzIDwgcmhzO1xuICAgICAgICBpZiAoJ2x0ZScgPT09IG9wZXJhdG9yKSByZXR1cm4gbGhzIDw9IHJocztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG9wZXJhdG9yOiAke29wZXJhdG9yfWApO1xuICAgIH1cbiAgICBzd2l0Y2gob3BlcmF0b3Ipe1xuICAgICAgICBjYXNlICdleGFjdCc6XG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZUV4YWN0TWF0Y2godmFsdWUsIG92ZXJyaWRlVmFsdWUpO1xuICAgICAgICBjYXNlICdpc19ub3QnOlxuICAgICAgICAgICAgcmV0dXJuICFjb21wdXRlRXhhY3RNYXRjaCh2YWx1ZSwgb3ZlcnJpZGVWYWx1ZSk7XG4gICAgICAgIGNhc2UgJ2lzX3NldCc6XG4gICAgICAgICAgICByZXR1cm4ga2V5IGluIHByb3BlcnR5VmFsdWVzO1xuICAgICAgICBjYXNlICdpY29udGFpbnMnOlxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhvdmVycmlkZVZhbHVlKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFN0cmluZyh2YWx1ZSkudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGNhc2UgJ25vdF9pY29udGFpbnMnOlxuICAgICAgICAgICAgcmV0dXJuICFTdHJpbmcob3ZlcnJpZGVWYWx1ZSkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhTdHJpbmcodmFsdWUpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBjYXNlICdyZWdleCc6XG4gICAgICAgICAgICByZXR1cm4gaXNWYWxpZFJlZ2V4KFN0cmluZyh2YWx1ZSkpICYmIG51bGwgIT09IFN0cmluZyhvdmVycmlkZVZhbHVlKS5tYXRjaChTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgY2FzZSAnbm90X3JlZ2V4JzpcbiAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkUmVnZXgoU3RyaW5nKHZhbHVlKSkgJiYgbnVsbCA9PT0gU3RyaW5nKG92ZXJyaWRlVmFsdWUpLm1hdGNoKFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICBjYXNlICdndCc6XG4gICAgICAgIGNhc2UgJ2d0ZSc6XG4gICAgICAgIGNhc2UgJ2x0JzpcbiAgICAgICAgY2FzZSAnbHRlJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyc2VkVmFsdWUgPSAnbnVtYmVyJyA9PSB0eXBlb2YgdmFsdWUgPyB2YWx1ZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB2YWx1ZSkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkVmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gcGFyc2VkVmFsdWUgfHwgbnVsbCA9PSBvdmVycmlkZVZhbHVlKSByZXR1cm4gY29tcGFyZShTdHJpbmcob3ZlcnJpZGVWYWx1ZSksIFN0cmluZyh2YWx1ZSksIG9wZXJhdG9yKTtcbiAgICAgICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIG92ZXJyaWRlVmFsdWUpIHJldHVybiBjb21wYXJlKG92ZXJyaWRlVmFsdWUsIFN0cmluZyh2YWx1ZSksIG9wZXJhdG9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZShvdmVycmlkZVZhbHVlLCBwYXJzZWRWYWx1ZSwgb3BlcmF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICBjYXNlICdpc19kYXRlX2FmdGVyJzpcbiAgICAgICAgY2FzZSAnaXNfZGF0ZV9iZWZvcmUnOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmICgnYm9vbGVhbicgPT0gdHlwZW9mIHZhbHVlKSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihcIkRhdGUgb3BlcmF0aW9ucyBjYW5ub3QgYmUgcGVyZm9ybWVkIG9uIGJvb2xlYW4gdmFsdWVzXCIpO1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZWREYXRlID0gcmVsYXRpdmVEYXRlUGFyc2VGb3JGZWF0dXJlRmxhZ01hdGNoaW5nKFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHBhcnNlZERhdGUpIHBhcnNlZERhdGUgPSBjb252ZXJ0VG9EYXRlVGltZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gcGFyc2VkRGF0ZSkgdGhyb3cgbmV3IEluY29uY2x1c2l2ZU1hdGNoRXJyb3IoYEludmFsaWQgZGF0ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvdmVycmlkZURhdGUgPSBjb252ZXJ0VG9EYXRlVGltZShvdmVycmlkZVZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoW1xuICAgICAgICAgICAgICAgICAgICAnaXNfZGF0ZV9iZWZvcmUnXG4gICAgICAgICAgICAgICAgXS5pbmNsdWRlcyhvcGVyYXRvcikpIHJldHVybiBvdmVycmlkZURhdGUgPCBwYXJzZWREYXRlO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdmVycmlkZURhdGUgPiBwYXJzZWREYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEluY29uY2x1c2l2ZU1hdGNoRXJyb3IoYFVua25vd24gb3BlcmF0b3I6ICR7b3BlcmF0b3J9YCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tDb2hvcnRFeGlzdHMoY29ob3J0SWQsIGNvaG9ydFByb3BlcnRpZXMpIHtcbiAgICBpZiAoIShjb2hvcnRJZCBpbiBjb2hvcnRQcm9wZXJ0aWVzKSkgdGhyb3cgbmV3IFJlcXVpcmVzU2VydmVyRXZhbHVhdGlvbihgY29ob3J0ICR7Y29ob3J0SWR9IG5vdCBmb3VuZCBpbiBsb2NhbCBjb2hvcnRzIC0gbGlrZWx5IGEgc3RhdGljIGNvaG9ydCB0aGF0IHJlcXVpcmVzIHNlcnZlciBldmFsdWF0aW9uYCk7XG59XG5mdW5jdGlvbiBtYXRjaENvaG9ydChwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZXMsIGNvaG9ydFByb3BlcnRpZXMsIGRlYnVnTW9kZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgY29ob3J0SWQgPSBTdHJpbmcocHJvcGVydHkudmFsdWUpO1xuICAgIGNoZWNrQ29ob3J0RXhpc3RzKGNvaG9ydElkLCBjb2hvcnRQcm9wZXJ0aWVzKTtcbiAgICBjb25zdCBwcm9wZXJ0eUdyb3VwID0gY29ob3J0UHJvcGVydGllc1tjb2hvcnRJZF07XG4gICAgcmV0dXJuIG1hdGNoUHJvcGVydHlHcm91cChwcm9wZXJ0eUdyb3VwLCBwcm9wZXJ0eVZhbHVlcywgY29ob3J0UHJvcGVydGllcywgZGVidWdNb2RlKTtcbn1cbmZ1bmN0aW9uIG1hdGNoUHJvcGVydHlHcm91cChwcm9wZXJ0eUdyb3VwLCBwcm9wZXJ0eVZhbHVlcywgY29ob3J0UHJvcGVydGllcywgZGVidWdNb2RlID0gZmFsc2UpIHtcbiAgICBpZiAoIXByb3BlcnR5R3JvdXApIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IHByb3BlcnR5R3JvdXBUeXBlID0gcHJvcGVydHlHcm91cC50eXBlO1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBwcm9wZXJ0eUdyb3VwLnZhbHVlcztcbiAgICBpZiAoIXByb3BlcnRpZXMgfHwgMCA9PT0gcHJvcGVydGllcy5sZW5ndGgpIHJldHVybiB0cnVlO1xuICAgIGxldCBlcnJvck1hdGNoaW5nTG9jYWxseSA9IGZhbHNlO1xuICAgIGlmICgndmFsdWVzJyBpbiBwcm9wZXJ0aWVzWzBdKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvcCBvZiBwcm9wZXJ0aWVzKXRyeSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gbWF0Y2hQcm9wZXJ0eUdyb3VwKHByb3AsIHByb3BlcnR5VmFsdWVzLCBjb2hvcnRQcm9wZXJ0aWVzLCBkZWJ1Z01vZGUpO1xuICAgICAgICAgICAgaWYgKCdBTkQnID09PSBwcm9wZXJ0eUdyb3VwVHlwZSkge1xuICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlcykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaGVzKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgUmVxdWlyZXNTZXJ2ZXJFdmFsdWF0aW9uKSB0aHJvdyBlcnI7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChkZWJ1Z01vZGUpIGNvbnNvbGUuZGVidWcoYEZhaWxlZCB0byBjb21wdXRlIHByb3BlcnR5ICR7cHJvcH0gbG9jYWxseTogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgZXJyb3JNYXRjaGluZ0xvY2FsbHkgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3JNYXRjaGluZ0xvY2FsbHkpIHRocm93IG5ldyBJbmNvbmNsdXNpdmVNYXRjaEVycm9yKFwiQ2FuJ3QgbWF0Y2ggY29ob3J0IHdpdGhvdXQgYSBnaXZlbiBjb2hvcnQgcHJvcGVydHkgdmFsdWVcIik7XG4gICAgICAgIHJldHVybiAnQU5EJyA9PT0gcHJvcGVydHlHcm91cFR5cGU7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBwcm9wZXJ0aWVzKXRyeSB7XG4gICAgICAgIGxldCBtYXRjaGVzO1xuICAgICAgICBpZiAoJ2NvaG9ydCcgPT09IHByb3AudHlwZSkgbWF0Y2hlcyA9IG1hdGNoQ29ob3J0KHByb3AsIHByb3BlcnR5VmFsdWVzLCBjb2hvcnRQcm9wZXJ0aWVzLCBkZWJ1Z01vZGUpO1xuICAgICAgICBlbHNlIGlmICgnZmxhZycgPT09IHByb3AudHlwZSkge1xuICAgICAgICAgICAgaWYgKGRlYnVnTW9kZSkgY29uc29sZS53YXJuKGBbRkVBVFVSRSBGTEFHU10gRmxhZyBkZXBlbmRlbmN5IGZpbHRlcnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gbG9jYWwgZXZhbHVhdGlvbi4gU2tpcHBpbmcgY29uZGl0aW9uIHdpdGggZGVwZW5kZW5jeSBvbiBmbGFnICcke3Byb3Aua2V5IHx8ICd1bmtub3duJ30nYCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIG1hdGNoZXMgPSBtYXRjaFByb3BlcnR5KHByb3AsIHByb3BlcnR5VmFsdWVzKTtcbiAgICAgICAgY29uc3QgbmVnYXRpb24gPSBwcm9wLm5lZ2F0aW9uIHx8IGZhbHNlO1xuICAgICAgICBpZiAoJ0FORCcgPT09IHByb3BlcnR5R3JvdXBUeXBlKSB7XG4gICAgICAgICAgICBpZiAoIW1hdGNoZXMgJiYgIW5lZ2F0aW9uKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcyAmJiBuZWdhdGlvbikgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgIW5lZ2F0aW9uKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghbWF0Y2hlcyAmJiBuZWdhdGlvbikgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFJlcXVpcmVzU2VydmVyRXZhbHVhdGlvbikgdGhyb3cgZXJyO1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcikge1xuICAgICAgICAgICAgaWYgKGRlYnVnTW9kZSkgY29uc29sZS5kZWJ1ZyhgRmFpbGVkIHRvIGNvbXB1dGUgcHJvcGVydHkgJHtwcm9wfSBsb2NhbGx5OiAke2Vycn1gKTtcbiAgICAgICAgICAgIGVycm9yTWF0Y2hpbmdMb2NhbGx5ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRocm93IGVycjtcbiAgICB9XG4gICAgaWYgKGVycm9yTWF0Y2hpbmdMb2NhbGx5KSB0aHJvdyBuZXcgSW5jb25jbHVzaXZlTWF0Y2hFcnJvcihcImNhbid0IG1hdGNoIGNvaG9ydCB3aXRob3V0IGEgZ2l2ZW4gY29ob3J0IHByb3BlcnR5IHZhbHVlXCIpO1xuICAgIHJldHVybiAnQU5EJyA9PT0gcHJvcGVydHlHcm91cFR5cGU7XG59XG5mdW5jdGlvbiBpc1ZhbGlkUmVnZXgocmVnZXgpIHtcbiAgICB0cnkge1xuICAgICAgICBuZXcgUmVnRXhwKHJlZ2V4KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb252ZXJ0VG9EYXRlVGltZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHJldHVybiB2YWx1ZTtcbiAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZhbHVlIHx8ICdudW1iZXInID09IHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuICAgICAgICBpZiAoIWlzTmFOKGRhdGUudmFsdWVPZigpKSkgcmV0dXJuIGRhdGU7XG4gICAgICAgIHRocm93IG5ldyBJbmNvbmNsdXNpdmVNYXRjaEVycm9yKGAke3ZhbHVlfSBpcyBpbiBhbiBpbnZhbGlkIGRhdGUgZm9ybWF0YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBJbmNvbmNsdXNpdmVNYXRjaEVycm9yKGBUaGUgZGF0ZSBwcm92aWRlZCAke3ZhbHVlfSBtdXN0IGJlIGEgc3RyaW5nLCBudW1iZXIsIG9yIGRhdGUgb2JqZWN0YCk7XG59XG5mdW5jdGlvbiByZWxhdGl2ZURhdGVQYXJzZUZvckZlYXR1cmVGbGFnTWF0Y2hpbmcodmFsdWUpIHtcbiAgICBjb25zdCByZWdleCA9IC9eLT8oPzxudW1iZXI+WzAtOV0rKSg/PGludGVydmFsPlthLXpdKSQvO1xuICAgIGNvbnN0IG1hdGNoID0gdmFsdWUubWF0Y2gocmVnZXgpO1xuICAgIGNvbnN0IHBhcnNlZER0ID0gbmV3IERhdGUobmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDtcbiAgICB7XG4gICAgICAgIGlmICghbWF0Y2guZ3JvdXBzKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgbnVtYmVyID0gcGFyc2VJbnQobWF0Y2guZ3JvdXBzWydudW1iZXInXSk7XG4gICAgICAgIGlmIChudW1iZXIgPj0gMTAwMDApIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IG1hdGNoLmdyb3Vwc1snaW50ZXJ2YWwnXTtcbiAgICAgICAgaWYgKCdoJyA9PSBpbnRlcnZhbCkgcGFyc2VkRHQuc2V0VVRDSG91cnMocGFyc2VkRHQuZ2V0VVRDSG91cnMoKSAtIG51bWJlcik7XG4gICAgICAgIGVsc2UgaWYgKCdkJyA9PSBpbnRlcnZhbCkgcGFyc2VkRHQuc2V0VVRDRGF0ZShwYXJzZWREdC5nZXRVVENEYXRlKCkgLSBudW1iZXIpO1xuICAgICAgICBlbHNlIGlmICgndycgPT0gaW50ZXJ2YWwpIHBhcnNlZER0LnNldFVUQ0RhdGUocGFyc2VkRHQuZ2V0VVRDRGF0ZSgpIC0gNyAqIG51bWJlcik7XG4gICAgICAgIGVsc2UgaWYgKCdtJyA9PSBpbnRlcnZhbCkgcGFyc2VkRHQuc2V0VVRDTW9udGgocGFyc2VkRHQuZ2V0VVRDTW9udGgoKSAtIG51bWJlcik7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCd5JyAhPSBpbnRlcnZhbCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBwYXJzZWREdC5zZXRVVENGdWxsWWVhcihwYXJzZWREdC5nZXRVVENGdWxsWWVhcigpIC0gbnVtYmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkRHQ7XG4gICAgfVxufVxuZXhwb3J0IHsgQ2xpZW50RXJyb3IsIEZlYXR1cmVGbGFnc1BvbGxlciwgSW5jb25jbHVzaXZlTWF0Y2hFcnJvciwgUmVxdWlyZXNTZXJ2ZXJFdmFsdWF0aW9uLCBtYXRjaFByb3BlcnR5LCByZWxhdGl2ZURhdGVQYXJzZUZvckZlYXR1cmVGbGFnTWF0Y2hpbmcgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/feature-flags/feature-flags.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/extensions/sentry-integration.mjs":
/*!******************************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/extensions/sentry-integration.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHogSentryIntegration: () => (/* binding */ PostHogSentryIntegration),\n/* harmony export */   createEventProcessor: () => (/* binding */ createEventProcessor),\n/* harmony export */   sentryIntegration: () => (/* binding */ sentryIntegration)\n/* harmony export */ });\nconst NAME = 'posthog-node';\nfunction createEventProcessor(_posthog, { organization, projectId, prefix, severityAllowList = [\n    'error'\n], sendExceptionsToPostHog = true } = {}) {\n    return (event)=>{\n        const shouldProcessLevel = '*' === severityAllowList || severityAllowList.includes(event.level);\n        if (!shouldProcessLevel) return event;\n        if (!event.tags) event.tags = {};\n        const userId = event.tags[PostHogSentryIntegration.POSTHOG_ID_TAG];\n        if (void 0 === userId) return event;\n        const uiHost = _posthog.options.host ?? 'https://us.i.posthog.com';\n        const personUrl = new URL(`/project/${_posthog.apiKey}/person/${userId}`, uiHost).toString();\n        event.tags['PostHog Person URL'] = personUrl;\n        const exceptions = event.exception?.values || [];\n        const exceptionList = exceptions.map((exception)=>({\n                ...exception,\n                stacktrace: exception.stacktrace ? {\n                    ...exception.stacktrace,\n                    type: 'raw',\n                    frames: (exception.stacktrace.frames || []).map((frame)=>({\n                            ...frame,\n                            platform: \"node:javascript\"\n                        }))\n                } : void 0\n            }));\n        const properties = {\n            $exception_message: exceptions[0]?.value || event.message,\n            $exception_type: exceptions[0]?.type,\n            $exception_level: event.level,\n            $exception_list: exceptionList,\n            $sentry_event_id: event.event_id,\n            $sentry_exception: event.exception,\n            $sentry_exception_message: exceptions[0]?.value || event.message,\n            $sentry_exception_type: exceptions[0]?.type,\n            $sentry_tags: event.tags\n        };\n        if (organization && projectId) properties['$sentry_url'] = (prefix || 'https://sentry.io/organizations/') + organization + '/issues/?project=' + projectId + '&query=' + event.event_id;\n        if (sendExceptionsToPostHog) _posthog.capture({\n            event: '$exception',\n            distinctId: userId,\n            properties\n        });\n        return event;\n    };\n}\nfunction sentryIntegration(_posthog, options) {\n    const processor = createEventProcessor(_posthog, options);\n    return {\n        name: NAME,\n        processEvent (event) {\n            return processor(event);\n        }\n    };\n}\nclass PostHogSentryIntegration {\n    static #_ = this.POSTHOG_ID_TAG = 'posthog_distinct_id';\n    constructor(_posthog, organization, prefix, severityAllowList, sendExceptionsToPostHog){\n        this.name = NAME;\n        this.name = NAME;\n        this.setupOnce = function(addGlobalEventProcessor, getCurrentHub) {\n            const projectId = getCurrentHub()?.getClient()?.getDsn()?.projectId;\n            addGlobalEventProcessor(createEventProcessor(_posthog, {\n                organization,\n                projectId,\n                prefix,\n                severityAllowList,\n                sendExceptionsToPostHog: sendExceptionsToPostHog ?? true\n            }));\n        };\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9zZW50cnktaW50ZWdyYXRpb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0Esb0NBQW9DLElBQUk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsZ0JBQWdCLFVBQVUsT0FBTztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixrQkFBa0I7QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUM2RSIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvZXh0ZW5zaW9ucy9zZW50cnktaW50ZWdyYXRpb24ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE5BTUUgPSAncG9zdGhvZy1ub2RlJztcbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50UHJvY2Vzc29yKF9wb3N0aG9nLCB7IG9yZ2FuaXphdGlvbiwgcHJvamVjdElkLCBwcmVmaXgsIHNldmVyaXR5QWxsb3dMaXN0ID0gW1xuICAgICdlcnJvcidcbl0sIHNlbmRFeGNlcHRpb25zVG9Qb3N0SG9nID0gdHJ1ZSB9ID0ge30pIHtcbiAgICByZXR1cm4gKGV2ZW50KT0+e1xuICAgICAgICBjb25zdCBzaG91bGRQcm9jZXNzTGV2ZWwgPSAnKicgPT09IHNldmVyaXR5QWxsb3dMaXN0IHx8IHNldmVyaXR5QWxsb3dMaXN0LmluY2x1ZGVzKGV2ZW50LmxldmVsKTtcbiAgICAgICAgaWYgKCFzaG91bGRQcm9jZXNzTGV2ZWwpIHJldHVybiBldmVudDtcbiAgICAgICAgaWYgKCFldmVudC50YWdzKSBldmVudC50YWdzID0ge307XG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGV2ZW50LnRhZ3NbUG9zdEhvZ1NlbnRyeUludGVncmF0aW9uLlBPU1RIT0dfSURfVEFHXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdXNlcklkKSByZXR1cm4gZXZlbnQ7XG4gICAgICAgIGNvbnN0IHVpSG9zdCA9IF9wb3N0aG9nLm9wdGlvbnMuaG9zdCA/PyAnaHR0cHM6Ly91cy5pLnBvc3Rob2cuY29tJztcbiAgICAgICAgY29uc3QgcGVyc29uVXJsID0gbmV3IFVSTChgL3Byb2plY3QvJHtfcG9zdGhvZy5hcGlLZXl9L3BlcnNvbi8ke3VzZXJJZH1gLCB1aUhvc3QpLnRvU3RyaW5nKCk7XG4gICAgICAgIGV2ZW50LnRhZ3NbJ1Bvc3RIb2cgUGVyc29uIFVSTCddID0gcGVyc29uVXJsO1xuICAgICAgICBjb25zdCBleGNlcHRpb25zID0gZXZlbnQuZXhjZXB0aW9uPy52YWx1ZXMgfHwgW107XG4gICAgICAgIGNvbnN0IGV4Y2VwdGlvbkxpc3QgPSBleGNlcHRpb25zLm1hcCgoZXhjZXB0aW9uKT0+KHtcbiAgICAgICAgICAgICAgICAuLi5leGNlcHRpb24sXG4gICAgICAgICAgICAgICAgc3RhY2t0cmFjZTogZXhjZXB0aW9uLnN0YWNrdHJhY2UgPyB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmV4Y2VwdGlvbi5zdGFja3RyYWNlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmF3JyxcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVzOiAoZXhjZXB0aW9uLnN0YWNrdHJhY2UuZnJhbWVzIHx8IFtdKS5tYXAoKGZyYW1lKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5mcmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogXCJub2RlOmphdmFzY3JpcHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgfSA6IHZvaWQgMFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbl9tZXNzYWdlOiBleGNlcHRpb25zWzBdPy52YWx1ZSB8fCBldmVudC5tZXNzYWdlLFxuICAgICAgICAgICAgJGV4Y2VwdGlvbl90eXBlOiBleGNlcHRpb25zWzBdPy50eXBlLFxuICAgICAgICAgICAgJGV4Y2VwdGlvbl9sZXZlbDogZXZlbnQubGV2ZWwsXG4gICAgICAgICAgICAkZXhjZXB0aW9uX2xpc3Q6IGV4Y2VwdGlvbkxpc3QsXG4gICAgICAgICAgICAkc2VudHJ5X2V2ZW50X2lkOiBldmVudC5ldmVudF9pZCxcbiAgICAgICAgICAgICRzZW50cnlfZXhjZXB0aW9uOiBldmVudC5leGNlcHRpb24sXG4gICAgICAgICAgICAkc2VudHJ5X2V4Y2VwdGlvbl9tZXNzYWdlOiBleGNlcHRpb25zWzBdPy52YWx1ZSB8fCBldmVudC5tZXNzYWdlLFxuICAgICAgICAgICAgJHNlbnRyeV9leGNlcHRpb25fdHlwZTogZXhjZXB0aW9uc1swXT8udHlwZSxcbiAgICAgICAgICAgICRzZW50cnlfdGFnczogZXZlbnQudGFnc1xuICAgICAgICB9O1xuICAgICAgICBpZiAob3JnYW5pemF0aW9uICYmIHByb2plY3RJZCkgcHJvcGVydGllc1snJHNlbnRyeV91cmwnXSA9IChwcmVmaXggfHwgJ2h0dHBzOi8vc2VudHJ5LmlvL29yZ2FuaXphdGlvbnMvJykgKyBvcmdhbml6YXRpb24gKyAnL2lzc3Vlcy8/cHJvamVjdD0nICsgcHJvamVjdElkICsgJyZxdWVyeT0nICsgZXZlbnQuZXZlbnRfaWQ7XG4gICAgICAgIGlmIChzZW5kRXhjZXB0aW9uc1RvUG9zdEhvZykgX3Bvc3Rob2cuY2FwdHVyZSh7XG4gICAgICAgICAgICBldmVudDogJyRleGNlcHRpb24nLFxuICAgICAgICAgICAgZGlzdGluY3RJZDogdXNlcklkLFxuICAgICAgICAgICAgcHJvcGVydGllc1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH07XG59XG5mdW5jdGlvbiBzZW50cnlJbnRlZ3JhdGlvbihfcG9zdGhvZywgb3B0aW9ucykge1xuICAgIGNvbnN0IHByb2Nlc3NvciA9IGNyZWF0ZUV2ZW50UHJvY2Vzc29yKF9wb3N0aG9nLCBvcHRpb25zKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBOQU1FLFxuICAgICAgICBwcm9jZXNzRXZlbnQgKGV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc29yKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5jbGFzcyBQb3N0SG9nU2VudHJ5SW50ZWdyYXRpb24ge1xuICAgIHN0YXRpYyAjXyA9IHRoaXMuUE9TVEhPR19JRF9UQUcgPSAncG9zdGhvZ19kaXN0aW5jdF9pZCc7XG4gICAgY29uc3RydWN0b3IoX3Bvc3Rob2csIG9yZ2FuaXphdGlvbiwgcHJlZml4LCBzZXZlcml0eUFsbG93TGlzdCwgc2VuZEV4Y2VwdGlvbnNUb1Bvc3RIb2cpe1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLm5hbWUgPSBOQU1FO1xuICAgICAgICB0aGlzLnNldHVwT25jZSA9IGZ1bmN0aW9uKGFkZEdsb2JhbEV2ZW50UHJvY2Vzc29yLCBnZXRDdXJyZW50SHViKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBnZXRDdXJyZW50SHViKCk/LmdldENsaWVudCgpPy5nZXREc24oKT8ucHJvamVjdElkO1xuICAgICAgICAgICAgYWRkR2xvYmFsRXZlbnRQcm9jZXNzb3IoY3JlYXRlRXZlbnRQcm9jZXNzb3IoX3Bvc3Rob2csIHtcbiAgICAgICAgICAgICAgICBvcmdhbml6YXRpb24sXG4gICAgICAgICAgICAgICAgcHJvamVjdElkLFxuICAgICAgICAgICAgICAgIHByZWZpeCxcbiAgICAgICAgICAgICAgICBzZXZlcml0eUFsbG93TGlzdCxcbiAgICAgICAgICAgICAgICBzZW5kRXhjZXB0aW9uc1RvUG9zdEhvZzogc2VuZEV4Y2VwdGlvbnNUb1Bvc3RIb2cgPz8gdHJ1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCB7IFBvc3RIb2dTZW50cnlJbnRlZ3JhdGlvbiwgY3JlYXRlRXZlbnRQcm9jZXNzb3IsIHNlbnRyeUludGVncmF0aW9uIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/extensions/sentry-integration.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/storage-memory.mjs":
/*!***************************************************************!*\
  !*** ../../node_modules/posthog-node/dist/storage-memory.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHogMemoryStorage: () => (/* binding */ PostHogMemoryStorage)\n/* harmony export */ });\nclass PostHogMemoryStorage {\n    getProperty(key) {\n        return this._memoryStorage[key];\n    }\n    setProperty(key, value) {\n        this._memoryStorage[key] = null !== value ? value : void 0;\n    }\n    constructor(){\n        this._memoryStorage = {};\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3Qvc3RvcmFnZS1tZW1vcnkubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2dDIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvZGlzdC9zdG9yYWdlLW1lbW9yeS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgUG9zdEhvZ01lbW9yeVN0b3JhZ2Uge1xuICAgIGdldFByb3BlcnR5KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWVtb3J5U3RvcmFnZVtrZXldO1xuICAgIH1cbiAgICBzZXRQcm9wZXJ0eShrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX21lbW9yeVN0b3JhZ2Vba2V5XSA9IG51bGwgIT09IHZhbHVlID8gdmFsdWUgOiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMuX21lbW9yeVN0b3JhZ2UgPSB7fTtcbiAgICB9XG59XG5leHBvcnQgeyBQb3N0SG9nTWVtb3J5U3RvcmFnZSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/storage-memory.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/types.mjs":
/*!******************************************************!*\
  !*** ../../node_modules/posthog-node/dist/types.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/dist/version.mjs":
/*!********************************************************!*\
  !*** ../../node_modules/posthog-node/dist/version.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\nconst version = '5.10.3';\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL2Rpc3QvdmVyc2lvbi5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ21CIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvZGlzdC92ZXJzaW9uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB2ZXJzaW9uID0gJzUuMTAuMyc7XG5leHBvcnQgeyB2ZXJzaW9uIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/dist/version.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/chunk-ids.mjs":
/*!****************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/chunk-ids.mjs ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFilenameToChunkIdMap: () => (/* binding */ getFilenameToChunkIdMap)\n/* harmony export */ });\nlet parsedStackResults;\nlet lastKeysCount;\nlet cachedFilenameChunkIds;\nfunction getFilenameToChunkIdMap(stackParser) {\n    const chunkIdMap = globalThis._posthogChunkIds;\n    if (!chunkIdMap) return;\n    const chunkIdKeys = Object.keys(chunkIdMap);\n    if (cachedFilenameChunkIds && chunkIdKeys.length === lastKeysCount) return cachedFilenameChunkIds;\n    lastKeysCount = chunkIdKeys.length;\n    cachedFilenameChunkIds = chunkIdKeys.reduce((acc, stackKey)=>{\n        if (!parsedStackResults) parsedStackResults = {};\n        const result = parsedStackResults[stackKey];\n        if (result) acc[result[0]] = result[1];\n        else {\n            const parsedStack = stackParser(stackKey);\n            for(let i = parsedStack.length - 1; i >= 0; i--){\n                const stackFrame = parsedStack[i];\n                const filename = stackFrame?.filename;\n                const chunkId = chunkIdMap[stackKey];\n                if (filename && chunkId) {\n                    acc[filename] = chunkId;\n                    parsedStackResults[stackKey] = [\n                        filename,\n                        chunkId\n                    ];\n                    break;\n                }\n            }\n        }\n        return acc;\n    }, {});\n    return cachedFilenameChunkIds;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY2h1bmstaWRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELFFBQVE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDbUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2NodW5rLWlkcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHBhcnNlZFN0YWNrUmVzdWx0cztcbmxldCBsYXN0S2V5c0NvdW50O1xubGV0IGNhY2hlZEZpbGVuYW1lQ2h1bmtJZHM7XG5mdW5jdGlvbiBnZXRGaWxlbmFtZVRvQ2h1bmtJZE1hcChzdGFja1BhcnNlcikge1xuICAgIGNvbnN0IGNodW5rSWRNYXAgPSBnbG9iYWxUaGlzLl9wb3N0aG9nQ2h1bmtJZHM7XG4gICAgaWYgKCFjaHVua0lkTWFwKSByZXR1cm47XG4gICAgY29uc3QgY2h1bmtJZEtleXMgPSBPYmplY3Qua2V5cyhjaHVua0lkTWFwKTtcbiAgICBpZiAoY2FjaGVkRmlsZW5hbWVDaHVua0lkcyAmJiBjaHVua0lkS2V5cy5sZW5ndGggPT09IGxhc3RLZXlzQ291bnQpIHJldHVybiBjYWNoZWRGaWxlbmFtZUNodW5rSWRzO1xuICAgIGxhc3RLZXlzQ291bnQgPSBjaHVua0lkS2V5cy5sZW5ndGg7XG4gICAgY2FjaGVkRmlsZW5hbWVDaHVua0lkcyA9IGNodW5rSWRLZXlzLnJlZHVjZSgoYWNjLCBzdGFja0tleSk9PntcbiAgICAgICAgaWYgKCFwYXJzZWRTdGFja1Jlc3VsdHMpIHBhcnNlZFN0YWNrUmVzdWx0cyA9IHt9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZWRTdGFja1Jlc3VsdHNbc3RhY2tLZXldO1xuICAgICAgICBpZiAocmVzdWx0KSBhY2NbcmVzdWx0WzBdXSA9IHJlc3VsdFsxXTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTdGFjayA9IHN0YWNrUGFyc2VyKHN0YWNrS2V5KTtcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IHBhcnNlZFN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFja0ZyYW1lID0gcGFyc2VkU3RhY2tbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBzdGFja0ZyYW1lPy5maWxlbmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaHVua0lkID0gY2h1bmtJZE1hcFtzdGFja0tleV07XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVuYW1lICYmIGNodW5rSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjW2ZpbGVuYW1lXSA9IGNodW5rSWQ7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZFN0YWNrUmVzdWx0c1tzdGFja0tleV0gPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rSWRcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIHJldHVybiBjYWNoZWRGaWxlbmFtZUNodW5rSWRzO1xufVxuZXhwb3J0IHsgZ2V0RmlsZW5hbWVUb0NodW5rSWRNYXAgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/chunk-ids.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/dom-exception-coercer.mjs":
/*!*************************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/dom-exception-coercer.mjs ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DOMExceptionCoercer: () => (/* binding */ DOMExceptionCoercer)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n\nclass DOMExceptionCoercer {\n    match(err) {\n        return this.isDOMException(err) || this.isDOMError(err);\n    }\n    coerce(err, ctx) {\n        const hasStack = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isString)(err.stack);\n        return {\n            type: this.getType(err),\n            value: this.getValue(err),\n            stack: hasStack ? err.stack : void 0,\n            cause: err.cause ? ctx.next(err.cause) : void 0,\n            synthetic: false\n        };\n    }\n    getType(candidate) {\n        return this.isDOMError(candidate) ? 'DOMError' : 'DOMException';\n    }\n    getValue(err) {\n        const name = err.name || (this.isDOMError(err) ? 'DOMError' : 'DOMException');\n        const message = err.message ? `${name}: ${err.message}` : name;\n        return message;\n    }\n    isDOMException(err) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isBuiltin)(err, 'DOMException');\n    }\n    isDOMError(err) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isBuiltin)(err, 'DOMError');\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvZG9tLWV4Y2VwdGlvbi1jb2VyY2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLEtBQUssSUFBSSxZQUFZO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkRBQVM7QUFDeEI7QUFDQTtBQUNBLGVBQWUsMkRBQVM7QUFDeEI7QUFDQTtBQUMrQiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvZG9tLWV4Y2VwdGlvbi1jb2VyY2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0J1aWx0aW4sIGlzU3RyaW5nIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuY2xhc3MgRE9NRXhjZXB0aW9uQ29lcmNlciB7XG4gICAgbWF0Y2goZXJyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRE9NRXhjZXB0aW9uKGVycikgfHwgdGhpcy5pc0RPTUVycm9yKGVycik7XG4gICAgfVxuICAgIGNvZXJjZShlcnIsIGN0eCkge1xuICAgICAgICBjb25zdCBoYXNTdGFjayA9IGlzU3RyaW5nKGVyci5zdGFjayk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLmdldFR5cGUoZXJyKSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmdldFZhbHVlKGVyciksXG4gICAgICAgICAgICBzdGFjazogaGFzU3RhY2sgPyBlcnIuc3RhY2sgOiB2b2lkIDAsXG4gICAgICAgICAgICBjYXVzZTogZXJyLmNhdXNlID8gY3R4Lm5leHQoZXJyLmNhdXNlKSA6IHZvaWQgMCxcbiAgICAgICAgICAgIHN5bnRoZXRpYzogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0VHlwZShjYW5kaWRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNET01FcnJvcihjYW5kaWRhdGUpID8gJ0RPTUVycm9yJyA6ICdET01FeGNlcHRpb24nO1xuICAgIH1cbiAgICBnZXRWYWx1ZShlcnIpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGVyci5uYW1lIHx8ICh0aGlzLmlzRE9NRXJyb3IoZXJyKSA/ICdET01FcnJvcicgOiAnRE9NRXhjZXB0aW9uJyk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIubWVzc2FnZSA/IGAke25hbWV9OiAke2Vyci5tZXNzYWdlfWAgOiBuYW1lO1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gICAgaXNET01FeGNlcHRpb24oZXJyKSB7XG4gICAgICAgIHJldHVybiBpc0J1aWx0aW4oZXJyLCAnRE9NRXhjZXB0aW9uJyk7XG4gICAgfVxuICAgIGlzRE9NRXJyb3IoZXJyKSB7XG4gICAgICAgIHJldHVybiBpc0J1aWx0aW4oZXJyLCAnRE9NRXJyb3InKTtcbiAgICB9XG59XG5leHBvcnQgeyBET01FeGNlcHRpb25Db2VyY2VyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/dom-exception-coercer.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-coercer.mjs":
/*!*****************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-coercer.mjs ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorCoercer: () => (/* binding */ ErrorCoercer)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n\nclass ErrorCoercer {\n    match(err) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isPlainError)(err);\n    }\n    coerce(err, ctx) {\n        return {\n            type: this.getType(err),\n            value: this.getMessage(err, ctx),\n            stack: this.getStack(err),\n            cause: err.cause ? ctx.next(err.cause) : void 0,\n            synthetic: false\n        };\n    }\n    getType(err) {\n        return err.name || err.constructor.name;\n    }\n    getMessage(err, _ctx) {\n        const message = err.message;\n        if (message.error && 'string' == typeof message.error.message) return String(message.error.message);\n        return String(message);\n    }\n    getStack(err) {\n        return err.stacktrace || err.stack || void 0;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvZXJyb3ItY29lcmNlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFDckQ7QUFDQTtBQUNBLGVBQWUsOERBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDd0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2NvZXJjZXJzL2Vycm9yLWNvZXJjZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzUGxhaW5FcnJvciB9IGZyb20gXCIuLi8uLi91dGlscy9pbmRleC5tanNcIjtcbmNsYXNzIEVycm9yQ29lcmNlciB7XG4gICAgbWF0Y2goZXJyKSB7XG4gICAgICAgIHJldHVybiBpc1BsYWluRXJyb3IoZXJyKTtcbiAgICB9XG4gICAgY29lcmNlKGVyciwgY3R4KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLmdldFR5cGUoZXJyKSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmdldE1lc3NhZ2UoZXJyLCBjdHgpLFxuICAgICAgICAgICAgc3RhY2s6IHRoaXMuZ2V0U3RhY2soZXJyKSxcbiAgICAgICAgICAgIGNhdXNlOiBlcnIuY2F1c2UgPyBjdHgubmV4dChlcnIuY2F1c2UpIDogdm9pZCAwLFxuICAgICAgICAgICAgc3ludGhldGljOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRUeXBlKGVycikge1xuICAgICAgICByZXR1cm4gZXJyLm5hbWUgfHwgZXJyLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgfVxuICAgIGdldE1lc3NhZ2UoZXJyLCBfY3R4KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZXJyb3IgJiYgJ3N0cmluZycgPT0gdHlwZW9mIG1lc3NhZ2UuZXJyb3IubWVzc2FnZSkgcmV0dXJuIFN0cmluZyhtZXNzYWdlLmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gU3RyaW5nKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBnZXRTdGFjayhlcnIpIHtcbiAgICAgICAgcmV0dXJuIGVyci5zdGFja3RyYWNlIHx8IGVyci5zdGFjayB8fCB2b2lkIDA7XG4gICAgfVxufVxuZXhwb3J0IHsgRXJyb3JDb2VyY2VyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-coercer.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-event-coercer.mjs":
/*!***********************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-event-coercer.mjs ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorEventCoercer: () => (/* binding */ ErrorEventCoercer)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n\nclass ErrorEventCoercer {\n    constructor(){}\n    match(err) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isErrorEvent)(err) && void 0 != err.error;\n    }\n    coerce(err, ctx) {\n        const exceptionLike = ctx.apply(err.error);\n        if (!exceptionLike) return {\n            type: 'ErrorEvent',\n            value: err.message,\n            stack: ctx.syntheticException?.stack,\n            synthetic: true\n        };\n        return exceptionLike;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvZXJyb3ItZXZlbnQtY29lcmNlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2NvZXJjZXJzL2Vycm9yLWV2ZW50LWNvZXJjZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRXJyb3JFdmVudCB9IGZyb20gXCIuLi8uLi91dGlscy9pbmRleC5tanNcIjtcbmNsYXNzIEVycm9yRXZlbnRDb2VyY2VyIHtcbiAgICBjb25zdHJ1Y3Rvcigpe31cbiAgICBtYXRjaChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGlzRXJyb3JFdmVudChlcnIpICYmIHZvaWQgMCAhPSBlcnIuZXJyb3I7XG4gICAgfVxuICAgIGNvZXJjZShlcnIsIGN0eCkge1xuICAgICAgICBjb25zdCBleGNlcHRpb25MaWtlID0gY3R4LmFwcGx5KGVyci5lcnJvcik7XG4gICAgICAgIGlmICghZXhjZXB0aW9uTGlrZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdFcnJvckV2ZW50JyxcbiAgICAgICAgICAgIHZhbHVlOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICAgIHN0YWNrOiBjdHguc3ludGhldGljRXhjZXB0aW9uPy5zdGFjayxcbiAgICAgICAgICAgIHN5bnRoZXRpYzogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZXhjZXB0aW9uTGlrZTtcbiAgICB9XG59XG5leHBvcnQgeyBFcnJvckV2ZW50Q29lcmNlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-event-coercer.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/event-coercer.mjs":
/*!*****************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/event-coercer.mjs ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventCoercer: () => (/* binding */ EventCoercer)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/utils.mjs\");\n\n\nclass EventCoercer {\n    match(err) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isEvent)(err);\n    }\n    coerce(evt, ctx) {\n        const constructorName = evt.constructor.name;\n        return {\n            type: constructorName,\n            value: `${constructorName} captured as exception with keys: ${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.extractExceptionKeysForMessage)(evt)}`,\n            stack: ctx.syntheticException?.stack,\n            synthetic: true\n        };\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvZXZlbnQtY29lcmNlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdEO0FBQ2E7QUFDN0Q7QUFDQTtBQUNBLGVBQWUseURBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpQkFBaUIsbUNBQW1DLDBFQUE4QixNQUFNO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDd0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2NvZXJjZXJzL2V2ZW50LWNvZXJjZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRXZlbnQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBleHRyYWN0RXhjZXB0aW9uS2V5c0Zvck1lc3NhZ2UgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmNsYXNzIEV2ZW50Q29lcmNlciB7XG4gICAgbWF0Y2goZXJyKSB7XG4gICAgICAgIHJldHVybiBpc0V2ZW50KGVycik7XG4gICAgfVxuICAgIGNvZXJjZShldnQsIGN0eCkge1xuICAgICAgICBjb25zdCBjb25zdHJ1Y3Rvck5hbWUgPSBldnQuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IGNvbnN0cnVjdG9yTmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiBgJHtjb25zdHJ1Y3Rvck5hbWV9IGNhcHR1cmVkIGFzIGV4Y2VwdGlvbiB3aXRoIGtleXM6ICR7ZXh0cmFjdEV4Y2VwdGlvbktleXNGb3JNZXNzYWdlKGV2dCl9YCxcbiAgICAgICAgICAgIHN0YWNrOiBjdHguc3ludGhldGljRXhjZXB0aW9uPy5zdGFjayxcbiAgICAgICAgICAgIHN5bnRoZXRpYzogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCB7IEV2ZW50Q29lcmNlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/event-coercer.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/index.mjs":
/*!*********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/index.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DOMExceptionCoercer: () => (/* reexport safe */ _dom_exception_coercer_mjs__WEBPACK_IMPORTED_MODULE_0__.DOMExceptionCoercer),\n/* harmony export */   ErrorCoercer: () => (/* reexport safe */ _error_coercer_mjs__WEBPACK_IMPORTED_MODULE_1__.ErrorCoercer),\n/* harmony export */   ErrorEventCoercer: () => (/* reexport safe */ _error_event_coercer_mjs__WEBPACK_IMPORTED_MODULE_2__.ErrorEventCoercer),\n/* harmony export */   EventCoercer: () => (/* reexport safe */ _event_coercer_mjs__WEBPACK_IMPORTED_MODULE_5__.EventCoercer),\n/* harmony export */   ObjectCoercer: () => (/* reexport safe */ _object_coercer_mjs__WEBPACK_IMPORTED_MODULE_4__.ObjectCoercer),\n/* harmony export */   PrimitiveCoercer: () => (/* reexport safe */ _primitive_coercer_mjs__WEBPACK_IMPORTED_MODULE_6__.PrimitiveCoercer),\n/* harmony export */   PromiseRejectionEventCoercer: () => (/* reexport safe */ _promise_rejection_event_mjs__WEBPACK_IMPORTED_MODULE_7__.PromiseRejectionEventCoercer),\n/* harmony export */   StringCoercer: () => (/* reexport safe */ _string_coercer_mjs__WEBPACK_IMPORTED_MODULE_3__.StringCoercer)\n/* harmony export */ });\n/* harmony import */ var _dom_exception_coercer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-exception-coercer.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/dom-exception-coercer.mjs\");\n/* harmony import */ var _error_coercer_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./error-coercer.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-coercer.mjs\");\n/* harmony import */ var _error_event_coercer_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./error-event-coercer.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/error-event-coercer.mjs\");\n/* harmony import */ var _string_coercer_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string-coercer.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/string-coercer.mjs\");\n/* harmony import */ var _object_coercer_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object-coercer.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/object-coercer.mjs\");\n/* harmony import */ var _event_coercer_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./event-coercer.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/event-coercer.mjs\");\n/* harmony import */ var _primitive_coercer_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./primitive-coercer.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/primitive-coercer.mjs\");\n/* harmony import */ var _promise_rejection_event_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./promise-rejection-event.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/promise-rejection-event.mjs\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDUjtBQUNNO0FBQ0w7QUFDQTtBQUNEO0FBQ0k7QUFDTSIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2RvbS1leGNlcHRpb24tY29lcmNlci5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Vycm9yLWNvZXJjZXIubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9lcnJvci1ldmVudC1jb2VyY2VyLm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RyaW5nLWNvZXJjZXIubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9vYmplY3QtY29lcmNlci5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2V2ZW50LWNvZXJjZXIubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wcmltaXRpdmUtY29lcmNlci5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3Byb21pc2UtcmVqZWN0aW9uLWV2ZW50Lm1qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/index.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/object-coercer.mjs":
/*!******************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/object-coercer.mjs ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ObjectCoercer: () => (/* binding */ ObjectCoercer)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../types.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/types.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/utils.mjs\");\n\n\n\nclass ObjectCoercer {\n    match(candidate) {\n        return 'object' == typeof candidate && null !== candidate;\n    }\n    coerce(candidate, ctx) {\n        const errorProperty = this.getErrorPropertyFromObject(candidate);\n        if (errorProperty) return ctx.apply(errorProperty);\n        return {\n            type: this.getType(candidate),\n            value: this.getValue(candidate),\n            stack: ctx.syntheticException?.stack,\n            level: this.isSeverityLevel(candidate.level) ? candidate.level : 'error',\n            synthetic: true\n        };\n    }\n    getType(err) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isEvent)(err) ? err.constructor.name : 'Error';\n    }\n    getValue(err) {\n        if ('name' in err && 'string' == typeof err.name) {\n            let message = `'${err.name}' captured as exception`;\n            if ('message' in err && 'string' == typeof err.message) message += ` with message: '${err.message}'`;\n            return message;\n        }\n        if ('message' in err && 'string' == typeof err.message) return err.message;\n        const className = this.getObjectClassName(err);\n        const keys = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.extractExceptionKeysForMessage)(err);\n        return `${className && 'Object' !== className ? `'${className}'` : 'Object'} captured as exception with keys: ${keys}`;\n    }\n    isSeverityLevel(x) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isString)(x) && !(0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isEmptyString)(x) && _types_mjs__WEBPACK_IMPORTED_MODULE_1__.severityLevels.indexOf(x) >= 0;\n    }\n    getErrorPropertyFromObject(obj) {\n        for(const prop in obj)if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n            const value = obj[prop];\n            if ((0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isError)(value)) return value;\n        }\n    }\n    getObjectClassName(obj) {\n        try {\n            const prototype = Object.getPrototypeOf(obj);\n            return prototype ? prototype.constructor.name : void 0;\n        } catch (e) {\n            return;\n        }\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvb2JqZWN0LWNvZXJjZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0Y7QUFDcEM7QUFDZTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFNBQVM7QUFDdkMsa0dBQWtHLFlBQVk7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMEVBQThCO0FBQ25ELGtCQUFrQiwwQ0FBMEMsVUFBVSxlQUFlLG1DQUFtQyxLQUFLO0FBQzdIO0FBQ0E7QUFDQSxlQUFlLDBEQUFRLFFBQVEsK0RBQWEsT0FBTyxzREFBYztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5REFBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDeUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2NvZXJjZXJzL29iamVjdC1jb2VyY2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0VtcHR5U3RyaW5nLCBpc0Vycm9yLCBpc0V2ZW50LCBpc1N0cmluZyB9IGZyb20gXCIuLi8uLi91dGlscy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNldmVyaXR5TGV2ZWxzIH0gZnJvbSBcIi4uL3R5cGVzLm1qc1wiO1xuaW1wb3J0IHsgZXh0cmFjdEV4Y2VwdGlvbktleXNGb3JNZXNzYWdlIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5jbGFzcyBPYmplY3RDb2VyY2VyIHtcbiAgICBtYXRjaChjYW5kaWRhdGUpIHtcbiAgICAgICAgcmV0dXJuICdvYmplY3QnID09IHR5cGVvZiBjYW5kaWRhdGUgJiYgbnVsbCAhPT0gY2FuZGlkYXRlO1xuICAgIH1cbiAgICBjb2VyY2UoY2FuZGlkYXRlLCBjdHgpIHtcbiAgICAgICAgY29uc3QgZXJyb3JQcm9wZXJ0eSA9IHRoaXMuZ2V0RXJyb3JQcm9wZXJ0eUZyb21PYmplY3QoY2FuZGlkYXRlKTtcbiAgICAgICAgaWYgKGVycm9yUHJvcGVydHkpIHJldHVybiBjdHguYXBwbHkoZXJyb3JQcm9wZXJ0eSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLmdldFR5cGUoY2FuZGlkYXRlKSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmdldFZhbHVlKGNhbmRpZGF0ZSksXG4gICAgICAgICAgICBzdGFjazogY3R4LnN5bnRoZXRpY0V4Y2VwdGlvbj8uc3RhY2ssXG4gICAgICAgICAgICBsZXZlbDogdGhpcy5pc1NldmVyaXR5TGV2ZWwoY2FuZGlkYXRlLmxldmVsKSA/IGNhbmRpZGF0ZS5sZXZlbCA6ICdlcnJvcicsXG4gICAgICAgICAgICBzeW50aGV0aWM6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0VHlwZShlcnIpIHtcbiAgICAgICAgcmV0dXJuIGlzRXZlbnQoZXJyKSA/IGVyci5jb25zdHJ1Y3Rvci5uYW1lIDogJ0Vycm9yJztcbiAgICB9XG4gICAgZ2V0VmFsdWUoZXJyKSB7XG4gICAgICAgIGlmICgnbmFtZScgaW4gZXJyICYmICdzdHJpbmcnID09IHR5cGVvZiBlcnIubmFtZSkge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBgJyR7ZXJyLm5hbWV9JyBjYXB0dXJlZCBhcyBleGNlcHRpb25gO1xuICAgICAgICAgICAgaWYgKCdtZXNzYWdlJyBpbiBlcnIgJiYgJ3N0cmluZycgPT0gdHlwZW9mIGVyci5tZXNzYWdlKSBtZXNzYWdlICs9IGAgd2l0aCBtZXNzYWdlOiAnJHtlcnIubWVzc2FnZX0nYDtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnbWVzc2FnZScgaW4gZXJyICYmICdzdHJpbmcnID09IHR5cGVvZiBlcnIubWVzc2FnZSkgcmV0dXJuIGVyci5tZXNzYWdlO1xuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSB0aGlzLmdldE9iamVjdENsYXNzTmFtZShlcnIpO1xuICAgICAgICBjb25zdCBrZXlzID0gZXh0cmFjdEV4Y2VwdGlvbktleXNGb3JNZXNzYWdlKGVycik7XG4gICAgICAgIHJldHVybiBgJHtjbGFzc05hbWUgJiYgJ09iamVjdCcgIT09IGNsYXNzTmFtZSA/IGAnJHtjbGFzc05hbWV9J2AgOiAnT2JqZWN0J30gY2FwdHVyZWQgYXMgZXhjZXB0aW9uIHdpdGgga2V5czogJHtrZXlzfWA7XG4gICAgfVxuICAgIGlzU2V2ZXJpdHlMZXZlbCh4KSB7XG4gICAgICAgIHJldHVybiBpc1N0cmluZyh4KSAmJiAhaXNFbXB0eVN0cmluZyh4KSAmJiBzZXZlcml0eUxldmVscy5pbmRleE9mKHgpID49IDA7XG4gICAgfVxuICAgIGdldEVycm9yUHJvcGVydHlGcm9tT2JqZWN0KG9iaikge1xuICAgICAgICBmb3IoY29uc3QgcHJvcCBpbiBvYmopaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG9ialtwcm9wXTtcbiAgICAgICAgICAgIGlmIChpc0Vycm9yKHZhbHVlKSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE9iamVjdENsYXNzTmFtZShvYmopIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopO1xuICAgICAgICAgICAgcmV0dXJuIHByb3RvdHlwZSA/IHByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lIDogdm9pZCAwO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgeyBPYmplY3RDb2VyY2VyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/object-coercer.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/primitive-coercer.mjs":
/*!*********************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/primitive-coercer.mjs ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrimitiveCoercer: () => (/* binding */ PrimitiveCoercer)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n\nclass PrimitiveCoercer {\n    match(candidate) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isPrimitive)(candidate);\n    }\n    coerce(value, ctx) {\n        return {\n            type: 'Error',\n            value: `Primitive value captured as exception: ${String(value)}`,\n            stack: ctx.syntheticException?.stack,\n            synthetic: true\n        };\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvcHJpbWl0aXZlLWNvZXJjZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW9EO0FBQ3BEO0FBQ0E7QUFDQSxlQUFlLDZEQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGNBQWM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM0QiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvcHJpbWl0aXZlLWNvZXJjZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzUHJpbWl0aXZlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuY2xhc3MgUHJpbWl0aXZlQ29lcmNlciB7XG4gICAgbWF0Y2goY2FuZGlkYXRlKSB7XG4gICAgICAgIHJldHVybiBpc1ByaW1pdGl2ZShjYW5kaWRhdGUpO1xuICAgIH1cbiAgICBjb2VyY2UodmFsdWUsIGN0eCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ0Vycm9yJyxcbiAgICAgICAgICAgIHZhbHVlOiBgUHJpbWl0aXZlIHZhbHVlIGNhcHR1cmVkIGFzIGV4Y2VwdGlvbjogJHtTdHJpbmcodmFsdWUpfWAsXG4gICAgICAgICAgICBzdGFjazogY3R4LnN5bnRoZXRpY0V4Y2VwdGlvbj8uc3RhY2ssXG4gICAgICAgICAgICBzeW50aGV0aWM6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgeyBQcmltaXRpdmVDb2VyY2VyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/primitive-coercer.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/promise-rejection-event.mjs":
/*!***************************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/promise-rejection-event.mjs ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PromiseRejectionEventCoercer: () => (/* binding */ PromiseRejectionEventCoercer)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n\nclass PromiseRejectionEventCoercer {\n    match(err) {\n        return (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isBuiltin)(err, 'PromiseRejectionEvent');\n    }\n    coerce(err, ctx) {\n        const reason = this.getUnhandledRejectionReason(err);\n        if ((0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isPrimitive)(reason)) return {\n            type: 'UnhandledRejection',\n            value: `Non-Error promise rejection captured with value: ${String(reason)}`,\n            stack: ctx.syntheticException?.stack,\n            synthetic: true\n        };\n        return ctx.apply(reason);\n    }\n    getUnhandledRejectionReason(error) {\n        if ((0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isPrimitive)(error)) return error;\n        try {\n            if ('reason' in error) return error.reason;\n            if ('detail' in error && 'reason' in error.detail) return error.detail.reason;\n        } catch  {}\n        return error;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvcHJvbWlzZS1yZWplY3Rpb24tZXZlbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStEO0FBQy9EO0FBQ0E7QUFDQSxlQUFlLDJEQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkRBQVc7QUFDdkI7QUFDQSx1RUFBdUUsZUFBZTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZEQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDd0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2NvZXJjZXJzL3Byb21pc2UtcmVqZWN0aW9uLWV2ZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0J1aWx0aW4sIGlzUHJpbWl0aXZlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuY2xhc3MgUHJvbWlzZVJlamVjdGlvbkV2ZW50Q29lcmNlciB7XG4gICAgbWF0Y2goZXJyKSB7XG4gICAgICAgIHJldHVybiBpc0J1aWx0aW4oZXJyLCAnUHJvbWlzZVJlamVjdGlvbkV2ZW50Jyk7XG4gICAgfVxuICAgIGNvZXJjZShlcnIsIGN0eCkge1xuICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLmdldFVuaGFuZGxlZFJlamVjdGlvblJlYXNvbihlcnIpO1xuICAgICAgICBpZiAoaXNQcmltaXRpdmUocmVhc29uKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdVbmhhbmRsZWRSZWplY3Rpb24nLFxuICAgICAgICAgICAgdmFsdWU6IGBOb24tRXJyb3IgcHJvbWlzZSByZWplY3Rpb24gY2FwdHVyZWQgd2l0aCB2YWx1ZTogJHtTdHJpbmcocmVhc29uKX1gLFxuICAgICAgICAgICAgc3RhY2s6IGN0eC5zeW50aGV0aWNFeGNlcHRpb24/LnN0YWNrLFxuICAgICAgICAgICAgc3ludGhldGljOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjdHguYXBwbHkocmVhc29uKTtcbiAgICB9XG4gICAgZ2V0VW5oYW5kbGVkUmVqZWN0aW9uUmVhc29uKGVycm9yKSB7XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZShlcnJvcikpIHJldHVybiBlcnJvcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICgncmVhc29uJyBpbiBlcnJvcikgcmV0dXJuIGVycm9yLnJlYXNvbjtcbiAgICAgICAgICAgIGlmICgnZGV0YWlsJyBpbiBlcnJvciAmJiAncmVhc29uJyBpbiBlcnJvci5kZXRhaWwpIHJldHVybiBlcnJvci5kZXRhaWwucmVhc29uO1xuICAgICAgICB9IGNhdGNoICB7fVxuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxufVxuZXhwb3J0IHsgUHJvbWlzZVJlamVjdGlvbkV2ZW50Q29lcmNlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/promise-rejection-event.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/string-coercer.mjs":
/*!******************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/string-coercer.mjs ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StringCoercer: () => (/* binding */ StringCoercer)\n/* harmony export */ });\nconst ERROR_TYPES_PATTERN = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\nclass StringCoercer {\n    match(input) {\n        return 'string' == typeof input;\n    }\n    coerce(input, ctx) {\n        const [type, value] = this.getInfos(input);\n        return {\n            type: type ?? 'Error',\n            value: value ?? input,\n            stack: ctx.syntheticException?.stack,\n            synthetic: true\n        };\n    }\n    getInfos(candidate) {\n        let type = 'Error';\n        let value = candidate;\n        const groups = candidate.match(ERROR_TYPES_PATTERN);\n        if (groups) {\n            type = groups[1];\n            value = groups[2];\n        }\n        return [\n            type,\n            value\n        ];\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvc3RyaW5nLWNvZXJjZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN5QiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvc3RyaW5nLWNvZXJjZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVSUk9SX1RZUEVTX1BBVFRFUk4gPSAvXig/OltVdV1uY2F1Z2h0ICg/OmV4Y2VwdGlvbjogKT8pPyg/OigoPzpFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkl8KUVycm9yKTogKT8oLiopJC9pO1xuY2xhc3MgU3RyaW5nQ29lcmNlciB7XG4gICAgbWF0Y2goaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuICdzdHJpbmcnID09IHR5cGVvZiBpbnB1dDtcbiAgICB9XG4gICAgY29lcmNlKGlucHV0LCBjdHgpIHtcbiAgICAgICAgY29uc3QgW3R5cGUsIHZhbHVlXSA9IHRoaXMuZ2V0SW5mb3MoaW5wdXQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdHlwZSA/PyAnRXJyb3InLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlID8/IGlucHV0LFxuICAgICAgICAgICAgc3RhY2s6IGN0eC5zeW50aGV0aWNFeGNlcHRpb24/LnN0YWNrLFxuICAgICAgICAgICAgc3ludGhldGljOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldEluZm9zKGNhbmRpZGF0ZSkge1xuICAgICAgICBsZXQgdHlwZSA9ICdFcnJvcic7XG4gICAgICAgIGxldCB2YWx1ZSA9IGNhbmRpZGF0ZTtcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gY2FuZGlkYXRlLm1hdGNoKEVSUk9SX1RZUEVTX1BBVFRFUk4pO1xuICAgICAgICBpZiAoZ3JvdXBzKSB7XG4gICAgICAgICAgICB0eXBlID0gZ3JvdXBzWzFdO1xuICAgICAgICAgICAgdmFsdWUgPSBncm91cHNbMl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICBdO1xuICAgIH1cbn1cbmV4cG9ydCB7IFN0cmluZ0NvZXJjZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/string-coercer.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/utils.mjs":
/*!*********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/utils.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractExceptionKeysForMessage: () => (/* binding */ extractExceptionKeysForMessage),\n/* harmony export */   truncate: () => (/* binding */ truncate)\n/* harmony export */ });\nfunction truncate(str, max = 0) {\n    if ('string' != typeof str || 0 === max) return str;\n    return str.length <= max ? str : `${str.slice(0, max)}...`;\n}\nfunction extractExceptionKeysForMessage(err, maxLength = 40) {\n    const keys = Object.keys(err);\n    keys.sort();\n    if (!keys.length) return '[object has no keys]';\n    for(let i = keys.length; i > 0; i--){\n        const serialized = keys.slice(0, i).join(', ');\n        if (!(serialized.length > maxLength)) {\n            if (i === keys.length) return serialized;\n            return serialized.length <= maxLength ? serialized : `${serialized.slice(0, maxLength)}...`;\n        }\n    }\n    return '';\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvY29lcmNlcnMvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBLHdDQUF3QyxrQkFBa0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixPQUFPO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSwrQkFBK0I7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDb0QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2NvZXJjZXJzL3V0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiB0cnVuY2F0ZShzdHIsIG1heCA9IDApIHtcbiAgICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIHN0ciB8fCAwID09PSBtYXgpIHJldHVybiBzdHI7XG4gICAgcmV0dXJuIHN0ci5sZW5ndGggPD0gbWF4ID8gc3RyIDogYCR7c3RyLnNsaWNlKDAsIG1heCl9Li4uYDtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RFeGNlcHRpb25LZXlzRm9yTWVzc2FnZShlcnIsIG1heExlbmd0aCA9IDQwKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVycik7XG4gICAga2V5cy5zb3J0KCk7XG4gICAgaWYgKCFrZXlzLmxlbmd0aCkgcmV0dXJuICdbb2JqZWN0IGhhcyBubyBrZXlzXSc7XG4gICAgZm9yKGxldCBpID0ga2V5cy5sZW5ndGg7IGkgPiAwOyBpLS0pe1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkID0ga2V5cy5zbGljZSgwLCBpKS5qb2luKCcsICcpO1xuICAgICAgICBpZiAoIShzZXJpYWxpemVkLmxlbmd0aCA+IG1heExlbmd0aCkpIHtcbiAgICAgICAgICAgIGlmIChpID09PSBrZXlzLmxlbmd0aCkgcmV0dXJuIHNlcmlhbGl6ZWQ7XG4gICAgICAgICAgICByZXR1cm4gc2VyaWFsaXplZC5sZW5ndGggPD0gbWF4TGVuZ3RoID8gc2VyaWFsaXplZCA6IGAke3NlcmlhbGl6ZWQuc2xpY2UoMCwgbWF4TGVuZ3RoKX0uLi5gO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cbmV4cG9ydCB7IGV4dHJhY3RFeGNlcHRpb25LZXlzRm9yTWVzc2FnZSwgdHJ1bmNhdGUgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/utils.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/error-properties-builder.mjs":
/*!*******************************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/error-properties-builder.mjs ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ErrorPropertiesBuilder: () => (/* binding */ ErrorPropertiesBuilder)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n/* harmony import */ var _chunk_ids_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-ids.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/chunk-ids.mjs\");\n/* harmony import */ var _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parsers/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/index.mjs\");\n\n\n\nconst MAX_CAUSE_RECURSION = 4;\nclass ErrorPropertiesBuilder {\n    constructor(coercers = [], parsers = [], modifiers = []){\n        this.coercers = coercers;\n        this.modifiers = modifiers;\n        this.stackParser = (0,_parsers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.createStackParser)(...parsers);\n    }\n    buildFromUnknown(input, hint = {}) {\n        const providedMechanism = hint && hint.mechanism;\n        const mechanism = providedMechanism || {\n            handled: true,\n            type: 'generic'\n        };\n        const coercingContext = this.buildCoercingContext(mechanism, hint, 0);\n        const exceptionWithCause = coercingContext.apply(input);\n        const parsingContext = this.buildParsingContext();\n        const exceptionWithStack = this.parseStacktrace(exceptionWithCause, parsingContext);\n        const exceptionList = this.convertToExceptionList(exceptionWithStack, mechanism);\n        return {\n            $exception_list: exceptionList,\n            $exception_level: 'error'\n        };\n    }\n    async modifyFrames(exceptionList) {\n        for (const exc of exceptionList)if (exc.stacktrace && exc.stacktrace.frames && (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isArray)(exc.stacktrace.frames)) exc.stacktrace.frames = await this.applyModifiers(exc.stacktrace.frames);\n        return exceptionList;\n    }\n    coerceFallback(ctx) {\n        return {\n            type: 'Error',\n            value: 'Unknown error',\n            stack: ctx.syntheticException?.stack,\n            synthetic: true\n        };\n    }\n    parseStacktrace(err, ctx) {\n        let cause;\n        if (null != err.cause) cause = this.parseStacktrace(err.cause, ctx);\n        let stack;\n        if ('' != err.stack && null != err.stack) stack = this.applyChunkIds(this.stackParser(err.stack, err.synthetic ? 1 : 0), ctx.chunkIdMap);\n        return {\n            ...err,\n            cause,\n            stack\n        };\n    }\n    applyChunkIds(frames, chunkIdMap) {\n        return frames.map((frame)=>{\n            if (frame.filename && chunkIdMap) frame.chunk_id = chunkIdMap[frame.filename];\n            return frame;\n        });\n    }\n    applyCoercers(input, ctx) {\n        for (const adapter of this.coercers)if (adapter.match(input)) return adapter.coerce(input, ctx);\n        return this.coerceFallback(ctx);\n    }\n    async applyModifiers(frames) {\n        let newFrames = frames;\n        for (const modifier of this.modifiers)newFrames = await modifier(newFrames);\n        return newFrames;\n    }\n    convertToExceptionList(exceptionWithStack, mechanism) {\n        const currentException = {\n            type: exceptionWithStack.type,\n            value: exceptionWithStack.value,\n            mechanism: {\n                type: mechanism.type ?? 'generic',\n                handled: mechanism.handled ?? true,\n                synthetic: exceptionWithStack.synthetic ?? false\n            }\n        };\n        if (exceptionWithStack.stack) currentException.stacktrace = {\n            type: 'raw',\n            frames: exceptionWithStack.stack\n        };\n        const exceptionList = [\n            currentException\n        ];\n        if (null != exceptionWithStack.cause) exceptionList.push(...this.convertToExceptionList(exceptionWithStack.cause, {\n            ...mechanism,\n            handled: true\n        }));\n        return exceptionList;\n    }\n    buildParsingContext() {\n        const context = {\n            chunkIdMap: (0,_chunk_ids_mjs__WEBPACK_IMPORTED_MODULE_1__.getFilenameToChunkIdMap)(this.stackParser)\n        };\n        return context;\n    }\n    buildCoercingContext(mechanism, hint, depth = 0) {\n        const coerce = (input, depth)=>{\n            if (!(depth <= MAX_CAUSE_RECURSION)) return;\n            {\n                const ctx = this.buildCoercingContext(mechanism, hint, depth);\n                return this.applyCoercers(input, ctx);\n            }\n        };\n        const context = {\n            ...hint,\n            syntheticException: 0 == depth ? hint.syntheticException : void 0,\n            mechanism,\n            apply: (input)=>coerce(input, depth),\n            next: (input)=>coerce(input, depth + 1)\n        };\n        return context;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvZXJyb3ItcHJvcGVydGllcy1idWlsZGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZDO0FBQ2E7QUFDRjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFFQUFpQjtBQUM1QztBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1Rix5REFBTztBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUVBQXVCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNrQyIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvZXJyb3ItcHJvcGVydGllcy1idWlsZGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0FycmF5IH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0RmlsZW5hbWVUb0NodW5rSWRNYXAgfSBmcm9tIFwiLi9jaHVuay1pZHMubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVTdGFja1BhcnNlciB9IGZyb20gXCIuL3BhcnNlcnMvaW5kZXgubWpzXCI7XG5jb25zdCBNQVhfQ0FVU0VfUkVDVVJTSU9OID0gNDtcbmNsYXNzIEVycm9yUHJvcGVydGllc0J1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvZXJjZXJzID0gW10sIHBhcnNlcnMgPSBbXSwgbW9kaWZpZXJzID0gW10pe1xuICAgICAgICB0aGlzLmNvZXJjZXJzID0gY29lcmNlcnM7XG4gICAgICAgIHRoaXMubW9kaWZpZXJzID0gbW9kaWZpZXJzO1xuICAgICAgICB0aGlzLnN0YWNrUGFyc2VyID0gY3JlYXRlU3RhY2tQYXJzZXIoLi4ucGFyc2Vycyk7XG4gICAgfVxuICAgIGJ1aWxkRnJvbVVua25vd24oaW5wdXQsIGhpbnQgPSB7fSkge1xuICAgICAgICBjb25zdCBwcm92aWRlZE1lY2hhbmlzbSA9IGhpbnQgJiYgaGludC5tZWNoYW5pc207XG4gICAgICAgIGNvbnN0IG1lY2hhbmlzbSA9IHByb3ZpZGVkTWVjaGFuaXNtIHx8IHtcbiAgICAgICAgICAgIGhhbmRsZWQ6IHRydWUsXG4gICAgICAgICAgICB0eXBlOiAnZ2VuZXJpYydcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29lcmNpbmdDb250ZXh0ID0gdGhpcy5idWlsZENvZXJjaW5nQ29udGV4dChtZWNoYW5pc20sIGhpbnQsIDApO1xuICAgICAgICBjb25zdCBleGNlcHRpb25XaXRoQ2F1c2UgPSBjb2VyY2luZ0NvbnRleHQuYXBwbHkoaW5wdXQpO1xuICAgICAgICBjb25zdCBwYXJzaW5nQ29udGV4dCA9IHRoaXMuYnVpbGRQYXJzaW5nQ29udGV4dCgpO1xuICAgICAgICBjb25zdCBleGNlcHRpb25XaXRoU3RhY2sgPSB0aGlzLnBhcnNlU3RhY2t0cmFjZShleGNlcHRpb25XaXRoQ2F1c2UsIHBhcnNpbmdDb250ZXh0KTtcbiAgICAgICAgY29uc3QgZXhjZXB0aW9uTGlzdCA9IHRoaXMuY29udmVydFRvRXhjZXB0aW9uTGlzdChleGNlcHRpb25XaXRoU3RhY2ssIG1lY2hhbmlzbSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uX2xpc3Q6IGV4Y2VwdGlvbkxpc3QsXG4gICAgICAgICAgICAkZXhjZXB0aW9uX2xldmVsOiAnZXJyb3InXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIG1vZGlmeUZyYW1lcyhleGNlcHRpb25MaXN0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZXhjIG9mIGV4Y2VwdGlvbkxpc3QpaWYgKGV4Yy5zdGFja3RyYWNlICYmIGV4Yy5zdGFja3RyYWNlLmZyYW1lcyAmJiBpc0FycmF5KGV4Yy5zdGFja3RyYWNlLmZyYW1lcykpIGV4Yy5zdGFja3RyYWNlLmZyYW1lcyA9IGF3YWl0IHRoaXMuYXBwbHlNb2RpZmllcnMoZXhjLnN0YWNrdHJhY2UuZnJhbWVzKTtcbiAgICAgICAgcmV0dXJuIGV4Y2VwdGlvbkxpc3Q7XG4gICAgfVxuICAgIGNvZXJjZUZhbGxiYWNrKGN0eCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ0Vycm9yJyxcbiAgICAgICAgICAgIHZhbHVlOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgICAgICBzdGFjazogY3R4LnN5bnRoZXRpY0V4Y2VwdGlvbj8uc3RhY2ssXG4gICAgICAgICAgICBzeW50aGV0aWM6IHRydWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcGFyc2VTdGFja3RyYWNlKGVyciwgY3R4KSB7XG4gICAgICAgIGxldCBjYXVzZTtcbiAgICAgICAgaWYgKG51bGwgIT0gZXJyLmNhdXNlKSBjYXVzZSA9IHRoaXMucGFyc2VTdGFja3RyYWNlKGVyci5jYXVzZSwgY3R4KTtcbiAgICAgICAgbGV0IHN0YWNrO1xuICAgICAgICBpZiAoJycgIT0gZXJyLnN0YWNrICYmIG51bGwgIT0gZXJyLnN0YWNrKSBzdGFjayA9IHRoaXMuYXBwbHlDaHVua0lkcyh0aGlzLnN0YWNrUGFyc2VyKGVyci5zdGFjaywgZXJyLnN5bnRoZXRpYyA/IDEgOiAwKSwgY3R4LmNodW5rSWRNYXApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZXJyLFxuICAgICAgICAgICAgY2F1c2UsXG4gICAgICAgICAgICBzdGFja1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhcHBseUNodW5rSWRzKGZyYW1lcywgY2h1bmtJZE1hcCkge1xuICAgICAgICByZXR1cm4gZnJhbWVzLm1hcCgoZnJhbWUpPT57XG4gICAgICAgICAgICBpZiAoZnJhbWUuZmlsZW5hbWUgJiYgY2h1bmtJZE1hcCkgZnJhbWUuY2h1bmtfaWQgPSBjaHVua0lkTWFwW2ZyYW1lLmZpbGVuYW1lXTtcbiAgICAgICAgICAgIHJldHVybiBmcmFtZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFwcGx5Q29lcmNlcnMoaW5wdXQsIGN0eCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFkYXB0ZXIgb2YgdGhpcy5jb2VyY2VycylpZiAoYWRhcHRlci5tYXRjaChpbnB1dCkpIHJldHVybiBhZGFwdGVyLmNvZXJjZShpbnB1dCwgY3R4KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29lcmNlRmFsbGJhY2soY3R4KTtcbiAgICB9XG4gICAgYXN5bmMgYXBwbHlNb2RpZmllcnMoZnJhbWVzKSB7XG4gICAgICAgIGxldCBuZXdGcmFtZXMgPSBmcmFtZXM7XG4gICAgICAgIGZvciAoY29uc3QgbW9kaWZpZXIgb2YgdGhpcy5tb2RpZmllcnMpbmV3RnJhbWVzID0gYXdhaXQgbW9kaWZpZXIobmV3RnJhbWVzKTtcbiAgICAgICAgcmV0dXJuIG5ld0ZyYW1lcztcbiAgICB9XG4gICAgY29udmVydFRvRXhjZXB0aW9uTGlzdChleGNlcHRpb25XaXRoU3RhY2ssIG1lY2hhbmlzbSkge1xuICAgICAgICBjb25zdCBjdXJyZW50RXhjZXB0aW9uID0ge1xuICAgICAgICAgICAgdHlwZTogZXhjZXB0aW9uV2l0aFN0YWNrLnR5cGUsXG4gICAgICAgICAgICB2YWx1ZTogZXhjZXB0aW9uV2l0aFN0YWNrLnZhbHVlLFxuICAgICAgICAgICAgbWVjaGFuaXNtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogbWVjaGFuaXNtLnR5cGUgPz8gJ2dlbmVyaWMnLFxuICAgICAgICAgICAgICAgIGhhbmRsZWQ6IG1lY2hhbmlzbS5oYW5kbGVkID8/IHRydWUsXG4gICAgICAgICAgICAgICAgc3ludGhldGljOiBleGNlcHRpb25XaXRoU3RhY2suc3ludGhldGljID8/IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChleGNlcHRpb25XaXRoU3RhY2suc3RhY2spIGN1cnJlbnRFeGNlcHRpb24uc3RhY2t0cmFjZSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdyYXcnLFxuICAgICAgICAgICAgZnJhbWVzOiBleGNlcHRpb25XaXRoU3RhY2suc3RhY2tcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXhjZXB0aW9uTGlzdCA9IFtcbiAgICAgICAgICAgIGN1cnJlbnRFeGNlcHRpb25cbiAgICAgICAgXTtcbiAgICAgICAgaWYgKG51bGwgIT0gZXhjZXB0aW9uV2l0aFN0YWNrLmNhdXNlKSBleGNlcHRpb25MaXN0LnB1c2goLi4udGhpcy5jb252ZXJ0VG9FeGNlcHRpb25MaXN0KGV4Y2VwdGlvbldpdGhTdGFjay5jYXVzZSwge1xuICAgICAgICAgICAgLi4ubWVjaGFuaXNtLFxuICAgICAgICAgICAgaGFuZGxlZDogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBleGNlcHRpb25MaXN0O1xuICAgIH1cbiAgICBidWlsZFBhcnNpbmdDb250ZXh0KCkge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgY2h1bmtJZE1hcDogZ2V0RmlsZW5hbWVUb0NodW5rSWRNYXAodGhpcy5zdGFja1BhcnNlcilcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuICAgIGJ1aWxkQ29lcmNpbmdDb250ZXh0KG1lY2hhbmlzbSwgaGludCwgZGVwdGggPSAwKSB7XG4gICAgICAgIGNvbnN0IGNvZXJjZSA9IChpbnB1dCwgZGVwdGgpPT57XG4gICAgICAgICAgICBpZiAoIShkZXB0aCA8PSBNQVhfQ0FVU0VfUkVDVVJTSU9OKSkgcmV0dXJuO1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuYnVpbGRDb2VyY2luZ0NvbnRleHQobWVjaGFuaXNtLCBoaW50LCBkZXB0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDb2VyY2VycyhpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgICAgIC4uLmhpbnQsXG4gICAgICAgICAgICBzeW50aGV0aWNFeGNlcHRpb246IDAgPT0gZGVwdGggPyBoaW50LnN5bnRoZXRpY0V4Y2VwdGlvbiA6IHZvaWQgMCxcbiAgICAgICAgICAgIG1lY2hhbmlzbSxcbiAgICAgICAgICAgIGFwcGx5OiAoaW5wdXQpPT5jb2VyY2UoaW5wdXQsIGRlcHRoKSxcbiAgICAgICAgICAgIG5leHQ6IChpbnB1dCk9PmNvZXJjZShpbnB1dCwgZGVwdGggKyAxKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICB9XG59XG5leHBvcnQgeyBFcnJvclByb3BlcnRpZXNCdWlsZGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/error-properties-builder.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/index.mjs":
/*!************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/index.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DOMExceptionCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.DOMExceptionCoercer),\n/* harmony export */   ErrorCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.ErrorCoercer),\n/* harmony export */   ErrorEventCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.ErrorEventCoercer),\n/* harmony export */   ErrorPropertiesBuilder: () => (/* reexport safe */ _error_properties_builder_mjs__WEBPACK_IMPORTED_MODULE_0__.ErrorPropertiesBuilder),\n/* harmony export */   EventCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.EventCoercer),\n/* harmony export */   ObjectCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.ObjectCoercer),\n/* harmony export */   PrimitiveCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.PrimitiveCoercer),\n/* harmony export */   PromiseRejectionEventCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.PromiseRejectionEventCoercer),\n/* harmony export */   ReduceableCache: () => (/* reexport safe */ _utils_mjs__WEBPACK_IMPORTED_MODULE_3__.ReduceableCache),\n/* harmony export */   StringCoercer: () => (/* reexport safe */ _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__.StringCoercer),\n/* harmony export */   chromeStackLineParser: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.chromeStackLineParser),\n/* harmony export */   createStackParser: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.createStackParser),\n/* harmony export */   geckoStackLineParser: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.geckoStackLineParser),\n/* harmony export */   nodeStackLineParser: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.nodeStackLineParser),\n/* harmony export */   opera10StackLineParser: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.opera10StackLineParser),\n/* harmony export */   opera11StackLineParser: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.opera11StackLineParser),\n/* harmony export */   reverseAndStripFrames: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.reverseAndStripFrames),\n/* harmony export */   winjsStackLineParser: () => (/* reexport safe */ _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__.winjsStackLineParser)\n/* harmony export */ });\n/* harmony import */ var _error_properties_builder_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error-properties-builder.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/error-properties-builder.mjs\");\n/* harmony import */ var _parsers_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parsers/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/index.mjs\");\n/* harmony import */ var _coercers_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./coercers/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/coercers/index.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/utils.mjs\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDWDtBQUNDO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9lcnJvci1wcm9wZXJ0aWVzLWJ1aWxkZXIubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wYXJzZXJzL2luZGV4Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY29lcmNlcnMvaW5kZXgubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91dGlscy5tanNcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/index.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs":
/*!*******************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UNKNOWN_FUNCTION: () => (/* binding */ UNKNOWN_FUNCTION),\n/* harmony export */   createFrame: () => (/* binding */ createFrame)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n\nconst UNKNOWN_FUNCTION = '?';\nfunction createFrame(filename, func, lineno, colno) {\n    const frame = {\n        platform: \"web:javascript\",\n        filename,\n        function: '<anonymous>' === func ? UNKNOWN_FUNCTION : func,\n        in_app: true\n    };\n    if (!(0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(lineno)) frame.lineno = lineno;\n    if (!(0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(colno)) frame.colno = colno;\n    return frame;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9iYXNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNkRBQVc7QUFDcEIsU0FBUyw2REFBVztBQUNwQjtBQUNBO0FBQ3lDIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC9lcnJvci10cmFja2luZy9wYXJzZXJzL2Jhc2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzVW5kZWZpbmVkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuY29uc3QgVU5LTk9XTl9GVU5DVElPTiA9ICc/JztcbmZ1bmN0aW9uIGNyZWF0ZUZyYW1lKGZpbGVuYW1lLCBmdW5jLCBsaW5lbm8sIGNvbG5vKSB7XG4gICAgY29uc3QgZnJhbWUgPSB7XG4gICAgICAgIHBsYXRmb3JtOiBcIndlYjpqYXZhc2NyaXB0XCIsXG4gICAgICAgIGZpbGVuYW1lLFxuICAgICAgICBmdW5jdGlvbjogJzxhbm9ueW1vdXM+JyA9PT0gZnVuYyA/IFVOS05PV05fRlVOQ1RJT04gOiBmdW5jLFxuICAgICAgICBpbl9hcHA6IHRydWVcbiAgICB9O1xuICAgIGlmICghaXNVbmRlZmluZWQobGluZW5vKSkgZnJhbWUubGluZW5vID0gbGluZW5vO1xuICAgIGlmICghaXNVbmRlZmluZWQoY29sbm8pKSBmcmFtZS5jb2xubyA9IGNvbG5vO1xuICAgIHJldHVybiBmcmFtZTtcbn1cbmV4cG9ydCB7IFVOS05PV05fRlVOQ1RJT04sIGNyZWF0ZUZyYW1lIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/chrome.mjs":
/*!*********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/chrome.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chromeStackLineParser: () => (/* binding */ chromeStackLineParser)\n/* harmony export */ });\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\");\n/* harmony import */ var _safari_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./safari.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/safari.mjs\");\n\n\nconst chromeRegexNoFnName = /^\\s*at (\\S+?)(?::(\\d+))(?::(\\d+))\\s*$/i;\nconst chromeRegex = /^\\s*at (?:(.+?\\)(?: \\[.+\\])?|.*?) ?\\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nconst chromeEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\nconst chromeStackLineParser = (line)=>{\n    const noFnParts = chromeRegexNoFnName.exec(line);\n    if (noFnParts) {\n        const [, filename, line, col] = noFnParts;\n        return (0,_base_mjs__WEBPACK_IMPORTED_MODULE_0__.createFrame)(filename, _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION, +line, +col);\n    }\n    const parts = chromeRegex.exec(line);\n    if (parts) {\n        const isEval = parts[2] && 0 === parts[2].indexOf('eval');\n        if (isEval) {\n            const subMatch = chromeEvalRegex.exec(parts[2]);\n            if (subMatch) {\n                parts[2] = subMatch[1];\n                parts[3] = subMatch[2];\n                parts[4] = subMatch[3];\n            }\n        }\n        const [func, filename] = (0,_safari_mjs__WEBPACK_IMPORTED_MODULE_1__.extractSafariExtensionDetails)(parts[1] || _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION, parts[2]);\n        return (0,_base_mjs__WEBPACK_IMPORTED_MODULE_0__.createFrame)(filename, func, parts[3] ? +parts[3] : void 0, parts[4] ? +parts[4] : void 0);\n    }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9jaHJvbWUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyRDtBQUNFO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzREFBVyxXQUFXLHVEQUFnQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMEVBQTZCLGFBQWEsdURBQWdCO0FBQzNGLGVBQWUsc0RBQVc7QUFDMUI7QUFDQTtBQUNpQyIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9jaHJvbWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVOS05PV05fRlVOQ1RJT04sIGNyZWF0ZUZyYW1lIH0gZnJvbSBcIi4vYmFzZS5tanNcIjtcbmltcG9ydCB7IGV4dHJhY3RTYWZhcmlFeHRlbnNpb25EZXRhaWxzIH0gZnJvbSBcIi4vc2FmYXJpLm1qc1wiO1xuY29uc3QgY2hyb21lUmVnZXhOb0ZuTmFtZSA9IC9eXFxzKmF0IChcXFMrPykoPzo6KFxcZCspKSg/OjooXFxkKykpXFxzKiQvaTtcbmNvbnN0IGNocm9tZVJlZ2V4ID0gL15cXHMqYXQgKD86KC4rP1xcKSg/OiBcXFsuK1xcXSk/fC4qPykgP1xcKCg/OmFkZHJlc3MgYXQgKT8pPyg/OmFzeW5jICk/KCg/Ojxhbm9ueW1vdXM+fFstYS16XSs6fC4qYnVuZGxlfFxcLyk/Lio/KSg/OjooXFxkKykpPyg/OjooXFxkKykpP1xcKT9cXHMqJC9pO1xuY29uc3QgY2hyb21lRXZhbFJlZ2V4ID0gL1xcKChcXFMqKSg/OjooXFxkKykpKD86OihcXGQrKSlcXCkvO1xuY29uc3QgY2hyb21lU3RhY2tMaW5lUGFyc2VyID0gKGxpbmUpPT57XG4gICAgY29uc3Qgbm9GblBhcnRzID0gY2hyb21lUmVnZXhOb0ZuTmFtZS5leGVjKGxpbmUpO1xuICAgIGlmIChub0ZuUGFydHMpIHtcbiAgICAgICAgY29uc3QgWywgZmlsZW5hbWUsIGxpbmUsIGNvbF0gPSBub0ZuUGFydHM7XG4gICAgICAgIHJldHVybiBjcmVhdGVGcmFtZShmaWxlbmFtZSwgVU5LTk9XTl9GVU5DVElPTiwgK2xpbmUsICtjb2wpO1xuICAgIH1cbiAgICBjb25zdCBwYXJ0cyA9IGNocm9tZVJlZ2V4LmV4ZWMobGluZSk7XG4gICAgaWYgKHBhcnRzKSB7XG4gICAgICAgIGNvbnN0IGlzRXZhbCA9IHBhcnRzWzJdICYmIDAgPT09IHBhcnRzWzJdLmluZGV4T2YoJ2V2YWwnKTtcbiAgICAgICAgaWYgKGlzRXZhbCkge1xuICAgICAgICAgICAgY29uc3Qgc3ViTWF0Y2ggPSBjaHJvbWVFdmFsUmVnZXguZXhlYyhwYXJ0c1syXSk7XG4gICAgICAgICAgICBpZiAoc3ViTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBwYXJ0c1syXSA9IHN1Yk1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIHBhcnRzWzNdID0gc3ViTWF0Y2hbMl07XG4gICAgICAgICAgICAgICAgcGFydHNbNF0gPSBzdWJNYXRjaFszXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbZnVuYywgZmlsZW5hbWVdID0gZXh0cmFjdFNhZmFyaUV4dGVuc2lvbkRldGFpbHMocGFydHNbMV0gfHwgVU5LTk9XTl9GVU5DVElPTiwgcGFydHNbMl0pO1xuICAgICAgICByZXR1cm4gY3JlYXRlRnJhbWUoZmlsZW5hbWUsIGZ1bmMsIHBhcnRzWzNdID8gK3BhcnRzWzNdIDogdm9pZCAwLCBwYXJ0c1s0XSA/ICtwYXJ0c1s0XSA6IHZvaWQgMCk7XG4gICAgfVxufTtcbmV4cG9ydCB7IGNocm9tZVN0YWNrTGluZVBhcnNlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/chrome.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/gecko.mjs":
/*!********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/gecko.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   geckoStackLineParser: () => (/* binding */ geckoStackLineParser)\n/* harmony export */ });\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\");\n/* harmony import */ var _safari_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./safari.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/safari.mjs\");\n\n\nconst geckoREgex = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:[-a-z]+)?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nconst geckoEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nconst geckoStackLineParser = (line)=>{\n    const parts = geckoREgex.exec(line);\n    if (parts) {\n        const isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n        if (isEval) {\n            const subMatch = geckoEvalRegex.exec(parts[3]);\n            if (subMatch) {\n                parts[1] = parts[1] || 'eval';\n                parts[3] = subMatch[1];\n                parts[4] = subMatch[2];\n                parts[5] = '';\n            }\n        }\n        let filename = parts[3];\n        let func = parts[1] || _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION;\n        [func, filename] = (0,_safari_mjs__WEBPACK_IMPORTED_MODULE_1__.extractSafariExtensionDetails)(func, filename);\n        return (0,_base_mjs__WEBPACK_IMPORTED_MODULE_0__.createFrame)(filename, func, parts[4] ? +parts[4] : void 0, parts[5] ? +parts[5] : void 0);\n    }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9nZWNrby5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJEO0FBQ0U7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdURBQWdCO0FBQy9DLDJCQUEyQiwwRUFBNkI7QUFDeEQsZUFBZSxzREFBVztBQUMxQjtBQUNBO0FBQ2dDIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC9lcnJvci10cmFja2luZy9wYXJzZXJzL2dlY2tvLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVTktOT1dOX0ZVTkNUSU9OLCBjcmVhdGVGcmFtZSB9IGZyb20gXCIuL2Jhc2UubWpzXCI7XG5pbXBvcnQgeyBleHRyYWN0U2FmYXJpRXh0ZW5zaW9uRGV0YWlscyB9IGZyb20gXCIuL3NhZmFyaS5tanNcIjtcbmNvbnN0IGdlY2tvUkVnZXggPSAvXlxccyooLio/KSg/OlxcKCguKj8pXFwpKT8oPzpefEApPygoPzpbLWEtel0rKT86XFwvLio/fFxcW25hdGl2ZSBjb2RlXFxdfFteQF0qKD86YnVuZGxlfFxcZCtcXC5qcyl8XFwvW1xcd1xcLS4gLz1dKykoPzo6KFxcZCspKT8oPzo6KFxcZCspKT9cXHMqJC9pO1xuY29uc3QgZ2Vja29FdmFsUmVnZXggPSAvKFxcUyspIGxpbmUgKFxcZCspKD86ID4gZXZhbCBsaW5lIFxcZCspKiA+IGV2YWwvaTtcbmNvbnN0IGdlY2tvU3RhY2tMaW5lUGFyc2VyID0gKGxpbmUpPT57XG4gICAgY29uc3QgcGFydHMgPSBnZWNrb1JFZ2V4LmV4ZWMobGluZSk7XG4gICAgaWYgKHBhcnRzKSB7XG4gICAgICAgIGNvbnN0IGlzRXZhbCA9IHBhcnRzWzNdICYmIHBhcnRzWzNdLmluZGV4T2YoJyA+IGV2YWwnKSA+IC0xO1xuICAgICAgICBpZiAoaXNFdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBzdWJNYXRjaCA9IGdlY2tvRXZhbFJlZ2V4LmV4ZWMocGFydHNbM10pO1xuICAgICAgICAgICAgaWYgKHN1Yk1hdGNoKSB7XG4gICAgICAgICAgICAgICAgcGFydHNbMV0gPSBwYXJ0c1sxXSB8fCAnZXZhbCc7XG4gICAgICAgICAgICAgICAgcGFydHNbM10gPSBzdWJNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICBwYXJ0c1s0XSA9IHN1Yk1hdGNoWzJdO1xuICAgICAgICAgICAgICAgIHBhcnRzWzVdID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZpbGVuYW1lID0gcGFydHNbM107XG4gICAgICAgIGxldCBmdW5jID0gcGFydHNbMV0gfHwgVU5LTk9XTl9GVU5DVElPTjtcbiAgICAgICAgW2Z1bmMsIGZpbGVuYW1lXSA9IGV4dHJhY3RTYWZhcmlFeHRlbnNpb25EZXRhaWxzKGZ1bmMsIGZpbGVuYW1lKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZyYW1lKGZpbGVuYW1lLCBmdW5jLCBwYXJ0c1s0XSA/ICtwYXJ0c1s0XSA6IHZvaWQgMCwgcGFydHNbNV0gPyArcGFydHNbNV0gOiB2b2lkIDApO1xuICAgIH1cbn07XG5leHBvcnQgeyBnZWNrb1N0YWNrTGluZVBhcnNlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/gecko.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/index.mjs":
/*!********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/index.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chromeStackLineParser: () => (/* reexport safe */ _chrome_mjs__WEBPACK_IMPORTED_MODULE_1__.chromeStackLineParser),\n/* harmony export */   createStackParser: () => (/* binding */ createStackParser),\n/* harmony export */   geckoStackLineParser: () => (/* reexport safe */ _gecko_mjs__WEBPACK_IMPORTED_MODULE_3__.geckoStackLineParser),\n/* harmony export */   nodeStackLineParser: () => (/* reexport safe */ _node_mjs__WEBPACK_IMPORTED_MODULE_5__.nodeStackLineParser),\n/* harmony export */   opera10StackLineParser: () => (/* reexport safe */ _opera_mjs__WEBPACK_IMPORTED_MODULE_4__.opera10StackLineParser),\n/* harmony export */   opera11StackLineParser: () => (/* reexport safe */ _opera_mjs__WEBPACK_IMPORTED_MODULE_4__.opera11StackLineParser),\n/* harmony export */   reverseAndStripFrames: () => (/* binding */ reverseAndStripFrames),\n/* harmony export */   winjsStackLineParser: () => (/* reexport safe */ _winjs_mjs__WEBPACK_IMPORTED_MODULE_2__.winjsStackLineParser)\n/* harmony export */ });\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\");\n/* harmony import */ var _chrome_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chrome.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/chrome.mjs\");\n/* harmony import */ var _winjs_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./winjs.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/winjs.mjs\");\n/* harmony import */ var _gecko_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gecko.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/gecko.mjs\");\n/* harmony import */ var _opera_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./opera.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/opera.mjs\");\n/* harmony import */ var _node_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./node.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/node.mjs\");\n\n\n\n\n\n\nconst WEBPACK_ERROR_REGEXP = /\\(error: (.*)\\)/;\nconst STACKTRACE_FRAME_LIMIT = 50;\nfunction reverseAndStripFrames(stack) {\n    if (!stack.length) return [];\n    const localStack = Array.from(stack);\n    localStack.reverse();\n    return localStack.slice(0, STACKTRACE_FRAME_LIMIT).map((frame)=>({\n            ...frame,\n            filename: frame.filename || getLastStackFrame(localStack).filename,\n            function: frame.function || _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION\n        }));\n}\nfunction getLastStackFrame(arr) {\n    return arr[arr.length - 1] || {};\n}\nfunction createStackParser(...parsers) {\n    return (stack, skipFirstLines = 0)=>{\n        const frames = [];\n        const lines = stack.split('\\n');\n        for(let i = skipFirstLines; i < lines.length; i++){\n            const line = lines[i];\n            if (line.length > 1024) continue;\n            const cleanedLine = WEBPACK_ERROR_REGEXP.test(line) ? line.replace(WEBPACK_ERROR_REGEXP, '$1') : line;\n            if (!cleanedLine.match(/\\S*Error: /)) {\n                for (const parser of parsers){\n                    const frame = parser(cleanedLine);\n                    if (frame) {\n                        frames.push(frame);\n                        break;\n                    }\n                }\n                if (frames.length >= STACKTRACE_FRAME_LIMIT) break;\n            }\n        }\n        return reverseAndStripFrames(frames);\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEM7QUFDTztBQUNGO0FBQ0E7QUFDMEI7QUFDNUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHVEQUFnQjtBQUN4RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxrQkFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM0TCIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVU5LTk9XTl9GVU5DVElPTiB9IGZyb20gXCIuL2Jhc2UubWpzXCI7XG5pbXBvcnQgeyBjaHJvbWVTdGFja0xpbmVQYXJzZXIgfSBmcm9tIFwiLi9jaHJvbWUubWpzXCI7XG5pbXBvcnQgeyB3aW5qc1N0YWNrTGluZVBhcnNlciB9IGZyb20gXCIuL3dpbmpzLm1qc1wiO1xuaW1wb3J0IHsgZ2Vja29TdGFja0xpbmVQYXJzZXIgfSBmcm9tIFwiLi9nZWNrby5tanNcIjtcbmltcG9ydCB7IG9wZXJhMTBTdGFja0xpbmVQYXJzZXIsIG9wZXJhMTFTdGFja0xpbmVQYXJzZXIgfSBmcm9tIFwiLi9vcGVyYS5tanNcIjtcbmltcG9ydCB7IG5vZGVTdGFja0xpbmVQYXJzZXIgfSBmcm9tIFwiLi9ub2RlLm1qc1wiO1xuY29uc3QgV0VCUEFDS19FUlJPUl9SRUdFWFAgPSAvXFwoZXJyb3I6ICguKilcXCkvO1xuY29uc3QgU1RBQ0tUUkFDRV9GUkFNRV9MSU1JVCA9IDUwO1xuZnVuY3Rpb24gcmV2ZXJzZUFuZFN0cmlwRnJhbWVzKHN0YWNrKSB7XG4gICAgaWYgKCFzdGFjay5sZW5ndGgpIHJldHVybiBbXTtcbiAgICBjb25zdCBsb2NhbFN0YWNrID0gQXJyYXkuZnJvbShzdGFjayk7XG4gICAgbG9jYWxTdGFjay5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIGxvY2FsU3RhY2suc2xpY2UoMCwgU1RBQ0tUUkFDRV9GUkFNRV9MSU1JVCkubWFwKChmcmFtZSk9Pih7XG4gICAgICAgICAgICAuLi5mcmFtZSxcbiAgICAgICAgICAgIGZpbGVuYW1lOiBmcmFtZS5maWxlbmFtZSB8fCBnZXRMYXN0U3RhY2tGcmFtZShsb2NhbFN0YWNrKS5maWxlbmFtZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uOiBmcmFtZS5mdW5jdGlvbiB8fCBVTktOT1dOX0ZVTkNUSU9OXG4gICAgICAgIH0pKTtcbn1cbmZ1bmN0aW9uIGdldExhc3RTdGFja0ZyYW1lKGFycikge1xuICAgIHJldHVybiBhcnJbYXJyLmxlbmd0aCAtIDFdIHx8IHt9O1xufVxuZnVuY3Rpb24gY3JlYXRlU3RhY2tQYXJzZXIoLi4ucGFyc2Vycykge1xuICAgIHJldHVybiAoc3RhY2ssIHNraXBGaXJzdExpbmVzID0gMCk9PntcbiAgICAgICAgY29uc3QgZnJhbWVzID0gW107XG4gICAgICAgIGNvbnN0IGxpbmVzID0gc3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgICBmb3IobGV0IGkgPSBza2lwRmlyc3RMaW5lczsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA+IDEwMjQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgY2xlYW5lZExpbmUgPSBXRUJQQUNLX0VSUk9SX1JFR0VYUC50ZXN0KGxpbmUpID8gbGluZS5yZXBsYWNlKFdFQlBBQ0tfRVJST1JfUkVHRVhQLCAnJDEnKSA6IGxpbmU7XG4gICAgICAgICAgICBpZiAoIWNsZWFuZWRMaW5lLm1hdGNoKC9cXFMqRXJyb3I6IC8pKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJzZXIgb2YgcGFyc2Vycyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gcGFyc2VyKGNsZWFuZWRMaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZXMucHVzaChmcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZnJhbWVzLmxlbmd0aCA+PSBTVEFDS1RSQUNFX0ZSQU1FX0xJTUlUKSBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV2ZXJzZUFuZFN0cmlwRnJhbWVzKGZyYW1lcyk7XG4gICAgfTtcbn1cbmV4cG9ydCB7IGNocm9tZVN0YWNrTGluZVBhcnNlciwgY3JlYXRlU3RhY2tQYXJzZXIsIGdlY2tvU3RhY2tMaW5lUGFyc2VyLCBub2RlU3RhY2tMaW5lUGFyc2VyLCBvcGVyYTEwU3RhY2tMaW5lUGFyc2VyLCBvcGVyYTExU3RhY2tMaW5lUGFyc2VyLCByZXZlcnNlQW5kU3RyaXBGcmFtZXMsIHdpbmpzU3RhY2tMaW5lUGFyc2VyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/index.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/node.mjs":
/*!*******************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/node.mjs ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nodeStackLineParser: () => (/* binding */ nodeStackLineParser)\n/* harmony export */ });\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\");\n\nconst FILENAME_MATCH = /^\\s*[-]{4,}$/;\nconst FULL_MATCH = /at (?:async )?(?:(.+?)\\s+\\()?(?:(.+):(\\d+):(\\d+)?|([^)]+))\\)?/;\nconst nodeStackLineParser = (line)=>{\n    const lineMatch = line.match(FULL_MATCH);\n    if (lineMatch) {\n        let object;\n        let method;\n        let functionName;\n        let typeName;\n        let methodName;\n        if (lineMatch[1]) {\n            functionName = lineMatch[1];\n            let methodStart = functionName.lastIndexOf('.');\n            if ('.' === functionName[methodStart - 1]) methodStart--;\n            if (methodStart > 0) {\n                object = functionName.slice(0, methodStart);\n                method = functionName.slice(methodStart + 1);\n                const objectEnd = object.indexOf('.Module');\n                if (objectEnd > 0) {\n                    functionName = functionName.slice(objectEnd + 1);\n                    object = object.slice(0, objectEnd);\n                }\n            }\n            typeName = void 0;\n        }\n        if (method) {\n            typeName = object;\n            methodName = method;\n        }\n        if ('<anonymous>' === method) {\n            methodName = void 0;\n            functionName = void 0;\n        }\n        if (void 0 === functionName) {\n            methodName = methodName || _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION;\n            functionName = typeName ? `${typeName}.${methodName}` : methodName;\n        }\n        let filename = lineMatch[2]?.startsWith('file://') ? lineMatch[2].slice(7) : lineMatch[2];\n        const isNative = 'native' === lineMatch[5];\n        if (filename?.match(/\\/[A-Z]:/)) filename = filename.slice(1);\n        if (!filename && lineMatch[5] && !isNative) filename = lineMatch[5];\n        return {\n            filename: filename ? decodeURI(filename) : void 0,\n            module: void 0,\n            function: functionName,\n            lineno: _parseIntOrUndefined(lineMatch[3]),\n            colno: _parseIntOrUndefined(lineMatch[4]),\n            in_app: filenameIsInApp(filename || '', isNative),\n            platform: \"node:javascript\"\n        };\n    }\n    if (line.match(FILENAME_MATCH)) return {\n        filename: line,\n        platform: \"node:javascript\"\n    };\n};\nfunction filenameIsInApp(filename, isNative = false) {\n    const isInternal = isNative || filename && !filename.startsWith('/') && !filename.match(/^[A-Z]:/) && !filename.startsWith('.') && !filename.match(/^[a-zA-Z]([a-zA-Z0-9.\\-+])*:\\/\\//);\n    return !isInternal && void 0 !== filename && !filename.includes('node_modules/');\n}\nfunction _parseIntOrUndefined(input) {\n    return parseInt(input || '', 10) || void 0;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9ub2RlLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUM5QyxnQ0FBZ0MsR0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsdURBQWdCO0FBQ3ZELHlDQUF5QyxTQUFTLEdBQUcsV0FBVztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDK0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL3BhcnNlcnMvbm9kZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVU5LTk9XTl9GVU5DVElPTiB9IGZyb20gXCIuL2Jhc2UubWpzXCI7XG5jb25zdCBGSUxFTkFNRV9NQVRDSCA9IC9eXFxzKlstXXs0LH0kLztcbmNvbnN0IEZVTExfTUFUQ0ggPSAvYXQgKD86YXN5bmMgKT8oPzooLis/KVxccytcXCgpPyg/OiguKyk6KFxcZCspOihcXGQrKT98KFteKV0rKSlcXCk/LztcbmNvbnN0IG5vZGVTdGFja0xpbmVQYXJzZXIgPSAobGluZSk9PntcbiAgICBjb25zdCBsaW5lTWF0Y2ggPSBsaW5lLm1hdGNoKEZVTExfTUFUQ0gpO1xuICAgIGlmIChsaW5lTWF0Y2gpIHtcbiAgICAgICAgbGV0IG9iamVjdDtcbiAgICAgICAgbGV0IG1ldGhvZDtcbiAgICAgICAgbGV0IGZ1bmN0aW9uTmFtZTtcbiAgICAgICAgbGV0IHR5cGVOYW1lO1xuICAgICAgICBsZXQgbWV0aG9kTmFtZTtcbiAgICAgICAgaWYgKGxpbmVNYXRjaFsxXSkge1xuICAgICAgICAgICAgZnVuY3Rpb25OYW1lID0gbGluZU1hdGNoWzFdO1xuICAgICAgICAgICAgbGV0IG1ldGhvZFN0YXJ0ID0gZnVuY3Rpb25OYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICAgICAgICBpZiAoJy4nID09PSBmdW5jdGlvbk5hbWVbbWV0aG9kU3RhcnQgLSAxXSkgbWV0aG9kU3RhcnQtLTtcbiAgICAgICAgICAgIGlmIChtZXRob2RTdGFydCA+IDApIHtcbiAgICAgICAgICAgICAgICBvYmplY3QgPSBmdW5jdGlvbk5hbWUuc2xpY2UoMCwgbWV0aG9kU3RhcnQpO1xuICAgICAgICAgICAgICAgIG1ldGhvZCA9IGZ1bmN0aW9uTmFtZS5zbGljZShtZXRob2RTdGFydCArIDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdEVuZCA9IG9iamVjdC5pbmRleE9mKCcuTW9kdWxlJyk7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdEVuZCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lID0gZnVuY3Rpb25OYW1lLnNsaWNlKG9iamVjdEVuZCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QgPSBvYmplY3Quc2xpY2UoMCwgb2JqZWN0RW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlTmFtZSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgICAgICB0eXBlTmFtZSA9IG9iamVjdDtcbiAgICAgICAgICAgIG1ldGhvZE5hbWUgPSBtZXRob2Q7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCc8YW5vbnltb3VzPicgPT09IG1ldGhvZCkge1xuICAgICAgICAgICAgbWV0aG9kTmFtZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwID09PSBmdW5jdGlvbk5hbWUpIHtcbiAgICAgICAgICAgIG1ldGhvZE5hbWUgPSBtZXRob2ROYW1lIHx8IFVOS05PV05fRlVOQ1RJT047XG4gICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSB0eXBlTmFtZSA/IGAke3R5cGVOYW1lfS4ke21ldGhvZE5hbWV9YCA6IG1ldGhvZE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZpbGVuYW1lID0gbGluZU1hdGNoWzJdPy5zdGFydHNXaXRoKCdmaWxlOi8vJykgPyBsaW5lTWF0Y2hbMl0uc2xpY2UoNykgOiBsaW5lTWF0Y2hbMl07XG4gICAgICAgIGNvbnN0IGlzTmF0aXZlID0gJ25hdGl2ZScgPT09IGxpbmVNYXRjaFs1XTtcbiAgICAgICAgaWYgKGZpbGVuYW1lPy5tYXRjaCgvXFwvW0EtWl06LykpIGZpbGVuYW1lID0gZmlsZW5hbWUuc2xpY2UoMSk7XG4gICAgICAgIGlmICghZmlsZW5hbWUgJiYgbGluZU1hdGNoWzVdICYmICFpc05hdGl2ZSkgZmlsZW5hbWUgPSBsaW5lTWF0Y2hbNV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWxlbmFtZTogZmlsZW5hbWUgPyBkZWNvZGVVUkkoZmlsZW5hbWUpIDogdm9pZCAwLFxuICAgICAgICAgICAgbW9kdWxlOiB2b2lkIDAsXG4gICAgICAgICAgICBmdW5jdGlvbjogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgbGluZW5vOiBfcGFyc2VJbnRPclVuZGVmaW5lZChsaW5lTWF0Y2hbM10pLFxuICAgICAgICAgICAgY29sbm86IF9wYXJzZUludE9yVW5kZWZpbmVkKGxpbmVNYXRjaFs0XSksXG4gICAgICAgICAgICBpbl9hcHA6IGZpbGVuYW1lSXNJbkFwcChmaWxlbmFtZSB8fCAnJywgaXNOYXRpdmUpLFxuICAgICAgICAgICAgcGxhdGZvcm06IFwibm9kZTpqYXZhc2NyaXB0XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGxpbmUubWF0Y2goRklMRU5BTUVfTUFUQ0gpKSByZXR1cm4ge1xuICAgICAgICBmaWxlbmFtZTogbGluZSxcbiAgICAgICAgcGxhdGZvcm06IFwibm9kZTpqYXZhc2NyaXB0XCJcbiAgICB9O1xufTtcbmZ1bmN0aW9uIGZpbGVuYW1lSXNJbkFwcChmaWxlbmFtZSwgaXNOYXRpdmUgPSBmYWxzZSkge1xuICAgIGNvbnN0IGlzSW50ZXJuYWwgPSBpc05hdGl2ZSB8fCBmaWxlbmFtZSAmJiAhZmlsZW5hbWUuc3RhcnRzV2l0aCgnLycpICYmICFmaWxlbmFtZS5tYXRjaCgvXltBLVpdOi8pICYmICFmaWxlbmFtZS5zdGFydHNXaXRoKCcuJykgJiYgIWZpbGVuYW1lLm1hdGNoKC9eW2EtekEtWl0oW2EtekEtWjAtOS5cXC0rXSkqOlxcL1xcLy8pO1xuICAgIHJldHVybiAhaXNJbnRlcm5hbCAmJiB2b2lkIDAgIT09IGZpbGVuYW1lICYmICFmaWxlbmFtZS5pbmNsdWRlcygnbm9kZV9tb2R1bGVzLycpO1xufVxuZnVuY3Rpb24gX3BhcnNlSW50T3JVbmRlZmluZWQoaW5wdXQpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoaW5wdXQgfHwgJycsIDEwKSB8fCB2b2lkIDA7XG59XG5leHBvcnQgeyBub2RlU3RhY2tMaW5lUGFyc2VyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/node.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/opera.mjs":
/*!********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/opera.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   opera10StackLineParser: () => (/* binding */ opera10StackLineParser),\n/* harmony export */   opera11StackLineParser: () => (/* binding */ opera11StackLineParser)\n/* harmony export */ });\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\");\n\nconst opera10Regex = / line (\\d+).*script (?:in )?(\\S+)(?:: in function (\\S+))?$/i;\nconst opera10StackLineParser = (line)=>{\n    const parts = opera10Regex.exec(line);\n    return parts ? (0,_base_mjs__WEBPACK_IMPORTED_MODULE_0__.createFrame)(parts[2], parts[3] || _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION, +parts[1]) : void 0;\n};\nconst opera11Regex = / line (\\d+), column (\\d+)\\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\\(.*\\))? in (.*):\\s*$/i;\nconst opera11StackLineParser = (line)=>{\n    const parts = opera11Regex.exec(line);\n    return parts ? (0,_base_mjs__WEBPACK_IMPORTED_MODULE_0__.createFrame)(parts[5], parts[3] || parts[4] || _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION, +parts[1], +parts[2]) : void 0;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9vcGVyYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzREFBVyx1QkFBdUIsdURBQWdCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFXLG1DQUFtQyx1REFBZ0I7QUFDakY7QUFDMEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL3BhcnNlcnMvb3BlcmEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVOS05PV05fRlVOQ1RJT04sIGNyZWF0ZUZyYW1lIH0gZnJvbSBcIi4vYmFzZS5tanNcIjtcbmNvbnN0IG9wZXJhMTBSZWdleCA9IC8gbGluZSAoXFxkKykuKnNjcmlwdCAoPzppbiApPyhcXFMrKSg/OjogaW4gZnVuY3Rpb24gKFxcUyspKT8kL2k7XG5jb25zdCBvcGVyYTEwU3RhY2tMaW5lUGFyc2VyID0gKGxpbmUpPT57XG4gICAgY29uc3QgcGFydHMgPSBvcGVyYTEwUmVnZXguZXhlYyhsaW5lKTtcbiAgICByZXR1cm4gcGFydHMgPyBjcmVhdGVGcmFtZShwYXJ0c1syXSwgcGFydHNbM10gfHwgVU5LTk9XTl9GVU5DVElPTiwgK3BhcnRzWzFdKSA6IHZvaWQgMDtcbn07XG5jb25zdCBvcGVyYTExUmVnZXggPSAvIGxpbmUgKFxcZCspLCBjb2x1bW4gKFxcZCspXFxzKig/OmluICg/Ojxhbm9ueW1vdXMgZnVuY3Rpb246IChbXj5dKyk+fChbXildKykpXFwoLipcXCkpPyBpbiAoLiopOlxccyokL2k7XG5jb25zdCBvcGVyYTExU3RhY2tMaW5lUGFyc2VyID0gKGxpbmUpPT57XG4gICAgY29uc3QgcGFydHMgPSBvcGVyYTExUmVnZXguZXhlYyhsaW5lKTtcbiAgICByZXR1cm4gcGFydHMgPyBjcmVhdGVGcmFtZShwYXJ0c1s1XSwgcGFydHNbM10gfHwgcGFydHNbNF0gfHwgVU5LTk9XTl9GVU5DVElPTiwgK3BhcnRzWzFdLCArcGFydHNbMl0pIDogdm9pZCAwO1xufTtcbmV4cG9ydCB7IG9wZXJhMTBTdGFja0xpbmVQYXJzZXIsIG9wZXJhMTFTdGFja0xpbmVQYXJzZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/opera.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/safari.mjs":
/*!*********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/safari.mjs ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractSafariExtensionDetails: () => (/* binding */ extractSafariExtensionDetails)\n/* harmony export */ });\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\");\n\nconst extractSafariExtensionDetails = (func, filename)=>{\n    const isSafariExtension = -1 !== func.indexOf('safari-extension');\n    const isSafariWebExtension = -1 !== func.indexOf('safari-web-extension');\n    return isSafariExtension || isSafariWebExtension ? [\n        -1 !== func.indexOf('@') ? func.split('@')[0] : _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION,\n        isSafariExtension ? `safari-extension:${filename}` : `safari-web-extension:${filename}`\n    ] : [\n        func,\n        filename\n    ];\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy9zYWZhcmkubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHVEQUFnQjtBQUN4RSxnREFBZ0QsU0FBUyw0QkFBNEIsU0FBUztBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3lDIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC9lcnJvci10cmFja2luZy9wYXJzZXJzL3NhZmFyaS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVU5LTk9XTl9GVU5DVElPTiB9IGZyb20gXCIuL2Jhc2UubWpzXCI7XG5jb25zdCBleHRyYWN0U2FmYXJpRXh0ZW5zaW9uRGV0YWlscyA9IChmdW5jLCBmaWxlbmFtZSk9PntcbiAgICBjb25zdCBpc1NhZmFyaUV4dGVuc2lvbiA9IC0xICE9PSBmdW5jLmluZGV4T2YoJ3NhZmFyaS1leHRlbnNpb24nKTtcbiAgICBjb25zdCBpc1NhZmFyaVdlYkV4dGVuc2lvbiA9IC0xICE9PSBmdW5jLmluZGV4T2YoJ3NhZmFyaS13ZWItZXh0ZW5zaW9uJyk7XG4gICAgcmV0dXJuIGlzU2FmYXJpRXh0ZW5zaW9uIHx8IGlzU2FmYXJpV2ViRXh0ZW5zaW9uID8gW1xuICAgICAgICAtMSAhPT0gZnVuYy5pbmRleE9mKCdAJykgPyBmdW5jLnNwbGl0KCdAJylbMF0gOiBVTktOT1dOX0ZVTkNUSU9OLFxuICAgICAgICBpc1NhZmFyaUV4dGVuc2lvbiA/IGBzYWZhcmktZXh0ZW5zaW9uOiR7ZmlsZW5hbWV9YCA6IGBzYWZhcmktd2ViLWV4dGVuc2lvbjoke2ZpbGVuYW1lfWBcbiAgICBdIDogW1xuICAgICAgICBmdW5jLFxuICAgICAgICBmaWxlbmFtZVxuICAgIF07XG59O1xuZXhwb3J0IHsgZXh0cmFjdFNhZmFyaUV4dGVuc2lvbkRldGFpbHMgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/safari.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/winjs.mjs":
/*!********************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/winjs.mjs ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   winjsStackLineParser: () => (/* binding */ winjsStackLineParser)\n/* harmony export */ });\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/base.mjs\");\n\nconst winjsRegex = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:[-a-z]+):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nconst winjsStackLineParser = (line)=>{\n    const parts = winjsRegex.exec(line);\n    return parts ? (0,_base_mjs__WEBPACK_IMPORTED_MODULE_0__.createFrame)(parts[2], parts[1] || _base_mjs__WEBPACK_IMPORTED_MODULE_0__.UNKNOWN_FUNCTION, +parts[3], parts[4] ? +parts[4] : void 0) : void 0;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvcGFyc2Vycy93aW5qcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFXLHVCQUF1Qix1REFBZ0I7QUFDckU7QUFDZ0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L2Vycm9yLXRyYWNraW5nL3BhcnNlcnMvd2luanMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVOS05PV05fRlVOQ1RJT04sIGNyZWF0ZUZyYW1lIH0gZnJvbSBcIi4vYmFzZS5tanNcIjtcbmNvbnN0IHdpbmpzUmVnZXggPSAvXlxccyphdCAoPzooKD86XFxbb2JqZWN0IG9iamVjdFxcXSk/LispICk/XFwoPygoPzpbLWEtel0rKTouKj8pOihcXGQrKSg/OjooXFxkKykpP1xcKT9cXHMqJC9pO1xuY29uc3Qgd2luanNTdGFja0xpbmVQYXJzZXIgPSAobGluZSk9PntcbiAgICBjb25zdCBwYXJ0cyA9IHdpbmpzUmVnZXguZXhlYyhsaW5lKTtcbiAgICByZXR1cm4gcGFydHMgPyBjcmVhdGVGcmFtZShwYXJ0c1syXSwgcGFydHNbMV0gfHwgVU5LTk9XTl9GVU5DVElPTiwgK3BhcnRzWzNdLCBwYXJ0c1s0XSA/ICtwYXJ0c1s0XSA6IHZvaWQgMCkgOiB2b2lkIDA7XG59O1xuZXhwb3J0IHsgd2luanNTdGFja0xpbmVQYXJzZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/parsers/winjs.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/types.mjs":
/*!************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/types.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   severityLevels: () => (/* binding */ severityLevels)\n/* harmony export */ });\nconst severityLevels = [\n    'fatal',\n    'error',\n    'warning',\n    'log',\n    'info',\n    'debug'\n];\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvdHlwZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzBCIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC9lcnJvci10cmFja2luZy90eXBlcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2V2ZXJpdHlMZXZlbHMgPSBbXG4gICAgJ2ZhdGFsJyxcbiAgICAnZXJyb3InLFxuICAgICd3YXJuaW5nJyxcbiAgICAnbG9nJyxcbiAgICAnaW5mbycsXG4gICAgJ2RlYnVnJ1xuXTtcbmV4cG9ydCB7IHNldmVyaXR5TGV2ZWxzIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/types.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/utils.mjs":
/*!************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/utils.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReduceableCache: () => (/* binding */ ReduceableCache)\n/* harmony export */ });\nclass ReduceableCache {\n    constructor(_maxSize){\n        this._maxSize = _maxSize;\n        this._cache = new Map();\n    }\n    get(key) {\n        const value = this._cache.get(key);\n        if (void 0 === value) return;\n        this._cache.delete(key);\n        this._cache.set(key, value);\n        return value;\n    }\n    set(key, value) {\n        this._cache.set(key, value);\n    }\n    reduce() {\n        while(this._cache.size >= this._maxSize){\n            const value = this._cache.keys().next().value;\n            if (value) this._cache.delete(value);\n        }\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMyQiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXJyb3ItdHJhY2tpbmcvdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFJlZHVjZWFibGVDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoX21heFNpemUpe1xuICAgICAgICB0aGlzLl9tYXhTaXplID0gX21heFNpemU7XG4gICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHZhbHVlKSByZXR1cm47XG4gICAgICAgIHRoaXMuX2NhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgICB0aGlzLl9jYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZWR1Y2UoKSB7XG4gICAgICAgIHdoaWxlKHRoaXMuX2NhY2hlLnNpemUgPj0gdGhpcy5fbWF4U2l6ZSl7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX2NhY2hlLmtleXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHRoaXMuX2NhY2hlLmRlbGV0ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgeyBSZWR1Y2VhYmxlQ2FjaGUgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/utils.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/eventemitter.mjs":
/*!****************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/eventemitter.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SimpleEventEmitter: () => (/* binding */ SimpleEventEmitter)\n/* harmony export */ });\nclass SimpleEventEmitter {\n    constructor(){\n        this.events = {};\n        this.events = {};\n    }\n    on(event, listener) {\n        if (!this.events[event]) this.events[event] = [];\n        this.events[event].push(listener);\n        return ()=>{\n            this.events[event] = this.events[event].filter((x)=>x !== listener);\n        };\n    }\n    emit(event, payload) {\n        for (const listener of this.events[event] || [])listener(payload);\n        for (const listener of this.events['*'] || [])listener(event, payload);\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXZlbnRlbWl0dGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM4QiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZXZlbnRlbWl0dGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTaW1wbGVFdmVudEVtaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMuZXZlbnRzID0ge307XG4gICAgICAgIHRoaXMuZXZlbnRzID0ge307XG4gICAgfVxuICAgIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzW2V2ZW50XSkgdGhpcy5ldmVudHNbZXZlbnRdID0gW107XG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuICgpPT57XG4gICAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0gPSB0aGlzLmV2ZW50c1tldmVudF0uZmlsdGVyKCh4KT0+eCAhPT0gbGlzdGVuZXIpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBlbWl0KGV2ZW50LCBwYXlsb2FkKSB7XG4gICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5ldmVudHNbZXZlbnRdIHx8IFtdKWxpc3RlbmVyKHBheWxvYWQpO1xuICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuZXZlbnRzWycqJ10gfHwgW10pbGlzdGVuZXIoZXZlbnQsIHBheWxvYWQpO1xuICAgIH1cbn1cbmV4cG9ydCB7IFNpbXBsZUV2ZW50RW1pdHRlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/eventemitter.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/featureFlagUtils.mjs":
/*!********************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/featureFlagUtils.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFlagsResponseFromFlagsAndPayloads: () => (/* binding */ createFlagsResponseFromFlagsAndPayloads),\n/* harmony export */   getFeatureFlagValue: () => (/* binding */ getFeatureFlagValue),\n/* harmony export */   getFlagDetailsFromFlagsAndPayloads: () => (/* binding */ getFlagDetailsFromFlagsAndPayloads),\n/* harmony export */   getFlagValuesFromFlags: () => (/* binding */ getFlagValuesFromFlags),\n/* harmony export */   getPayloadsFromFlags: () => (/* binding */ getPayloadsFromFlags),\n/* harmony export */   normalizeFlagsResponse: () => (/* binding */ normalizeFlagsResponse),\n/* harmony export */   parsePayload: () => (/* binding */ parsePayload),\n/* harmony export */   updateFlagValue: () => (/* binding */ updateFlagValue)\n/* harmony export */ });\nconst normalizeFlagsResponse = (flagsResponse)=>{\n    if ('flags' in flagsResponse) {\n        const featureFlags = getFlagValuesFromFlags(flagsResponse.flags);\n        const featureFlagPayloads = getPayloadsFromFlags(flagsResponse.flags);\n        return {\n            ...flagsResponse,\n            featureFlags,\n            featureFlagPayloads\n        };\n    }\n    {\n        const featureFlags = flagsResponse.featureFlags ?? {};\n        const featureFlagPayloads = Object.fromEntries(Object.entries(flagsResponse.featureFlagPayloads || {}).map(([k, v])=>[\n                k,\n                parsePayload(v)\n            ]));\n        const flags = Object.fromEntries(Object.entries(featureFlags).map(([key, value])=>[\n                key,\n                getFlagDetailFromFlagAndPayload(key, value, featureFlagPayloads[key])\n            ]));\n        return {\n            ...flagsResponse,\n            featureFlags,\n            featureFlagPayloads,\n            flags\n        };\n    }\n};\nfunction getFlagDetailFromFlagAndPayload(key, value, payload) {\n    return {\n        key: key,\n        enabled: 'string' == typeof value ? true : value,\n        variant: 'string' == typeof value ? value : void 0,\n        reason: void 0,\n        metadata: {\n            id: void 0,\n            version: void 0,\n            payload: payload ? JSON.stringify(payload) : void 0,\n            description: void 0\n        }\n    };\n}\nconst getFlagValuesFromFlags = (flags)=>Object.fromEntries(Object.entries(flags ?? {}).map(([key, detail])=>[\n            key,\n            getFeatureFlagValue(detail)\n        ]).filter(([, value])=>void 0 !== value));\nconst getPayloadsFromFlags = (flags)=>{\n    const safeFlags = flags ?? {};\n    return Object.fromEntries(Object.keys(safeFlags).filter((flag)=>{\n        const details = safeFlags[flag];\n        return details.enabled && details.metadata && void 0 !== details.metadata.payload;\n    }).map((flag)=>{\n        const payload = safeFlags[flag].metadata?.payload;\n        return [\n            flag,\n            payload ? parsePayload(payload) : void 0\n        ];\n    }));\n};\nconst getFlagDetailsFromFlagsAndPayloads = (flagsResponse)=>{\n    const flags = flagsResponse.featureFlags ?? {};\n    const payloads = flagsResponse.featureFlagPayloads ?? {};\n    return Object.fromEntries(Object.entries(flags).map(([key, value])=>[\n            key,\n            {\n                key: key,\n                enabled: 'string' == typeof value ? true : value,\n                variant: 'string' == typeof value ? value : void 0,\n                reason: void 0,\n                metadata: {\n                    id: void 0,\n                    version: void 0,\n                    payload: payloads?.[key] ? JSON.stringify(payloads[key]) : void 0,\n                    description: void 0\n                }\n            }\n        ]));\n};\nconst getFeatureFlagValue = (detail)=>void 0 === detail ? void 0 : detail.variant ?? detail.enabled;\nconst parsePayload = (response)=>{\n    if ('string' != typeof response) return response;\n    try {\n        return JSON.parse(response);\n    } catch  {\n        return response;\n    }\n};\nconst createFlagsResponseFromFlagsAndPayloads = (featureFlags, featureFlagPayloads)=>{\n    const allKeys = [\n        ...new Set([\n            ...Object.keys(featureFlags ?? {}),\n            ...Object.keys(featureFlagPayloads ?? {})\n        ])\n    ];\n    const enabledFlags = allKeys.filter((flag)=>!!featureFlags[flag] || !!featureFlagPayloads[flag]).reduce((res, key)=>(res[key] = featureFlags[key] ?? true, res), {});\n    const flagDetails = {\n        featureFlags: enabledFlags,\n        featureFlagPayloads: featureFlagPayloads ?? {}\n    };\n    return normalizeFlagsResponse(flagDetails);\n};\nconst updateFlagValue = (flag, value)=>({\n        ...flag,\n        enabled: getEnabledFromValue(value),\n        variant: getVariantFromValue(value)\n    });\nfunction getEnabledFromValue(value) {\n    return 'string' == typeof value ? true : value;\n}\nfunction getVariantFromValue(value) {\n    return 'string' == typeof value ? value : void 0;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZmVhdHVyZUZsYWdVdGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2R0FBNkc7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0EsdUtBQXVLO0FBQ3ZLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNpTiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZmVhdHVyZUZsYWdVdGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgbm9ybWFsaXplRmxhZ3NSZXNwb25zZSA9IChmbGFnc1Jlc3BvbnNlKT0+e1xuICAgIGlmICgnZmxhZ3MnIGluIGZsYWdzUmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZUZsYWdzID0gZ2V0RmxhZ1ZhbHVlc0Zyb21GbGFncyhmbGFnc1Jlc3BvbnNlLmZsYWdzKTtcbiAgICAgICAgY29uc3QgZmVhdHVyZUZsYWdQYXlsb2FkcyA9IGdldFBheWxvYWRzRnJvbUZsYWdzKGZsYWdzUmVzcG9uc2UuZmxhZ3MpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmxhZ3NSZXNwb25zZSxcbiAgICAgICAgICAgIGZlYXR1cmVGbGFncyxcbiAgICAgICAgICAgIGZlYXR1cmVGbGFnUGF5bG9hZHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAge1xuICAgICAgICBjb25zdCBmZWF0dXJlRmxhZ3MgPSBmbGFnc1Jlc3BvbnNlLmZlYXR1cmVGbGFncyA/PyB7fTtcbiAgICAgICAgY29uc3QgZmVhdHVyZUZsYWdQYXlsb2FkcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhmbGFnc1Jlc3BvbnNlLmZlYXR1cmVGbGFnUGF5bG9hZHMgfHwge30pLm1hcCgoW2ssIHZdKT0+W1xuICAgICAgICAgICAgICAgIGssXG4gICAgICAgICAgICAgICAgcGFyc2VQYXlsb2FkKHYpXG4gICAgICAgICAgICBdKSk7XG4gICAgICAgIGNvbnN0IGZsYWdzID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGZlYXR1cmVGbGFncykubWFwKChba2V5LCB2YWx1ZV0pPT5bXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIGdldEZsYWdEZXRhaWxGcm9tRmxhZ0FuZFBheWxvYWQoa2V5LCB2YWx1ZSwgZmVhdHVyZUZsYWdQYXlsb2Fkc1trZXldKVxuICAgICAgICAgICAgXSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmxhZ3NSZXNwb25zZSxcbiAgICAgICAgICAgIGZlYXR1cmVGbGFncyxcbiAgICAgICAgICAgIGZlYXR1cmVGbGFnUGF5bG9hZHMsXG4gICAgICAgICAgICBmbGFnc1xuICAgICAgICB9O1xuICAgIH1cbn07XG5mdW5jdGlvbiBnZXRGbGFnRGV0YWlsRnJvbUZsYWdBbmRQYXlsb2FkKGtleSwgdmFsdWUsIHBheWxvYWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgZW5hYmxlZDogJ3N0cmluZycgPT0gdHlwZW9mIHZhbHVlID8gdHJ1ZSA6IHZhbHVlLFxuICAgICAgICB2YXJpYW50OiAnc3RyaW5nJyA9PSB0eXBlb2YgdmFsdWUgPyB2YWx1ZSA6IHZvaWQgMCxcbiAgICAgICAgcmVhc29uOiB2b2lkIDAsXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICBpZDogdm9pZCAwLFxuICAgICAgICAgICAgdmVyc2lvbjogdm9pZCAwLFxuICAgICAgICAgICAgcGF5bG9hZDogcGF5bG9hZCA/IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpIDogdm9pZCAwLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHZvaWQgMFxuICAgICAgICB9XG4gICAgfTtcbn1cbmNvbnN0IGdldEZsYWdWYWx1ZXNGcm9tRmxhZ3MgPSAoZmxhZ3MpPT5PYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoZmxhZ3MgPz8ge30pLm1hcCgoW2tleSwgZGV0YWlsXSk9PltcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGdldEZlYXR1cmVGbGFnVmFsdWUoZGV0YWlsKVxuICAgICAgICBdKS5maWx0ZXIoKFssIHZhbHVlXSk9PnZvaWQgMCAhPT0gdmFsdWUpKTtcbmNvbnN0IGdldFBheWxvYWRzRnJvbUZsYWdzID0gKGZsYWdzKT0+e1xuICAgIGNvbnN0IHNhZmVGbGFncyA9IGZsYWdzID8/IHt9O1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmtleXMoc2FmZUZsYWdzKS5maWx0ZXIoKGZsYWcpPT57XG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBzYWZlRmxhZ3NbZmxhZ107XG4gICAgICAgIHJldHVybiBkZXRhaWxzLmVuYWJsZWQgJiYgZGV0YWlscy5tZXRhZGF0YSAmJiB2b2lkIDAgIT09IGRldGFpbHMubWV0YWRhdGEucGF5bG9hZDtcbiAgICB9KS5tYXAoKGZsYWcpPT57XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBzYWZlRmxhZ3NbZmxhZ10ubWV0YWRhdGE/LnBheWxvYWQ7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBmbGFnLFxuICAgICAgICAgICAgcGF5bG9hZCA/IHBhcnNlUGF5bG9hZChwYXlsb2FkKSA6IHZvaWQgMFxuICAgICAgICBdO1xuICAgIH0pKTtcbn07XG5jb25zdCBnZXRGbGFnRGV0YWlsc0Zyb21GbGFnc0FuZFBheWxvYWRzID0gKGZsYWdzUmVzcG9uc2UpPT57XG4gICAgY29uc3QgZmxhZ3MgPSBmbGFnc1Jlc3BvbnNlLmZlYXR1cmVGbGFncyA/PyB7fTtcbiAgICBjb25zdCBwYXlsb2FkcyA9IGZsYWdzUmVzcG9uc2UuZmVhdHVyZUZsYWdQYXlsb2FkcyA/PyB7fTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGZsYWdzKS5tYXAoKFtrZXksIHZhbHVlXSk9PltcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgICAgICBlbmFibGVkOiAnc3RyaW5nJyA9PSB0eXBlb2YgdmFsdWUgPyB0cnVlIDogdmFsdWUsXG4gICAgICAgICAgICAgICAgdmFyaWFudDogJ3N0cmluZycgPT0gdHlwZW9mIHZhbHVlID8gdmFsdWUgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgcmVhc29uOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBwYXlsb2Fkcz8uW2tleV0gPyBKU09OLnN0cmluZ2lmeShwYXlsb2Fkc1trZXldKSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHZvaWQgMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSkpO1xufTtcbmNvbnN0IGdldEZlYXR1cmVGbGFnVmFsdWUgPSAoZGV0YWlsKT0+dm9pZCAwID09PSBkZXRhaWwgPyB2b2lkIDAgOiBkZXRhaWwudmFyaWFudCA/PyBkZXRhaWwuZW5hYmxlZDtcbmNvbnN0IHBhcnNlUGF5bG9hZCA9IChyZXNwb25zZSk9PntcbiAgICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIHJlc3BvbnNlKSByZXR1cm4gcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgIH0gY2F0Y2ggIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbn07XG5jb25zdCBjcmVhdGVGbGFnc1Jlc3BvbnNlRnJvbUZsYWdzQW5kUGF5bG9hZHMgPSAoZmVhdHVyZUZsYWdzLCBmZWF0dXJlRmxhZ1BheWxvYWRzKT0+e1xuICAgIGNvbnN0IGFsbEtleXMgPSBbXG4gICAgICAgIC4uLm5ldyBTZXQoW1xuICAgICAgICAgICAgLi4uT2JqZWN0LmtleXMoZmVhdHVyZUZsYWdzID8/IHt9KSxcbiAgICAgICAgICAgIC4uLk9iamVjdC5rZXlzKGZlYXR1cmVGbGFnUGF5bG9hZHMgPz8ge30pXG4gICAgICAgIF0pXG4gICAgXTtcbiAgICBjb25zdCBlbmFibGVkRmxhZ3MgPSBhbGxLZXlzLmZpbHRlcigoZmxhZyk9PiEhZmVhdHVyZUZsYWdzW2ZsYWddIHx8ICEhZmVhdHVyZUZsYWdQYXlsb2Fkc1tmbGFnXSkucmVkdWNlKChyZXMsIGtleSk9PihyZXNba2V5XSA9IGZlYXR1cmVGbGFnc1trZXldID8/IHRydWUsIHJlcyksIHt9KTtcbiAgICBjb25zdCBmbGFnRGV0YWlscyA9IHtcbiAgICAgICAgZmVhdHVyZUZsYWdzOiBlbmFibGVkRmxhZ3MsXG4gICAgICAgIGZlYXR1cmVGbGFnUGF5bG9hZHM6IGZlYXR1cmVGbGFnUGF5bG9hZHMgPz8ge31cbiAgICB9O1xuICAgIHJldHVybiBub3JtYWxpemVGbGFnc1Jlc3BvbnNlKGZsYWdEZXRhaWxzKTtcbn07XG5jb25zdCB1cGRhdGVGbGFnVmFsdWUgPSAoZmxhZywgdmFsdWUpPT4oe1xuICAgICAgICAuLi5mbGFnLFxuICAgICAgICBlbmFibGVkOiBnZXRFbmFibGVkRnJvbVZhbHVlKHZhbHVlKSxcbiAgICAgICAgdmFyaWFudDogZ2V0VmFyaWFudEZyb21WYWx1ZSh2YWx1ZSlcbiAgICB9KTtcbmZ1bmN0aW9uIGdldEVuYWJsZWRGcm9tVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gJ3N0cmluZycgPT0gdHlwZW9mIHZhbHVlID8gdHJ1ZSA6IHZhbHVlO1xufVxuZnVuY3Rpb24gZ2V0VmFyaWFudEZyb21WYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiAnc3RyaW5nJyA9PSB0eXBlb2YgdmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcbn1cbmV4cG9ydCB7IGNyZWF0ZUZsYWdzUmVzcG9uc2VGcm9tRmxhZ3NBbmRQYXlsb2FkcywgZ2V0RmVhdHVyZUZsYWdWYWx1ZSwgZ2V0RmxhZ0RldGFpbHNGcm9tRmxhZ3NBbmRQYXlsb2FkcywgZ2V0RmxhZ1ZhbHVlc0Zyb21GbGFncywgZ2V0UGF5bG9hZHNGcm9tRmxhZ3MsIG5vcm1hbGl6ZUZsYWdzUmVzcG9uc2UsIHBhcnNlUGF5bG9hZCwgdXBkYXRlRmxhZ1ZhbHVlIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/featureFlagUtils.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/gzip.mjs":
/*!********************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/gzip.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gzipCompress: () => (/* binding */ gzipCompress),\n/* harmony export */   isGzipSupported: () => (/* binding */ isGzipSupported)\n/* harmony export */ });\nfunction isGzipSupported() {\n    return 'CompressionStream' in globalThis;\n}\nasync function gzipCompress(input, isDebug = true) {\n    try {\n        const dataStream = new Blob([\n            input\n        ], {\n            type: 'text/plain'\n        }).stream();\n        const compressedStream = dataStream.pipeThrough(new CompressionStream('gzip'));\n        return await new Response(compressedStream).blob();\n    } catch (error) {\n        if (isDebug) console.error('Failed to gzip compress data', error);\n        return null;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZ3ppcC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUN5QyIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvZ3ppcC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaXNHemlwU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiAnQ29tcHJlc3Npb25TdHJlYW0nIGluIGdsb2JhbFRoaXM7XG59XG5hc3luYyBmdW5jdGlvbiBnemlwQ29tcHJlc3MoaW5wdXQsIGlzRGVidWcgPSB0cnVlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YVN0cmVhbSA9IG5ldyBCbG9iKFtcbiAgICAgICAgICAgIGlucHV0XG4gICAgICAgIF0sIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluJ1xuICAgICAgICB9KS5zdHJlYW0oKTtcbiAgICAgICAgY29uc3QgY29tcHJlc3NlZFN0cmVhbSA9IGRhdGFTdHJlYW0ucGlwZVRocm91Z2gobmV3IENvbXByZXNzaW9uU3RyZWFtKCdnemlwJykpO1xuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFJlc3BvbnNlKGNvbXByZXNzZWRTdHJlYW0pLmJsb2IoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaXNEZWJ1ZykgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGd6aXAgY29tcHJlc3MgZGF0YScsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZXhwb3J0IHsgZ3ppcENvbXByZXNzLCBpc0d6aXBTdXBwb3J0ZWQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/gzip.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs":
/*!*********************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionStepStringMatching: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.ActionStepStringMatching),\n/* harmony export */   BucketedRateLimiter: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.BucketedRateLimiter),\n/* harmony export */   Compression: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.Compression),\n/* harmony export */   ErrorTracking: () => (/* reexport module object */ _error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_6__),\n/* harmony export */   PostHogCore: () => (/* reexport safe */ _posthog_core_mjs__WEBPACK_IMPORTED_MODULE_3__.PostHogCore),\n/* harmony export */   PostHogCoreStateless: () => (/* reexport safe */ _posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogCoreStateless),\n/* harmony export */   PostHogPersistedProperty: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.PostHogPersistedProperty),\n/* harmony export */   PromiseQueue: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.PromiseQueue),\n/* harmony export */   QuotaLimitedFeature: () => (/* reexport safe */ _posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_4__.QuotaLimitedFeature),\n/* harmony export */   STRING_FORMAT: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.STRING_FORMAT),\n/* harmony export */   SurveyMatchType: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyMatchType),\n/* harmony export */   SurveyPosition: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyPosition),\n/* harmony export */   SurveyQuestionBranchingType: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyQuestionBranchingType),\n/* harmony export */   SurveyQuestionDescriptionContentType: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyQuestionDescriptionContentType),\n/* harmony export */   SurveyQuestionType: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyQuestionType),\n/* harmony export */   SurveyRatingDisplay: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyRatingDisplay),\n/* harmony export */   SurveyType: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyType),\n/* harmony export */   SurveyWidgetType: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.SurveyWidgetType),\n/* harmony export */   allSettled: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.allSettled),\n/* harmony export */   assert: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.assert),\n/* harmony export */   clampToRange: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.clampToRange),\n/* harmony export */   currentISOTime: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.currentISOTime),\n/* harmony export */   currentTimestamp: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.currentTimestamp),\n/* harmony export */   getFeatureFlagValue: () => (/* reexport safe */ _featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.getFeatureFlagValue),\n/* harmony export */   getFetch: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.getFetch),\n/* harmony export */   hasOwnProperty: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.hasOwnProperty),\n/* harmony export */   includes: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.includes),\n/* harmony export */   isArray: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isArray),\n/* harmony export */   isBoolean: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isBoolean),\n/* harmony export */   isBuiltin: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isBuiltin),\n/* harmony export */   isDistinctIdStringLike: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isDistinctIdStringLike),\n/* harmony export */   isEmptyObject: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isEmptyObject),\n/* harmony export */   isEmptyString: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isEmptyString),\n/* harmony export */   isError: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isError),\n/* harmony export */   isErrorEvent: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isErrorEvent),\n/* harmony export */   isEvent: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isEvent),\n/* harmony export */   isFile: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isFile),\n/* harmony export */   isFormData: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isFormData),\n/* harmony export */   isFunction: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isFunction),\n/* harmony export */   isInstanceOf: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isInstanceOf),\n/* harmony export */   isKnownUnsafeEditableEvent: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isKnownUnsafeEditableEvent),\n/* harmony export */   isNativeFunction: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isNativeFunction),\n/* harmony export */   isNoLike: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isNoLike),\n/* harmony export */   isNull: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isNull),\n/* harmony export */   isNullish: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isNullish),\n/* harmony export */   isNumber: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isNumber),\n/* harmony export */   isObject: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isObject),\n/* harmony export */   isPlainError: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isPlainError),\n/* harmony export */   isPlainObject: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isPlainObject),\n/* harmony export */   isPrimitive: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isPrimitive),\n/* harmony export */   isPromise: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isPromise),\n/* harmony export */   isString: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isString),\n/* harmony export */   isUndefined: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isUndefined),\n/* harmony export */   isYesLike: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.isYesLike),\n/* harmony export */   knownUnsafeEditableEvent: () => (/* reexport safe */ _types_mjs__WEBPACK_IMPORTED_MODULE_5__.knownUnsafeEditableEvent),\n/* harmony export */   logFlushError: () => (/* reexport safe */ _posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_4__.logFlushError),\n/* harmony export */   maybeAdd: () => (/* reexport safe */ _posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_4__.maybeAdd),\n/* harmony export */   noLikeValues: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.noLikeValues),\n/* harmony export */   removeTrailingSlash: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.removeTrailingSlash),\n/* harmony export */   retriable: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.retriable),\n/* harmony export */   safeSetTimeout: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.safeSetTimeout),\n/* harmony export */   stripLeadingDollar: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.stripLeadingDollar),\n/* harmony export */   trim: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.trim),\n/* harmony export */   uuidv7: () => (/* reexport safe */ _vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_1__.uuidv7),\n/* harmony export */   yesLikeValues: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.yesLikeValues)\n/* harmony export */ });\n/* harmony import */ var _featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./featureFlagUtils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/featureFlagUtils.mjs\");\n/* harmony import */ var _vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vendor/uuidv7.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/vendor/uuidv7.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n/* harmony import */ var _posthog_core_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./posthog-core.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core.mjs\");\n/* harmony import */ var _posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./posthog-core-stateless.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core-stateless.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./types.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/types.mjs\");\n/* harmony import */ var _error_tracking_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./error-tracking/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/error-tracking/index.mjs\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RDtBQUNoQjtBQUNYO0FBQ0M7QUFDVTtBQUNqQjtBQUNpRjtBQUNXIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RmVhdHVyZUZsYWdWYWx1ZSB9IGZyb20gXCIuL2ZlYXR1cmVGbGFnVXRpbHMubWpzXCI7XG5pbXBvcnQgeyB1dWlkdjcgfSBmcm9tIFwiLi92ZW5kb3IvdXVpZHY3Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXRpbHMvaW5kZXgubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wb3N0aG9nLWNvcmUubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wb3N0aG9nLWNvcmUtc3RhdGVsZXNzLm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHlwZXMubWpzXCI7XG5pbXBvcnQgKiBhcyBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX19lcnJvcl90cmFja2luZ19pbmRleF9tanNfYjM0MDZkNmZfXyBmcm9tIFwiLi9lcnJvci10cmFja2luZy9pbmRleC5tanNcIjtcbmV4cG9ydCB7IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfX2Vycm9yX3RyYWNraW5nX2luZGV4X21qc19iMzQwNmQ2Zl9fIGFzIEVycm9yVHJhY2tpbmcsIGdldEZlYXR1cmVGbGFnVmFsdWUsIHV1aWR2NyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/index.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/logger.mjs":
/*!**********************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/logger.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _createLogger: () => (/* binding */ _createLogger),\n/* harmony export */   createLogger: () => (/* binding */ createLogger)\n/* harmony export */ });\nfunction createConsole(consoleLike = console) {\n    const lockedMethods = {\n        log: consoleLike.log.bind(consoleLike),\n        warn: consoleLike.warn.bind(consoleLike),\n        error: consoleLike.error.bind(consoleLike),\n        debug: consoleLike.debug.bind(consoleLike)\n    };\n    return lockedMethods;\n}\nconst _createLogger = (prefix, maybeCall, consoleLike)=>{\n    function _log(level, ...args) {\n        maybeCall(()=>{\n            const consoleMethod = consoleLike[level];\n            consoleMethod(prefix, ...args);\n        });\n    }\n    const logger = {\n        info: (...args)=>{\n            _log('log', ...args);\n        },\n        warn: (...args)=>{\n            _log('warn', ...args);\n        },\n        error: (...args)=>{\n            _log('error', ...args);\n        },\n        critical: (...args)=>{\n            consoleLike['error'](prefix, ...args);\n        },\n        createLogger: (additionalPrefix)=>_createLogger(`${prefix} ${additionalPrefix}`, maybeCall, consoleLike)\n    };\n    return logger;\n};\nfunction createLogger(prefix, maybeCall) {\n    return _createLogger(prefix, maybeCall, createConsole());\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsMkRBQTJELFFBQVEsRUFBRSxpQkFBaUI7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3VDIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC9sb2dnZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNyZWF0ZUNvbnNvbGUoY29uc29sZUxpa2UgPSBjb25zb2xlKSB7XG4gICAgY29uc3QgbG9ja2VkTWV0aG9kcyA9IHtcbiAgICAgICAgbG9nOiBjb25zb2xlTGlrZS5sb2cuYmluZChjb25zb2xlTGlrZSksXG4gICAgICAgIHdhcm46IGNvbnNvbGVMaWtlLndhcm4uYmluZChjb25zb2xlTGlrZSksXG4gICAgICAgIGVycm9yOiBjb25zb2xlTGlrZS5lcnJvci5iaW5kKGNvbnNvbGVMaWtlKSxcbiAgICAgICAgZGVidWc6IGNvbnNvbGVMaWtlLmRlYnVnLmJpbmQoY29uc29sZUxpa2UpXG4gICAgfTtcbiAgICByZXR1cm4gbG9ja2VkTWV0aG9kcztcbn1cbmNvbnN0IF9jcmVhdGVMb2dnZXIgPSAocHJlZml4LCBtYXliZUNhbGwsIGNvbnNvbGVMaWtlKT0+e1xuICAgIGZ1bmN0aW9uIF9sb2cobGV2ZWwsIC4uLmFyZ3MpIHtcbiAgICAgICAgbWF5YmVDYWxsKCgpPT57XG4gICAgICAgICAgICBjb25zdCBjb25zb2xlTWV0aG9kID0gY29uc29sZUxpa2VbbGV2ZWxdO1xuICAgICAgICAgICAgY29uc29sZU1ldGhvZChwcmVmaXgsIC4uLmFyZ3MpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbG9nZ2VyID0ge1xuICAgICAgICBpbmZvOiAoLi4uYXJncyk9PntcbiAgICAgICAgICAgIF9sb2coJ2xvZycsIC4uLmFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICB3YXJuOiAoLi4uYXJncyk9PntcbiAgICAgICAgICAgIF9sb2coJ3dhcm4nLCAuLi5hcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6ICguLi5hcmdzKT0+e1xuICAgICAgICAgICAgX2xvZygnZXJyb3InLCAuLi5hcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgY3JpdGljYWw6ICguLi5hcmdzKT0+e1xuICAgICAgICAgICAgY29uc29sZUxpa2VbJ2Vycm9yJ10ocHJlZml4LCAuLi5hcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlTG9nZ2VyOiAoYWRkaXRpb25hbFByZWZpeCk9Pl9jcmVhdGVMb2dnZXIoYCR7cHJlZml4fSAke2FkZGl0aW9uYWxQcmVmaXh9YCwgbWF5YmVDYWxsLCBjb25zb2xlTGlrZSlcbiAgICB9O1xuICAgIHJldHVybiBsb2dnZXI7XG59O1xuZnVuY3Rpb24gY3JlYXRlTG9nZ2VyKHByZWZpeCwgbWF5YmVDYWxsKSB7XG4gICAgcmV0dXJuIF9jcmVhdGVMb2dnZXIocHJlZml4LCBtYXliZUNhbGwsIGNyZWF0ZUNvbnNvbGUoKSk7XG59XG5leHBvcnQgeyBfY3JlYXRlTG9nZ2VyLCBjcmVhdGVMb2dnZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/logger.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core-stateless.mjs":
/*!**************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core-stateless.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHogCoreStateless: () => (/* binding */ PostHogCoreStateless),\n/* harmony export */   QuotaLimitedFeature: () => (/* binding */ posthog_core_stateless_QuotaLimitedFeature),\n/* harmony export */   logFlushError: () => (/* binding */ logFlushError),\n/* harmony export */   maybeAdd: () => (/* binding */ maybeAdd)\n/* harmony export */ });\n/* harmony import */ var _eventemitter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./eventemitter.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/eventemitter.mjs\");\n/* harmony import */ var _featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./featureFlagUtils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/featureFlagUtils.mjs\");\n/* harmony import */ var _gzip_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gzip.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/gzip.mjs\");\n/* harmony import */ var _logger_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./logger.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/logger.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/types.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n/* harmony import */ var _vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./vendor/uuidv7.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/vendor/uuidv7.mjs\");\n\n\n\n\n\n\n\nclass PostHogFetchHttpError extends Error {\n    constructor(response, reqByteLength){\n        super('HTTP error while fetching PostHog: status=' + response.status + ', reqByteLength=' + reqByteLength), this.response = response, this.reqByteLength = reqByteLength, this.name = 'PostHogFetchHttpError';\n    }\n    get status() {\n        return this.response.status;\n    }\n    get text() {\n        return this.response.text();\n    }\n    get json() {\n        return this.response.json();\n    }\n}\nclass PostHogFetchNetworkError extends Error {\n    constructor(error){\n        super('Network error while fetching PostHog', error instanceof Error ? {\n            cause: error\n        } : {}), this.error = error, this.name = 'PostHogFetchNetworkError';\n    }\n}\nconst maybeAdd = (key, value)=>void 0 !== value ? {\n        [key]: value\n    } : {};\nasync function logFlushError(err) {\n    if (err instanceof PostHogFetchHttpError) {\n        let text = '';\n        try {\n            text = await err.text;\n        } catch  {}\n        console.error(`Error while flushing PostHog: message=${err.message}, response body=${text}`, err);\n    } else console.error('Error while flushing PostHog', err);\n    return Promise.resolve();\n}\nfunction isPostHogFetchError(err) {\n    return 'object' == typeof err && (err instanceof PostHogFetchHttpError || err instanceof PostHogFetchNetworkError);\n}\nfunction isPostHogFetchContentTooLargeError(err) {\n    return 'object' == typeof err && err instanceof PostHogFetchHttpError && 413 === err.status;\n}\nvar posthog_core_stateless_QuotaLimitedFeature = /*#__PURE__*/ function(QuotaLimitedFeature) {\n    QuotaLimitedFeature[\"FeatureFlags\"] = \"feature_flags\";\n    QuotaLimitedFeature[\"Recordings\"] = \"recordings\";\n    return QuotaLimitedFeature;\n}({});\nclass PostHogCoreStateless {\n    constructor(apiKey, options = {}){\n        this.flushPromise = null;\n        this.shutdownPromise = null;\n        this.promiseQueue = new _utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.PromiseQueue();\n        this._events = new _eventemitter_mjs__WEBPACK_IMPORTED_MODULE_0__.SimpleEventEmitter();\n        this._isInitialized = false;\n        (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.assert)(apiKey, \"You must pass your PostHog project's api key.\");\n        this.apiKey = apiKey;\n        this.host = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.removeTrailingSlash)(options.host || 'https://us.i.posthog.com');\n        this.flushAt = options.flushAt ? Math.max(options.flushAt, 1) : 20;\n        this.maxBatchSize = Math.max(this.flushAt, options.maxBatchSize ?? 100);\n        this.maxQueueSize = Math.max(this.flushAt, options.maxQueueSize ?? 1000);\n        this.flushInterval = options.flushInterval ?? 10000;\n        this.preloadFeatureFlags = options.preloadFeatureFlags ?? true;\n        this.defaultOptIn = options.defaultOptIn ?? true;\n        this.disableSurveys = options.disableSurveys ?? false;\n        this._retryOptions = {\n            retryCount: options.fetchRetryCount ?? 3,\n            retryDelay: options.fetchRetryDelay ?? 3000,\n            retryCheck: isPostHogFetchError\n        };\n        this.requestTimeout = options.requestTimeout ?? 10000;\n        this.featureFlagsRequestTimeoutMs = options.featureFlagsRequestTimeoutMs ?? 3000;\n        this.remoteConfigRequestTimeoutMs = options.remoteConfigRequestTimeoutMs ?? 3000;\n        this.disableGeoip = options.disableGeoip ?? true;\n        this.disabled = options.disabled ?? false;\n        this.historicalMigration = options?.historicalMigration ?? false;\n        this.evaluationEnvironments = options?.evaluationEnvironments;\n        this._initPromise = Promise.resolve();\n        this._isInitialized = true;\n        this._logger = (0,_logger_mjs__WEBPACK_IMPORTED_MODULE_3__.createLogger)('[PostHog]', this.logMsgIfDebug.bind(this));\n        this.disableCompression = !(0,_gzip_mjs__WEBPACK_IMPORTED_MODULE_2__.isGzipSupported)() || (options?.disableCompression ?? false);\n    }\n    logMsgIfDebug(fn) {\n        if (this.isDebug) fn();\n    }\n    wrap(fn) {\n        if (this.disabled) return void this._logger.warn('The client is disabled');\n        if (this._isInitialized) return fn();\n        this._initPromise.then(()=>fn());\n    }\n    getCommonEventProperties() {\n        return {\n            $lib: this.getLibraryId(),\n            $lib_version: this.getLibraryVersion()\n        };\n    }\n    get optedOut() {\n        return this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.OptedOut) ?? !this.defaultOptIn;\n    }\n    async optIn() {\n        this.wrap(()=>{\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.OptedOut, false);\n        });\n    }\n    async optOut() {\n        this.wrap(()=>{\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.OptedOut, true);\n        });\n    }\n    on(event, cb) {\n        return this._events.on(event, cb);\n    }\n    debug(enabled = true) {\n        this.removeDebugCallback?.();\n        if (enabled) {\n            const removeDebugCallback = this.on('*', (event, payload)=>this._logger.info(event, payload));\n            this.removeDebugCallback = ()=>{\n                removeDebugCallback();\n                this.removeDebugCallback = void 0;\n            };\n        }\n    }\n    get isDebug() {\n        return !!this.removeDebugCallback;\n    }\n    get isDisabled() {\n        return this.disabled;\n    }\n    buildPayload(payload) {\n        return {\n            distinct_id: payload.distinct_id,\n            event: payload.event,\n            properties: {\n                ...payload.properties || {},\n                ...this.getCommonEventProperties()\n            }\n        };\n    }\n    addPendingPromise(promise) {\n        return this.promiseQueue.add(promise);\n    }\n    identifyStateless(distinctId, properties, options) {\n        this.wrap(()=>{\n            const payload = {\n                ...this.buildPayload({\n                    distinct_id: distinctId,\n                    event: '$identify',\n                    properties\n                })\n            };\n            this.enqueue('identify', payload, options);\n        });\n    }\n    async identifyStatelessImmediate(distinctId, properties, options) {\n        const payload = {\n            ...this.buildPayload({\n                distinct_id: distinctId,\n                event: '$identify',\n                properties\n            })\n        };\n        await this.sendImmediate('identify', payload, options);\n    }\n    captureStateless(distinctId, event, properties, options) {\n        this.wrap(()=>{\n            const payload = this.buildPayload({\n                distinct_id: distinctId,\n                event,\n                properties\n            });\n            this.enqueue('capture', payload, options);\n        });\n    }\n    async captureStatelessImmediate(distinctId, event, properties, options) {\n        const payload = this.buildPayload({\n            distinct_id: distinctId,\n            event,\n            properties\n        });\n        await this.sendImmediate('capture', payload, options);\n    }\n    aliasStateless(alias, distinctId, properties, options) {\n        this.wrap(()=>{\n            const payload = this.buildPayload({\n                event: '$create_alias',\n                distinct_id: distinctId,\n                properties: {\n                    ...properties || {},\n                    distinct_id: distinctId,\n                    alias\n                }\n            });\n            this.enqueue('alias', payload, options);\n        });\n    }\n    async aliasStatelessImmediate(alias, distinctId, properties, options) {\n        const payload = this.buildPayload({\n            event: '$create_alias',\n            distinct_id: distinctId,\n            properties: {\n                ...properties || {},\n                distinct_id: distinctId,\n                alias\n            }\n        });\n        await this.sendImmediate('alias', payload, options);\n    }\n    groupIdentifyStateless(groupType, groupKey, groupProperties, options, distinctId, eventProperties) {\n        this.wrap(()=>{\n            const payload = this.buildPayload({\n                distinct_id: distinctId || `$${groupType}_${groupKey}`,\n                event: '$groupidentify',\n                properties: {\n                    $group_type: groupType,\n                    $group_key: groupKey,\n                    $group_set: groupProperties || {},\n                    ...eventProperties || {}\n                }\n            });\n            this.enqueue('capture', payload, options);\n        });\n    }\n    async getRemoteConfig() {\n        await this._initPromise;\n        let host = this.host;\n        if ('https://us.i.posthog.com' === host) host = 'https://us-assets.i.posthog.com';\n        else if ('https://eu.i.posthog.com' === host) host = 'https://eu-assets.i.posthog.com';\n        const url = `${host}/array/${this.apiKey}/config`;\n        const fetchOptions = {\n            method: 'GET',\n            headers: {\n                ...this.getCustomHeaders(),\n                'Content-Type': 'application/json'\n            }\n        };\n        return this.fetchWithRetry(url, fetchOptions, {\n            retryCount: 0\n        }, this.remoteConfigRequestTimeoutMs).then((response)=>response.json()).catch((error)=>{\n            this._logger.error('Remote config could not be loaded', error);\n            this._events.emit('error', error);\n        });\n    }\n    async getFlags(distinctId, groups = {}, personProperties = {}, groupProperties = {}, extraPayload = {}, fetchConfig = true) {\n        await this._initPromise;\n        const configParam = fetchConfig ? '&config=true' : '';\n        const url = `${this.host}/flags/?v=2${configParam}`;\n        const requestData = {\n            token: this.apiKey,\n            distinct_id: distinctId,\n            groups,\n            person_properties: personProperties,\n            group_properties: groupProperties,\n            ...extraPayload\n        };\n        if (this.evaluationEnvironments && this.evaluationEnvironments.length > 0) requestData.evaluation_environments = this.evaluationEnvironments;\n        const fetchOptions = {\n            method: 'POST',\n            headers: {\n                ...this.getCustomHeaders(),\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(requestData)\n        };\n        this._logger.info('Flags URL', url);\n        return this.fetchWithRetry(url, fetchOptions, {\n            retryCount: 0\n        }, this.featureFlagsRequestTimeoutMs).then((response)=>response.json()).then((response)=>(0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.normalizeFlagsResponse)(response)).catch((error)=>{\n            this._events.emit('error', error);\n        });\n    }\n    async getFeatureFlagStateless(key, distinctId, groups = {}, personProperties = {}, groupProperties = {}, disableGeoip) {\n        await this._initPromise;\n        const flagDetailResponse = await this.getFeatureFlagDetailStateless(key, distinctId, groups, personProperties, groupProperties, disableGeoip);\n        if (void 0 === flagDetailResponse) return {\n            response: void 0,\n            requestId: void 0\n        };\n        let response = (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.getFeatureFlagValue)(flagDetailResponse.response);\n        if (void 0 === response) response = false;\n        return {\n            response,\n            requestId: flagDetailResponse.requestId\n        };\n    }\n    async getFeatureFlagDetailStateless(key, distinctId, groups = {}, personProperties = {}, groupProperties = {}, disableGeoip) {\n        await this._initPromise;\n        const flagsResponse = await this.getFeatureFlagDetailsStateless(distinctId, groups, personProperties, groupProperties, disableGeoip, [\n            key\n        ]);\n        if (void 0 === flagsResponse) return;\n        const featureFlags = flagsResponse.flags;\n        const flagDetail = featureFlags[key];\n        return {\n            response: flagDetail,\n            requestId: flagsResponse.requestId\n        };\n    }\n    async getFeatureFlagPayloadStateless(key, distinctId, groups = {}, personProperties = {}, groupProperties = {}, disableGeoip) {\n        await this._initPromise;\n        const payloads = await this.getFeatureFlagPayloadsStateless(distinctId, groups, personProperties, groupProperties, disableGeoip, [\n            key\n        ]);\n        if (!payloads) return;\n        const response = payloads[key];\n        if (void 0 === response) return null;\n        return response;\n    }\n    async getFeatureFlagPayloadsStateless(distinctId, groups = {}, personProperties = {}, groupProperties = {}, disableGeoip, flagKeysToEvaluate) {\n        await this._initPromise;\n        const payloads = (await this.getFeatureFlagsAndPayloadsStateless(distinctId, groups, personProperties, groupProperties, disableGeoip, flagKeysToEvaluate)).payloads;\n        return payloads;\n    }\n    async getFeatureFlagsStateless(distinctId, groups = {}, personProperties = {}, groupProperties = {}, disableGeoip, flagKeysToEvaluate) {\n        await this._initPromise;\n        return await this.getFeatureFlagsAndPayloadsStateless(distinctId, groups, personProperties, groupProperties, disableGeoip, flagKeysToEvaluate);\n    }\n    async getFeatureFlagsAndPayloadsStateless(distinctId, groups = {}, personProperties = {}, groupProperties = {}, disableGeoip, flagKeysToEvaluate) {\n        await this._initPromise;\n        const featureFlagDetails = await this.getFeatureFlagDetailsStateless(distinctId, groups, personProperties, groupProperties, disableGeoip, flagKeysToEvaluate);\n        if (!featureFlagDetails) return {\n            flags: void 0,\n            payloads: void 0,\n            requestId: void 0\n        };\n        return {\n            flags: featureFlagDetails.featureFlags,\n            payloads: featureFlagDetails.featureFlagPayloads,\n            requestId: featureFlagDetails.requestId\n        };\n    }\n    async getFeatureFlagDetailsStateless(distinctId, groups = {}, personProperties = {}, groupProperties = {}, disableGeoip, flagKeysToEvaluate) {\n        await this._initPromise;\n        const extraPayload = {};\n        if (disableGeoip ?? this.disableGeoip) extraPayload['geoip_disable'] = true;\n        if (flagKeysToEvaluate) extraPayload['flag_keys_to_evaluate'] = flagKeysToEvaluate;\n        const flagsResponse = await this.getFlags(distinctId, groups, personProperties, groupProperties, extraPayload);\n        if (void 0 === flagsResponse) return;\n        if (flagsResponse.errorsWhileComputingFlags) console.error('[FEATURE FLAGS] Error while computing feature flags, some flags may be missing or incorrect. Learn more at https://posthog.com/docs/feature-flags/best-practices');\n        if (flagsResponse.quotaLimited?.includes(\"feature_flags\")) {\n            console.warn('[FEATURE FLAGS] Feature flags quota limit exceeded - feature flags unavailable. Learn more about billing limits at https://posthog.com/docs/billing/limits-alerts');\n            return {\n                flags: {},\n                featureFlags: {},\n                featureFlagPayloads: {},\n                requestId: flagsResponse?.requestId\n            };\n        }\n        return flagsResponse;\n    }\n    async getSurveysStateless() {\n        await this._initPromise;\n        if (true === this.disableSurveys) {\n            this._logger.info('Loading surveys is disabled.');\n            return [];\n        }\n        const url = `${this.host}/api/surveys/?token=${this.apiKey}`;\n        const fetchOptions = {\n            method: 'GET',\n            headers: {\n                ...this.getCustomHeaders(),\n                'Content-Type': 'application/json'\n            }\n        };\n        const response = await this.fetchWithRetry(url, fetchOptions).then((response)=>{\n            if (200 !== response.status || !response.json) {\n                const msg = `Surveys API could not be loaded: ${response.status}`;\n                const error = new Error(msg);\n                this._logger.error(error);\n                this._events.emit('error', new Error(msg));\n                return;\n            }\n            return response.json();\n        }).catch((error)=>{\n            this._logger.error('Surveys API could not be loaded', error);\n            this._events.emit('error', error);\n        });\n        const newSurveys = response?.surveys;\n        if (newSurveys) this._logger.info('Surveys fetched from API: ', JSON.stringify(newSurveys));\n        return newSurveys ?? [];\n    }\n    get props() {\n        if (!this._props) this._props = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Props);\n        return this._props || {};\n    }\n    set props(val) {\n        this._props = val;\n    }\n    async register(properties) {\n        this.wrap(()=>{\n            this.props = {\n                ...this.props,\n                ...properties\n            };\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Props, this.props);\n        });\n    }\n    async unregister(property) {\n        this.wrap(()=>{\n            delete this.props[property];\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Props, this.props);\n        });\n    }\n    enqueue(type, _message, options) {\n        this.wrap(()=>{\n            if (this.optedOut) return void this._events.emit(type, \"Library is disabled. Not sending event. To re-enable, call posthog.optIn()\");\n            const message = this.prepareMessage(type, _message, options);\n            const queue = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Queue) || [];\n            if (queue.length >= this.maxQueueSize) {\n                queue.shift();\n                this._logger.info('Queue is full, the oldest event is dropped.');\n            }\n            queue.push({\n                message\n            });\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Queue, queue);\n            this._events.emit(type, message);\n            if (queue.length >= this.flushAt) this.flushBackground();\n            if (this.flushInterval && !this._flushTimer) this._flushTimer = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.safeSetTimeout)(()=>this.flushBackground(), this.flushInterval);\n        });\n    }\n    async sendImmediate(type, _message, options) {\n        if (this.disabled) return void this._logger.warn('The client is disabled');\n        if (!this._isInitialized) await this._initPromise;\n        if (this.optedOut) return void this._events.emit(type, \"Library is disabled. Not sending event. To re-enable, call posthog.optIn()\");\n        const data = {\n            api_key: this.apiKey,\n            batch: [\n                this.prepareMessage(type, _message, options)\n            ],\n            sent_at: (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.currentISOTime)()\n        };\n        if (this.historicalMigration) data.historical_migration = true;\n        const payload = JSON.stringify(data);\n        const url = `${this.host}/batch/`;\n        const gzippedPayload = this.disableCompression ? null : await (0,_gzip_mjs__WEBPACK_IMPORTED_MODULE_2__.gzipCompress)(payload, this.isDebug);\n        const fetchOptions = {\n            method: 'POST',\n            headers: {\n                ...this.getCustomHeaders(),\n                'Content-Type': 'application/json',\n                ...null !== gzippedPayload && {\n                    'Content-Encoding': 'gzip'\n                }\n            },\n            body: gzippedPayload || payload\n        };\n        try {\n            await this.fetchWithRetry(url, fetchOptions);\n        } catch (err) {\n            this._events.emit('error', err);\n        }\n    }\n    prepareMessage(type, _message, options) {\n        const message = {\n            ..._message,\n            type: type,\n            library: this.getLibraryId(),\n            library_version: this.getLibraryVersion(),\n            timestamp: options?.timestamp ? options?.timestamp : (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.currentISOTime)(),\n            uuid: options?.uuid ? options.uuid : (0,_vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_6__.uuidv7)()\n        };\n        const addGeoipDisableProperty = options?.disableGeoip ?? this.disableGeoip;\n        if (addGeoipDisableProperty) {\n            if (!message.properties) message.properties = {};\n            message['properties']['$geoip_disable'] = true;\n        }\n        if (message.distinctId) {\n            message.distinct_id = message.distinctId;\n            delete message.distinctId;\n        }\n        return message;\n    }\n    clearFlushTimer() {\n        if (this._flushTimer) {\n            clearTimeout(this._flushTimer);\n            this._flushTimer = void 0;\n        }\n    }\n    flushBackground() {\n        this.flush().catch(async (err)=>{\n            await logFlushError(err);\n        });\n    }\n    async flush() {\n        const nextFlushPromise = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.allSettled)([\n            this.flushPromise\n        ]).then(()=>this._flush());\n        this.flushPromise = nextFlushPromise;\n        this.addPendingPromise(nextFlushPromise);\n        (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.allSettled)([\n            nextFlushPromise\n        ]).then(()=>{\n            if (this.flushPromise === nextFlushPromise) this.flushPromise = null;\n        });\n        return nextFlushPromise;\n    }\n    getCustomHeaders() {\n        const customUserAgent = this.getCustomUserAgent();\n        const headers = {};\n        if (customUserAgent && '' !== customUserAgent) headers['User-Agent'] = customUserAgent;\n        return headers;\n    }\n    async _flush() {\n        this.clearFlushTimer();\n        await this._initPromise;\n        let queue = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Queue) || [];\n        if (!queue.length) return;\n        const sentMessages = [];\n        const originalQueueLength = queue.length;\n        while(queue.length > 0 && sentMessages.length < originalQueueLength){\n            const batchItems = queue.slice(0, this.maxBatchSize);\n            const batchMessages = batchItems.map((item)=>item.message);\n            const persistQueueChange = ()=>{\n                const refreshedQueue = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Queue) || [];\n                const newQueue = refreshedQueue.slice(batchItems.length);\n                this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Queue, newQueue);\n                queue = newQueue;\n            };\n            const data = {\n                api_key: this.apiKey,\n                batch: batchMessages,\n                sent_at: (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.currentISOTime)()\n            };\n            if (this.historicalMigration) data.historical_migration = true;\n            const payload = JSON.stringify(data);\n            const url = `${this.host}/batch/`;\n            const gzippedPayload = this.disableCompression ? null : await (0,_gzip_mjs__WEBPACK_IMPORTED_MODULE_2__.gzipCompress)(payload, this.isDebug);\n            const fetchOptions = {\n                method: 'POST',\n                headers: {\n                    ...this.getCustomHeaders(),\n                    'Content-Type': 'application/json',\n                    ...null !== gzippedPayload && {\n                        'Content-Encoding': 'gzip'\n                    }\n                },\n                body: gzippedPayload || payload\n            };\n            const retryOptions = {\n                retryCheck: (err)=>{\n                    if (isPostHogFetchContentTooLargeError(err)) return false;\n                    return isPostHogFetchError(err);\n                }\n            };\n            try {\n                await this.fetchWithRetry(url, fetchOptions, retryOptions);\n            } catch (err) {\n                if (isPostHogFetchContentTooLargeError(err) && batchMessages.length > 1) {\n                    this.maxBatchSize = Math.max(1, Math.floor(batchMessages.length / 2));\n                    this._logger.warn(`Received 413 when sending batch of size ${batchMessages.length}, reducing batch size to ${this.maxBatchSize}`);\n                    continue;\n                }\n                if (!(err instanceof PostHogFetchNetworkError)) persistQueueChange();\n                this._events.emit('error', err);\n                throw err;\n            }\n            persistQueueChange();\n            sentMessages.push(...batchMessages);\n        }\n        this._events.emit('flush', sentMessages);\n    }\n    async fetchWithRetry(url, options, retryOptions, requestTimeout) {\n        AbortSignal.timeout ??= function(ms) {\n            const ctrl = new AbortController();\n            setTimeout(()=>ctrl.abort(), ms);\n            return ctrl.signal;\n        };\n        const body = options.body ? options.body : '';\n        let reqByteLength = -1;\n        try {\n            reqByteLength = body instanceof Blob ? body.size : Buffer.byteLength(body, _utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.STRING_FORMAT);\n        } catch  {\n            if (body instanceof Blob) reqByteLength = body.size;\n            else {\n                const encoded = new TextEncoder().encode(body);\n                reqByteLength = encoded.length;\n            }\n        }\n        return await (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.retriable)(async ()=>{\n            let res = null;\n            try {\n                res = await this.fetch(url, {\n                    signal: AbortSignal.timeout(requestTimeout ?? this.requestTimeout),\n                    ...options\n                });\n            } catch (e) {\n                throw new PostHogFetchNetworkError(e);\n            }\n            const isNoCors = 'no-cors' === options.mode;\n            if (!isNoCors && (res.status < 200 || res.status >= 400)) throw new PostHogFetchHttpError(res, reqByteLength);\n            return res;\n        }, {\n            ...this._retryOptions,\n            ...retryOptions\n        });\n    }\n    async _shutdown(shutdownTimeoutMs = 30000) {\n        await this._initPromise;\n        let hasTimedOut = false;\n        this.clearFlushTimer();\n        const doShutdown = async ()=>{\n            try {\n                await this.promiseQueue.join();\n                while(true){\n                    const queue = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_4__.PostHogPersistedProperty.Queue) || [];\n                    if (0 === queue.length) break;\n                    await this.flush();\n                    if (hasTimedOut) break;\n                }\n            } catch (e) {\n                if (!isPostHogFetchError(e)) throw e;\n                await logFlushError(e);\n            }\n        };\n        return Promise.race([\n            new Promise((_, reject)=>{\n                (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.safeSetTimeout)(()=>{\n                    this._logger.error('Timed out while shutting down PostHog');\n                    hasTimedOut = true;\n                    reject('Timeout while shutting down PostHog. Some events may not have been sent.');\n                }, shutdownTimeoutMs);\n            }),\n            doShutdown()\n        ]);\n    }\n    async shutdown(shutdownTimeoutMs = 30000) {\n        if (this.shutdownPromise) this._logger.warn('shutdown() called while already shutting down. shutdown() is meant to be called once before process exit - use flush() for per-request cleanup');\n        else this.shutdownPromise = this._shutdown(shutdownTimeoutMs).finally(()=>{\n            this.shutdownPromise = null;\n        });\n        return this.shutdownPromise;\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvcG9zdGhvZy1jb3JlLXN0YXRlbGVzcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDNkI7QUFDMUI7QUFDZjtBQUNXO0FBQzZGO0FBQ3ZHO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsSUFBSTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsK0RBQStELFlBQVksa0JBQWtCLEtBQUs7QUFDbEcsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQSxnQ0FBZ0MsMERBQVk7QUFDNUMsMkJBQTJCLGlFQUFrQjtBQUM3QztBQUNBLFFBQVEsd0RBQU07QUFDZDtBQUNBLG9CQUFvQixxRUFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHlEQUFZO0FBQ25DLG1DQUFtQywwREFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxnRUFBd0I7QUFDakU7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdFQUF3QjtBQUM5RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdFQUF3QjtBQUM5RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFVBQVUsR0FBRyxTQUFTO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLEtBQUssU0FBUyxZQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsMENBQTBDLHVCQUF1QixzQkFBc0IsbUJBQW1CO0FBQzFHO0FBQ0E7QUFDQSx1QkFBdUIsVUFBVSxhQUFhLFlBQVk7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyx3RkFBd0YsNkVBQXNCO0FBQ3ZIO0FBQ0EsU0FBUztBQUNUO0FBQ0EsOERBQThELHVCQUF1QixzQkFBc0I7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDBFQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsdUJBQXVCLHNCQUFzQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsdUJBQXVCLHNCQUFzQjtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsdUJBQXVCLHNCQUFzQjtBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCx1QkFBdUIsc0JBQXNCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSx1QkFBdUIsc0JBQXNCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLHVCQUF1QixzQkFBc0I7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsZ0NBQWdDO0FBQ2hDLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFVBQVUsc0JBQXNCLFlBQVk7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLGdCQUFnQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLGdFQUF3QjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdFQUF3QjtBQUM5RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0VBQXdCO0FBQzlELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGdFQUF3QjtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isc0NBQXNDLGdFQUF3QjtBQUM5RDtBQUNBO0FBQ0EsNEVBQTRFLGdFQUFjO0FBQzFGLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnRUFBYztBQUNuQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsVUFBVTtBQUNqQyxzRUFBc0UsdURBQVk7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0VBQWM7QUFDL0UsaURBQWlELDBEQUFNO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsaUNBQWlDLDREQUFVO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw0REFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxnRUFBd0I7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0VBQXdCO0FBQ3pGO0FBQ0EsMENBQTBDLGdFQUF3QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGdFQUFjO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixVQUFVO0FBQ3JDLDBFQUEwRSx1REFBWTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxpRkFBaUYscUJBQXFCLDJCQUEyQixrQkFBa0I7QUFDbko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RiwyREFBYTtBQUNwRyxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsZ0VBQXdCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnRUFBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUM0SCIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvcG9zdGhvZy1jb3JlLXN0YXRlbGVzcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2ltcGxlRXZlbnRFbWl0dGVyIH0gZnJvbSBcIi4vZXZlbnRlbWl0dGVyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RmVhdHVyZUZsYWdWYWx1ZSwgbm9ybWFsaXplRmxhZ3NSZXNwb25zZSB9IGZyb20gXCIuL2ZlYXR1cmVGbGFnVXRpbHMubWpzXCI7XG5pbXBvcnQgeyBnemlwQ29tcHJlc3MsIGlzR3ppcFN1cHBvcnRlZCB9IGZyb20gXCIuL2d6aXAubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkgfSBmcm9tIFwiLi90eXBlcy5tanNcIjtcbmltcG9ydCB7IFByb21pc2VRdWV1ZSwgU1RSSU5HX0ZPUk1BVCwgYWxsU2V0dGxlZCwgYXNzZXJ0LCBjdXJyZW50SVNPVGltZSwgcmVtb3ZlVHJhaWxpbmdTbGFzaCwgcmV0cmlhYmxlLCBzYWZlU2V0VGltZW91dCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdXVpZHY3IH0gZnJvbSBcIi4vdmVuZG9yL3V1aWR2Ny5tanNcIjtcbmNsYXNzIFBvc3RIb2dGZXRjaEh0dHBFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSwgcmVxQnl0ZUxlbmd0aCl7XG4gICAgICAgIHN1cGVyKCdIVFRQIGVycm9yIHdoaWxlIGZldGNoaW5nIFBvc3RIb2c6IHN0YXR1cz0nICsgcmVzcG9uc2Uuc3RhdHVzICsgJywgcmVxQnl0ZUxlbmd0aD0nICsgcmVxQnl0ZUxlbmd0aCksIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZSwgdGhpcy5yZXFCeXRlTGVuZ3RoID0gcmVxQnl0ZUxlbmd0aCwgdGhpcy5uYW1lID0gJ1Bvc3RIb2dGZXRjaEh0dHBFcnJvcic7XG4gICAgfVxuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLnN0YXR1cztcbiAgICB9XG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLnRleHQoKTtcbiAgICB9XG4gICAgZ2V0IGpzb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLmpzb24oKTtcbiAgICB9XG59XG5jbGFzcyBQb3N0SG9nRmV0Y2hOZXR3b3JrRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyb3Ipe1xuICAgICAgICBzdXBlcignTmV0d29yayBlcnJvciB3aGlsZSBmZXRjaGluZyBQb3N0SG9nJywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHtcbiAgICAgICAgICAgIGNhdXNlOiBlcnJvclxuICAgICAgICB9IDoge30pLCB0aGlzLmVycm9yID0gZXJyb3IsIHRoaXMubmFtZSA9ICdQb3N0SG9nRmV0Y2hOZXR3b3JrRXJyb3InO1xuICAgIH1cbn1cbmNvbnN0IG1heWJlQWRkID0gKGtleSwgdmFsdWUpPT52b2lkIDAgIT09IHZhbHVlID8ge1xuICAgICAgICBba2V5XTogdmFsdWVcbiAgICB9IDoge307XG5hc3luYyBmdW5jdGlvbiBsb2dGbHVzaEVycm9yKGVycikge1xuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBQb3N0SG9nRmV0Y2hIdHRwRXJyb3IpIHtcbiAgICAgICAgbGV0IHRleHQgPSAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRleHQgPSBhd2FpdCBlcnIudGV4dDtcbiAgICAgICAgfSBjYXRjaCAge31cbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igd2hpbGUgZmx1c2hpbmcgUG9zdEhvZzogbWVzc2FnZT0ke2Vyci5tZXNzYWdlfSwgcmVzcG9uc2UgYm9keT0ke3RleHR9YCwgZXJyKTtcbiAgICB9IGVsc2UgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgZmx1c2hpbmcgUG9zdEhvZycsIGVycik7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufVxuZnVuY3Rpb24gaXNQb3N0SG9nRmV0Y2hFcnJvcihlcnIpIHtcbiAgICByZXR1cm4gJ29iamVjdCcgPT0gdHlwZW9mIGVyciAmJiAoZXJyIGluc3RhbmNlb2YgUG9zdEhvZ0ZldGNoSHR0cEVycm9yIHx8IGVyciBpbnN0YW5jZW9mIFBvc3RIb2dGZXRjaE5ldHdvcmtFcnJvcik7XG59XG5mdW5jdGlvbiBpc1Bvc3RIb2dGZXRjaENvbnRlbnRUb29MYXJnZUVycm9yKGVycikge1xuICAgIHJldHVybiAnb2JqZWN0JyA9PSB0eXBlb2YgZXJyICYmIGVyciBpbnN0YW5jZW9mIFBvc3RIb2dGZXRjaEh0dHBFcnJvciAmJiA0MTMgPT09IGVyci5zdGF0dXM7XG59XG52YXIgcG9zdGhvZ19jb3JlX3N0YXRlbGVzc19RdW90YUxpbWl0ZWRGZWF0dXJlID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihRdW90YUxpbWl0ZWRGZWF0dXJlKSB7XG4gICAgUXVvdGFMaW1pdGVkRmVhdHVyZVtcIkZlYXR1cmVGbGFnc1wiXSA9IFwiZmVhdHVyZV9mbGFnc1wiO1xuICAgIFF1b3RhTGltaXRlZEZlYXR1cmVbXCJSZWNvcmRpbmdzXCJdID0gXCJyZWNvcmRpbmdzXCI7XG4gICAgcmV0dXJuIFF1b3RhTGltaXRlZEZlYXR1cmU7XG59KHt9KTtcbmNsYXNzIFBvc3RIb2dDb3JlU3RhdGVsZXNzIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIG9wdGlvbnMgPSB7fSl7XG4gICAgICAgIHRoaXMuZmx1c2hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zaHV0ZG93blByb21pc2UgPSBudWxsO1xuICAgICAgICB0aGlzLnByb21pc2VRdWV1ZSA9IG5ldyBQcm9taXNlUXVldWUoKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gbmV3IFNpbXBsZUV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIGFzc2VydChhcGlLZXksIFwiWW91IG11c3QgcGFzcyB5b3VyIFBvc3RIb2cgcHJvamVjdCdzIGFwaSBrZXkuXCIpO1xuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgdGhpcy5ob3N0ID0gcmVtb3ZlVHJhaWxpbmdTbGFzaChvcHRpb25zLmhvc3QgfHwgJ2h0dHBzOi8vdXMuaS5wb3N0aG9nLmNvbScpO1xuICAgICAgICB0aGlzLmZsdXNoQXQgPSBvcHRpb25zLmZsdXNoQXQgPyBNYXRoLm1heChvcHRpb25zLmZsdXNoQXQsIDEpIDogMjA7XG4gICAgICAgIHRoaXMubWF4QmF0Y2hTaXplID0gTWF0aC5tYXgodGhpcy5mbHVzaEF0LCBvcHRpb25zLm1heEJhdGNoU2l6ZSA/PyAxMDApO1xuICAgICAgICB0aGlzLm1heFF1ZXVlU2l6ZSA9IE1hdGgubWF4KHRoaXMuZmx1c2hBdCwgb3B0aW9ucy5tYXhRdWV1ZVNpemUgPz8gMTAwMCk7XG4gICAgICAgIHRoaXMuZmx1c2hJbnRlcnZhbCA9IG9wdGlvbnMuZmx1c2hJbnRlcnZhbCA/PyAxMDAwMDtcbiAgICAgICAgdGhpcy5wcmVsb2FkRmVhdHVyZUZsYWdzID0gb3B0aW9ucy5wcmVsb2FkRmVhdHVyZUZsYWdzID8/IHRydWU7XG4gICAgICAgIHRoaXMuZGVmYXVsdE9wdEluID0gb3B0aW9ucy5kZWZhdWx0T3B0SW4gPz8gdHJ1ZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlU3VydmV5cyA9IG9wdGlvbnMuZGlzYWJsZVN1cnZleXMgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuX3JldHJ5T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHJldHJ5Q291bnQ6IG9wdGlvbnMuZmV0Y2hSZXRyeUNvdW50ID8/IDMsXG4gICAgICAgICAgICByZXRyeURlbGF5OiBvcHRpb25zLmZldGNoUmV0cnlEZWxheSA/PyAzMDAwLFxuICAgICAgICAgICAgcmV0cnlDaGVjazogaXNQb3N0SG9nRmV0Y2hFcnJvclxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlcXVlc3RUaW1lb3V0ID0gb3B0aW9ucy5yZXF1ZXN0VGltZW91dCA/PyAxMDAwMDtcbiAgICAgICAgdGhpcy5mZWF0dXJlRmxhZ3NSZXF1ZXN0VGltZW91dE1zID0gb3B0aW9ucy5mZWF0dXJlRmxhZ3NSZXF1ZXN0VGltZW91dE1zID8/IDMwMDA7XG4gICAgICAgIHRoaXMucmVtb3RlQ29uZmlnUmVxdWVzdFRpbWVvdXRNcyA9IG9wdGlvbnMucmVtb3RlQ29uZmlnUmVxdWVzdFRpbWVvdXRNcyA/PyAzMDAwO1xuICAgICAgICB0aGlzLmRpc2FibGVHZW9pcCA9IG9wdGlvbnMuZGlzYWJsZUdlb2lwID8/IHRydWU7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBvcHRpb25zLmRpc2FibGVkID8/IGZhbHNlO1xuICAgICAgICB0aGlzLmhpc3RvcmljYWxNaWdyYXRpb24gPSBvcHRpb25zPy5oaXN0b3JpY2FsTWlncmF0aW9uID8/IGZhbHNlO1xuICAgICAgICB0aGlzLmV2YWx1YXRpb25FbnZpcm9ubWVudHMgPSBvcHRpb25zPy5ldmFsdWF0aW9uRW52aXJvbm1lbnRzO1xuICAgICAgICB0aGlzLl9pbml0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKCdbUG9zdEhvZ10nLCB0aGlzLmxvZ01zZ0lmRGVidWcuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZGlzYWJsZUNvbXByZXNzaW9uID0gIWlzR3ppcFN1cHBvcnRlZCgpIHx8IChvcHRpb25zPy5kaXNhYmxlQ29tcHJlc3Npb24gPz8gZmFsc2UpO1xuICAgIH1cbiAgICBsb2dNc2dJZkRlYnVnKGZuKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVidWcpIGZuKCk7XG4gICAgfVxuICAgIHdyYXAoZm4pIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybiB2b2lkIHRoaXMuX2xvZ2dlci53YXJuKCdUaGUgY2xpZW50IGlzIGRpc2FibGVkJyk7XG4gICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxpemVkKSByZXR1cm4gZm4oKTtcbiAgICAgICAgdGhpcy5faW5pdFByb21pc2UudGhlbigoKT0+Zm4oKSk7XG4gICAgfVxuICAgIGdldENvbW1vbkV2ZW50UHJvcGVydGllcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRsaWI6IHRoaXMuZ2V0TGlicmFyeUlkKCksXG4gICAgICAgICAgICAkbGliX3ZlcnNpb246IHRoaXMuZ2V0TGlicmFyeVZlcnNpb24oKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgb3B0ZWRPdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5PcHRlZE91dCkgPz8gIXRoaXMuZGVmYXVsdE9wdEluO1xuICAgIH1cbiAgICBhc3luYyBvcHRJbigpIHtcbiAgICAgICAgdGhpcy53cmFwKCgpPT57XG4gICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5PcHRlZE91dCwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgb3B0T3V0KCkge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5Lk9wdGVkT3V0LCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uKGV2ZW50LCBjYikge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXZlbnRzLm9uKGV2ZW50LCBjYik7XG4gICAgfVxuICAgIGRlYnVnKGVuYWJsZWQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRGVidWdDYWxsYmFjaz8uKCk7XG4gICAgICAgIGlmIChlbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCByZW1vdmVEZWJ1Z0NhbGxiYWNrID0gdGhpcy5vbignKicsIChldmVudCwgcGF5bG9hZCk9PnRoaXMuX2xvZ2dlci5pbmZvKGV2ZW50LCBwYXlsb2FkKSk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZURlYnVnQ2FsbGJhY2sgPSAoKT0+e1xuICAgICAgICAgICAgICAgIHJlbW92ZURlYnVnQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZURlYnVnQ2FsbGJhY2sgPSB2b2lkIDA7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc0RlYnVnKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnJlbW92ZURlYnVnQ2FsbGJhY2s7XG4gICAgfVxuICAgIGdldCBpc0Rpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9XG4gICAgYnVpbGRQYXlsb2FkKHBheWxvYWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBwYXlsb2FkLmRpc3RpbmN0X2lkLFxuICAgICAgICAgICAgZXZlbnQ6IHBheWxvYWQuZXZlbnQsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgLi4ucGF5bG9hZC5wcm9wZXJ0aWVzIHx8IHt9LFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0Q29tbW9uRXZlbnRQcm9wZXJ0aWVzKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgYWRkUGVuZGluZ1Byb21pc2UocHJvbWlzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlUXVldWUuYWRkKHByb21pc2UpO1xuICAgIH1cbiAgICBpZGVudGlmeVN0YXRlbGVzcyhkaXN0aW5jdElkLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmJ1aWxkUGF5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBkaXN0aW5jdElkLFxuICAgICAgICAgICAgICAgICAgICBldmVudDogJyRpZGVudGlmeScsXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZSgnaWRlbnRpZnknLCBwYXlsb2FkLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGlkZW50aWZ5U3RhdGVsZXNzSW1tZWRpYXRlKGRpc3RpbmN0SWQsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuYnVpbGRQYXlsb2FkKHtcbiAgICAgICAgICAgICAgICBkaXN0aW5jdF9pZDogZGlzdGluY3RJZCxcbiAgICAgICAgICAgICAgICBldmVudDogJyRpZGVudGlmeScsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kSW1tZWRpYXRlKCdpZGVudGlmeScsIHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjYXB0dXJlU3RhdGVsZXNzKGRpc3RpbmN0SWQsIGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHRoaXMuYnVpbGRQYXlsb2FkKHtcbiAgICAgICAgICAgICAgICBkaXN0aW5jdF9pZDogZGlzdGluY3RJZCxcbiAgICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZSgnY2FwdHVyZScsIHBheWxvYWQsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY2FwdHVyZVN0YXRlbGVzc0ltbWVkaWF0ZShkaXN0aW5jdElkLCBldmVudCwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gdGhpcy5idWlsZFBheWxvYWQoe1xuICAgICAgICAgICAgZGlzdGluY3RfaWQ6IGRpc3RpbmN0SWQsXG4gICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgIHByb3BlcnRpZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEltbWVkaWF0ZSgnY2FwdHVyZScsIHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhbGlhc1N0YXRlbGVzcyhhbGlhcywgZGlzdGluY3RJZCwgcHJvcGVydGllcywgb3B0aW9ucykge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB0aGlzLmJ1aWxkUGF5bG9hZCh7XG4gICAgICAgICAgICAgICAgZXZlbnQ6ICckY3JlYXRlX2FsaWFzJyxcbiAgICAgICAgICAgICAgICBkaXN0aW5jdF9pZDogZGlzdGluY3RJZCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnByb3BlcnRpZXMgfHwge30sXG4gICAgICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBkaXN0aW5jdElkLFxuICAgICAgICAgICAgICAgICAgICBhbGlhc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbnF1ZXVlKCdhbGlhcycsIHBheWxvYWQsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgYWxpYXNTdGF0ZWxlc3NJbW1lZGlhdGUoYWxpYXMsIGRpc3RpbmN0SWQsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHRoaXMuYnVpbGRQYXlsb2FkKHtcbiAgICAgICAgICAgIGV2ZW50OiAnJGNyZWF0ZV9hbGlhcycsXG4gICAgICAgICAgICBkaXN0aW5jdF9pZDogZGlzdGluY3RJZCxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAuLi5wcm9wZXJ0aWVzIHx8IHt9LFxuICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBkaXN0aW5jdElkLFxuICAgICAgICAgICAgICAgIGFsaWFzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRJbW1lZGlhdGUoJ2FsaWFzJywgcGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGdyb3VwSWRlbnRpZnlTdGF0ZWxlc3MoZ3JvdXBUeXBlLCBncm91cEtleSwgZ3JvdXBQcm9wZXJ0aWVzLCBvcHRpb25zLCBkaXN0aW5jdElkLCBldmVudFByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy53cmFwKCgpPT57XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gdGhpcy5idWlsZFBheWxvYWQoe1xuICAgICAgICAgICAgICAgIGRpc3RpbmN0X2lkOiBkaXN0aW5jdElkIHx8IGAkJHtncm91cFR5cGV9XyR7Z3JvdXBLZXl9YCxcbiAgICAgICAgICAgICAgICBldmVudDogJyRncm91cGlkZW50aWZ5JyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICRncm91cF90eXBlOiBncm91cFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICRncm91cF9rZXk6IGdyb3VwS2V5LFxuICAgICAgICAgICAgICAgICAgICAkZ3JvdXBfc2V0OiBncm91cFByb3BlcnRpZXMgfHwge30sXG4gICAgICAgICAgICAgICAgICAgIC4uLmV2ZW50UHJvcGVydGllcyB8fCB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbnF1ZXVlKCdjYXB0dXJlJywgcGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRSZW1vdGVDb25maWcoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBsZXQgaG9zdCA9IHRoaXMuaG9zdDtcbiAgICAgICAgaWYgKCdodHRwczovL3VzLmkucG9zdGhvZy5jb20nID09PSBob3N0KSBob3N0ID0gJ2h0dHBzOi8vdXMtYXNzZXRzLmkucG9zdGhvZy5jb20nO1xuICAgICAgICBlbHNlIGlmICgnaHR0cHM6Ly9ldS5pLnBvc3Rob2cuY29tJyA9PT0gaG9zdCkgaG9zdCA9ICdodHRwczovL2V1LWFzc2V0cy5pLnBvc3Rob2cuY29tJztcbiAgICAgICAgY29uc3QgdXJsID0gYCR7aG9zdH0vYXJyYXkvJHt0aGlzLmFwaUtleX0vY29uZmlnYDtcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdldEN1c3RvbUhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoV2l0aFJldHJ5KHVybCwgZmV0Y2hPcHRpb25zLCB7XG4gICAgICAgICAgICByZXRyeUNvdW50OiAwXG4gICAgICAgIH0sIHRoaXMucmVtb3RlQ29uZmlnUmVxdWVzdFRpbWVvdXRNcykudGhlbigocmVzcG9uc2UpPT5yZXNwb25zZS5qc29uKCkpLmNhdGNoKChlcnJvcik9PntcbiAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcignUmVtb3RlIGNvbmZpZyBjb3VsZCBub3QgYmUgbG9hZGVkJywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmxhZ3MoZGlzdGluY3RJZCwgZ3JvdXBzID0ge30sIHBlcnNvblByb3BlcnRpZXMgPSB7fSwgZ3JvdXBQcm9wZXJ0aWVzID0ge30sIGV4dHJhUGF5bG9hZCA9IHt9LCBmZXRjaENvbmZpZyA9IHRydWUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5faW5pdFByb21pc2U7XG4gICAgICAgIGNvbnN0IGNvbmZpZ1BhcmFtID0gZmV0Y2hDb25maWcgPyAnJmNvbmZpZz10cnVlJyA6ICcnO1xuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmhvc3R9L2ZsYWdzLz92PTIke2NvbmZpZ1BhcmFtfWA7XG4gICAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0ge1xuICAgICAgICAgICAgdG9rZW46IHRoaXMuYXBpS2V5LFxuICAgICAgICAgICAgZGlzdGluY3RfaWQ6IGRpc3RpbmN0SWQsXG4gICAgICAgICAgICBncm91cHMsXG4gICAgICAgICAgICBwZXJzb25fcHJvcGVydGllczogcGVyc29uUHJvcGVydGllcyxcbiAgICAgICAgICAgIGdyb3VwX3Byb3BlcnRpZXM6IGdyb3VwUHJvcGVydGllcyxcbiAgICAgICAgICAgIC4uLmV4dHJhUGF5bG9hZFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5ldmFsdWF0aW9uRW52aXJvbm1lbnRzICYmIHRoaXMuZXZhbHVhdGlvbkVudmlyb25tZW50cy5sZW5ndGggPiAwKSByZXF1ZXN0RGF0YS5ldmFsdWF0aW9uX2Vudmlyb25tZW50cyA9IHRoaXMuZXZhbHVhdGlvbkVudmlyb25tZW50cztcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5nZXRDdXN0b21IZWFkZXJzKCksXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3REYXRhKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbygnRmxhZ3MgVVJMJywgdXJsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hXaXRoUmV0cnkodXJsLCBmZXRjaE9wdGlvbnMsIHtcbiAgICAgICAgICAgIHJldHJ5Q291bnQ6IDBcbiAgICAgICAgfSwgdGhpcy5mZWF0dXJlRmxhZ3NSZXF1ZXN0VGltZW91dE1zKS50aGVuKChyZXNwb25zZSk9PnJlc3BvbnNlLmpzb24oKSkudGhlbigocmVzcG9uc2UpPT5ub3JtYWxpemVGbGFnc1Jlc3BvbnNlKHJlc3BvbnNlKSkuY2F0Y2goKGVycm9yKT0+e1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVhdHVyZUZsYWdTdGF0ZWxlc3Moa2V5LCBkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgZGlzYWJsZUdlb2lwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBjb25zdCBmbGFnRGV0YWlsUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEZlYXR1cmVGbGFnRGV0YWlsU3RhdGVsZXNzKGtleSwgZGlzdGluY3RJZCwgZ3JvdXBzLCBwZXJzb25Qcm9wZXJ0aWVzLCBncm91cFByb3BlcnRpZXMsIGRpc2FibGVHZW9pcCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGZsYWdEZXRhaWxSZXNwb25zZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3BvbnNlOiB2b2lkIDAsXG4gICAgICAgICAgICByZXF1ZXN0SWQ6IHZvaWQgMFxuICAgICAgICB9O1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSBnZXRGZWF0dXJlRmxhZ1ZhbHVlKGZsYWdEZXRhaWxSZXNwb25zZS5yZXNwb25zZSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHJlc3BvbnNlKSByZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICByZXF1ZXN0SWQ6IGZsYWdEZXRhaWxSZXNwb25zZS5yZXF1ZXN0SWRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVhdHVyZUZsYWdEZXRhaWxTdGF0ZWxlc3Moa2V5LCBkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgZGlzYWJsZUdlb2lwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBjb25zdCBmbGFnc1Jlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRGZWF0dXJlRmxhZ0RldGFpbHNTdGF0ZWxlc3MoZGlzdGluY3RJZCwgZ3JvdXBzLCBwZXJzb25Qcm9wZXJ0aWVzLCBncm91cFByb3BlcnRpZXMsIGRpc2FibGVHZW9pcCwgW1xuICAgICAgICAgICAga2V5XG4gICAgICAgIF0pO1xuICAgICAgICBpZiAodm9pZCAwID09PSBmbGFnc1Jlc3BvbnNlKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGZlYXR1cmVGbGFncyA9IGZsYWdzUmVzcG9uc2UuZmxhZ3M7XG4gICAgICAgIGNvbnN0IGZsYWdEZXRhaWwgPSBmZWF0dXJlRmxhZ3Nba2V5XTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3BvbnNlOiBmbGFnRGV0YWlsLFxuICAgICAgICAgICAgcmVxdWVzdElkOiBmbGFnc1Jlc3BvbnNlLnJlcXVlc3RJZFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBnZXRGZWF0dXJlRmxhZ1BheWxvYWRTdGF0ZWxlc3Moa2V5LCBkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgZGlzYWJsZUdlb2lwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBjb25zdCBwYXlsb2FkcyA9IGF3YWl0IHRoaXMuZ2V0RmVhdHVyZUZsYWdQYXlsb2Fkc1N0YXRlbGVzcyhkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcywgZGlzYWJsZUdlb2lwLCBbXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgXSk7XG4gICAgICAgIGlmICghcGF5bG9hZHMpIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBwYXlsb2Fkc1trZXldO1xuICAgICAgICBpZiAodm9pZCAwID09PSByZXNwb25zZSkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVhdHVyZUZsYWdQYXlsb2Fkc1N0YXRlbGVzcyhkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgZGlzYWJsZUdlb2lwLCBmbGFnS2V5c1RvRXZhbHVhdGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5faW5pdFByb21pc2U7XG4gICAgICAgIGNvbnN0IHBheWxvYWRzID0gKGF3YWl0IHRoaXMuZ2V0RmVhdHVyZUZsYWdzQW5kUGF5bG9hZHNTdGF0ZWxlc3MoZGlzdGluY3RJZCwgZ3JvdXBzLCBwZXJzb25Qcm9wZXJ0aWVzLCBncm91cFByb3BlcnRpZXMsIGRpc2FibGVHZW9pcCwgZmxhZ0tleXNUb0V2YWx1YXRlKSkucGF5bG9hZHM7XG4gICAgICAgIHJldHVybiBwYXlsb2FkcztcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVhdHVyZUZsYWdzU3RhdGVsZXNzKGRpc3RpbmN0SWQsIGdyb3VwcyA9IHt9LCBwZXJzb25Qcm9wZXJ0aWVzID0ge30sIGdyb3VwUHJvcGVydGllcyA9IHt9LCBkaXNhYmxlR2VvaXAsIGZsYWdLZXlzVG9FdmFsdWF0ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLl9pbml0UHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RmVhdHVyZUZsYWdzQW5kUGF5bG9hZHNTdGF0ZWxlc3MoZGlzdGluY3RJZCwgZ3JvdXBzLCBwZXJzb25Qcm9wZXJ0aWVzLCBncm91cFByb3BlcnRpZXMsIGRpc2FibGVHZW9pcCwgZmxhZ0tleXNUb0V2YWx1YXRlKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVhdHVyZUZsYWdzQW5kUGF5bG9hZHNTdGF0ZWxlc3MoZGlzdGluY3RJZCwgZ3JvdXBzID0ge30sIHBlcnNvblByb3BlcnRpZXMgPSB7fSwgZ3JvdXBQcm9wZXJ0aWVzID0ge30sIGRpc2FibGVHZW9pcCwgZmxhZ0tleXNUb0V2YWx1YXRlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBjb25zdCBmZWF0dXJlRmxhZ0RldGFpbHMgPSBhd2FpdCB0aGlzLmdldEZlYXR1cmVGbGFnRGV0YWlsc1N0YXRlbGVzcyhkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcywgZGlzYWJsZUdlb2lwLCBmbGFnS2V5c1RvRXZhbHVhdGUpO1xuICAgICAgICBpZiAoIWZlYXR1cmVGbGFnRGV0YWlscykgcmV0dXJuIHtcbiAgICAgICAgICAgIGZsYWdzOiB2b2lkIDAsXG4gICAgICAgICAgICBwYXlsb2Fkczogdm9pZCAwLFxuICAgICAgICAgICAgcmVxdWVzdElkOiB2b2lkIDBcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZsYWdzOiBmZWF0dXJlRmxhZ0RldGFpbHMuZmVhdHVyZUZsYWdzLFxuICAgICAgICAgICAgcGF5bG9hZHM6IGZlYXR1cmVGbGFnRGV0YWlscy5mZWF0dXJlRmxhZ1BheWxvYWRzLFxuICAgICAgICAgICAgcmVxdWVzdElkOiBmZWF0dXJlRmxhZ0RldGFpbHMucmVxdWVzdElkXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGdldEZlYXR1cmVGbGFnRGV0YWlsc1N0YXRlbGVzcyhkaXN0aW5jdElkLCBncm91cHMgPSB7fSwgcGVyc29uUHJvcGVydGllcyA9IHt9LCBncm91cFByb3BlcnRpZXMgPSB7fSwgZGlzYWJsZUdlb2lwLCBmbGFnS2V5c1RvRXZhbHVhdGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5faW5pdFByb21pc2U7XG4gICAgICAgIGNvbnN0IGV4dHJhUGF5bG9hZCA9IHt9O1xuICAgICAgICBpZiAoZGlzYWJsZUdlb2lwID8/IHRoaXMuZGlzYWJsZUdlb2lwKSBleHRyYVBheWxvYWRbJ2dlb2lwX2Rpc2FibGUnXSA9IHRydWU7XG4gICAgICAgIGlmIChmbGFnS2V5c1RvRXZhbHVhdGUpIGV4dHJhUGF5bG9hZFsnZmxhZ19rZXlzX3RvX2V2YWx1YXRlJ10gPSBmbGFnS2V5c1RvRXZhbHVhdGU7XG4gICAgICAgIGNvbnN0IGZsYWdzUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEZsYWdzKGRpc3RpbmN0SWQsIGdyb3VwcywgcGVyc29uUHJvcGVydGllcywgZ3JvdXBQcm9wZXJ0aWVzLCBleHRyYVBheWxvYWQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBmbGFnc1Jlc3BvbnNlKSByZXR1cm47XG4gICAgICAgIGlmIChmbGFnc1Jlc3BvbnNlLmVycm9yc1doaWxlQ29tcHV0aW5nRmxhZ3MpIGNvbnNvbGUuZXJyb3IoJ1tGRUFUVVJFIEZMQUdTXSBFcnJvciB3aGlsZSBjb21wdXRpbmcgZmVhdHVyZSBmbGFncywgc29tZSBmbGFncyBtYXkgYmUgbWlzc2luZyBvciBpbmNvcnJlY3QuIExlYXJuIG1vcmUgYXQgaHR0cHM6Ly9wb3N0aG9nLmNvbS9kb2NzL2ZlYXR1cmUtZmxhZ3MvYmVzdC1wcmFjdGljZXMnKTtcbiAgICAgICAgaWYgKGZsYWdzUmVzcG9uc2UucXVvdGFMaW1pdGVkPy5pbmNsdWRlcyhcImZlYXR1cmVfZmxhZ3NcIikpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0ZFQVRVUkUgRkxBR1NdIEZlYXR1cmUgZmxhZ3MgcXVvdGEgbGltaXQgZXhjZWVkZWQgLSBmZWF0dXJlIGZsYWdzIHVuYXZhaWxhYmxlLiBMZWFybiBtb3JlIGFib3V0IGJpbGxpbmcgbGltaXRzIGF0IGh0dHBzOi8vcG9zdGhvZy5jb20vZG9jcy9iaWxsaW5nL2xpbWl0cy1hbGVydHMnKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmxhZ3M6IHt9LFxuICAgICAgICAgICAgICAgIGZlYXR1cmVGbGFnczoge30sXG4gICAgICAgICAgICAgICAgZmVhdHVyZUZsYWdQYXlsb2Fkczoge30sXG4gICAgICAgICAgICAgICAgcmVxdWVzdElkOiBmbGFnc1Jlc3BvbnNlPy5yZXF1ZXN0SWRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYWdzUmVzcG9uc2U7XG4gICAgfVxuICAgIGFzeW5jIGdldFN1cnZleXNTdGF0ZWxlc3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy5kaXNhYmxlU3VydmV5cykge1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oJ0xvYWRpbmcgc3VydmV5cyBpcyBkaXNhYmxlZC4nKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmhvc3R9L2FwaS9zdXJ2ZXlzLz90b2tlbj0ke3RoaXMuYXBpS2V5fWA7XG4gICAgICAgIGNvbnN0IGZldGNoT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5nZXRDdXN0b21IZWFkZXJzKCksXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2hXaXRoUmV0cnkodXJsLCBmZXRjaE9wdGlvbnMpLnRoZW4oKHJlc3BvbnNlKT0+e1xuICAgICAgICAgICAgaWYgKDIwMCAhPT0gcmVzcG9uc2Uuc3RhdHVzIHx8ICFyZXNwb25zZS5qc29uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbXNnID0gYFN1cnZleXMgQVBJIGNvdWxkIG5vdCBiZSBsb2FkZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWA7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IobXNnKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcihtc2cpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpPT57XG4gICAgICAgICAgICB0aGlzLl9sb2dnZXIuZXJyb3IoJ1N1cnZleXMgQVBJIGNvdWxkIG5vdCBiZSBsb2FkZWQnLCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLl9ldmVudHMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuZXdTdXJ2ZXlzID0gcmVzcG9uc2U/LnN1cnZleXM7XG4gICAgICAgIGlmIChuZXdTdXJ2ZXlzKSB0aGlzLl9sb2dnZXIuaW5mbygnU3VydmV5cyBmZXRjaGVkIGZyb20gQVBJOiAnLCBKU09OLnN0cmluZ2lmeShuZXdTdXJ2ZXlzKSk7XG4gICAgICAgIHJldHVybiBuZXdTdXJ2ZXlzID8/IFtdO1xuICAgIH1cbiAgICBnZXQgcHJvcHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5fcHJvcHMpIHRoaXMuX3Byb3BzID0gdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuUHJvcHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvcHMgfHwge307XG4gICAgfVxuICAgIHNldCBwcm9wcyh2YWwpIHtcbiAgICAgICAgdGhpcy5fcHJvcHMgPSB2YWw7XG4gICAgfVxuICAgIGFzeW5jIHJlZ2lzdGVyKHByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy53cmFwKCgpPT57XG4gICAgICAgICAgICB0aGlzLnByb3BzID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlByb3BzLCB0aGlzLnByb3BzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVucmVnaXN0ZXIocHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy53cmFwKCgpPT57XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wcm9wc1twcm9wZXJ0eV07XG4gICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5Qcm9wcywgdGhpcy5wcm9wcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbnF1ZXVlKHR5cGUsIF9tZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0ZWRPdXQpIHJldHVybiB2b2lkIHRoaXMuX2V2ZW50cy5lbWl0KHR5cGUsIFwiTGlicmFyeSBpcyBkaXNhYmxlZC4gTm90IHNlbmRpbmcgZXZlbnQuIFRvIHJlLWVuYWJsZSwgY2FsbCBwb3N0aG9nLm9wdEluKClcIik7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5wcmVwYXJlTWVzc2FnZSh0eXBlLCBfbWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBxdWV1ZSA9IHRoaXMuZ2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlF1ZXVlKSB8fCBbXTtcbiAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPj0gdGhpcy5tYXhRdWV1ZVNpemUpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKCdRdWV1ZSBpcyBmdWxsLCB0aGUgb2xkZXN0IGV2ZW50IGlzIGRyb3BwZWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlF1ZXVlLCBxdWV1ZSk7XG4gICAgICAgICAgICB0aGlzLl9ldmVudHMuZW1pdCh0eXBlLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPj0gdGhpcy5mbHVzaEF0KSB0aGlzLmZsdXNoQmFja2dyb3VuZCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmx1c2hJbnRlcnZhbCAmJiAhdGhpcy5fZmx1c2hUaW1lcikgdGhpcy5fZmx1c2hUaW1lciA9IHNhZmVTZXRUaW1lb3V0KCgpPT50aGlzLmZsdXNoQmFja2dyb3VuZCgpLCB0aGlzLmZsdXNoSW50ZXJ2YWwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZEltbWVkaWF0ZSh0eXBlLCBfbWVzc2FnZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgcmV0dXJuIHZvaWQgdGhpcy5fbG9nZ2VyLndhcm4oJ1RoZSBjbGllbnQgaXMgZGlzYWJsZWQnKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSBhd2FpdCB0aGlzLl9pbml0UHJvbWlzZTtcbiAgICAgICAgaWYgKHRoaXMub3B0ZWRPdXQpIHJldHVybiB2b2lkIHRoaXMuX2V2ZW50cy5lbWl0KHR5cGUsIFwiTGlicmFyeSBpcyBkaXNhYmxlZC4gTm90IHNlbmRpbmcgZXZlbnQuIFRvIHJlLWVuYWJsZSwgY2FsbCBwb3N0aG9nLm9wdEluKClcIik7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBhcGlfa2V5OiB0aGlzLmFwaUtleSxcbiAgICAgICAgICAgIGJhdGNoOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlTWVzc2FnZSh0eXBlLCBfbWVzc2FnZSwgb3B0aW9ucylcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBzZW50X2F0OiBjdXJyZW50SVNPVGltZSgpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcmljYWxNaWdyYXRpb24pIGRhdGEuaGlzdG9yaWNhbF9taWdyYXRpb24gPSB0cnVlO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuaG9zdH0vYmF0Y2gvYDtcbiAgICAgICAgY29uc3QgZ3ppcHBlZFBheWxvYWQgPSB0aGlzLmRpc2FibGVDb21wcmVzc2lvbiA/IG51bGwgOiBhd2FpdCBnemlwQ29tcHJlc3MocGF5bG9hZCwgdGhpcy5pc0RlYnVnKTtcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5nZXRDdXN0b21IZWFkZXJzKCksXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAuLi5udWxsICE9PSBnemlwcGVkUGF5bG9hZCAmJiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LUVuY29kaW5nJzogJ2d6aXAnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IGd6aXBwZWRQYXlsb2FkIHx8IHBheWxvYWRcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hXaXRoUmV0cnkodXJsLCBmZXRjaE9wdGlvbnMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJlcGFyZU1lc3NhZ2UodHlwZSwgX21lc3NhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgIC4uLl9tZXNzYWdlLFxuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIGxpYnJhcnk6IHRoaXMuZ2V0TGlicmFyeUlkKCksXG4gICAgICAgICAgICBsaWJyYXJ5X3ZlcnNpb246IHRoaXMuZ2V0TGlicmFyeVZlcnNpb24oKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogb3B0aW9ucz8udGltZXN0YW1wID8gb3B0aW9ucz8udGltZXN0YW1wIDogY3VycmVudElTT1RpbWUoKSxcbiAgICAgICAgICAgIHV1aWQ6IG9wdGlvbnM/LnV1aWQgPyBvcHRpb25zLnV1aWQgOiB1dWlkdjcoKVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhZGRHZW9pcERpc2FibGVQcm9wZXJ0eSA9IG9wdGlvbnM/LmRpc2FibGVHZW9pcCA/PyB0aGlzLmRpc2FibGVHZW9pcDtcbiAgICAgICAgaWYgKGFkZEdlb2lwRGlzYWJsZVByb3BlcnR5KSB7XG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2UucHJvcGVydGllcykgbWVzc2FnZS5wcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICBtZXNzYWdlWydwcm9wZXJ0aWVzJ11bJyRnZW9pcF9kaXNhYmxlJ10gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlLmRpc3RpbmN0SWQpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UuZGlzdGluY3RfaWQgPSBtZXNzYWdlLmRpc3RpbmN0SWQ7XG4gICAgICAgICAgICBkZWxldGUgbWVzc2FnZS5kaXN0aW5jdElkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgICBjbGVhckZsdXNoVGltZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9mbHVzaFRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fZmx1c2hUaW1lcik7XG4gICAgICAgICAgICB0aGlzLl9mbHVzaFRpbWVyID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoQmFja2dyb3VuZCgpIHtcbiAgICAgICAgdGhpcy5mbHVzaCgpLmNhdGNoKGFzeW5jIChlcnIpPT57XG4gICAgICAgICAgICBhd2FpdCBsb2dGbHVzaEVycm9yKGVycik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBmbHVzaCgpIHtcbiAgICAgICAgY29uc3QgbmV4dEZsdXNoUHJvbWlzZSA9IGFsbFNldHRsZWQoW1xuICAgICAgICAgICAgdGhpcy5mbHVzaFByb21pc2VcbiAgICAgICAgXSkudGhlbigoKT0+dGhpcy5fZmx1c2goKSk7XG4gICAgICAgIHRoaXMuZmx1c2hQcm9taXNlID0gbmV4dEZsdXNoUHJvbWlzZTtcbiAgICAgICAgdGhpcy5hZGRQZW5kaW5nUHJvbWlzZShuZXh0Rmx1c2hQcm9taXNlKTtcbiAgICAgICAgYWxsU2V0dGxlZChbXG4gICAgICAgICAgICBuZXh0Rmx1c2hQcm9taXNlXG4gICAgICAgIF0pLnRoZW4oKCk9PntcbiAgICAgICAgICAgIGlmICh0aGlzLmZsdXNoUHJvbWlzZSA9PT0gbmV4dEZsdXNoUHJvbWlzZSkgdGhpcy5mbHVzaFByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5leHRGbHVzaFByb21pc2U7XG4gICAgfVxuICAgIGdldEN1c3RvbUhlYWRlcnMoKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVVzZXJBZ2VudCA9IHRoaXMuZ2V0Q3VzdG9tVXNlckFnZW50KCk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGN1c3RvbVVzZXJBZ2VudCAmJiAnJyAhPT0gY3VzdG9tVXNlckFnZW50KSBoZWFkZXJzWydVc2VyLUFnZW50J10gPSBjdXN0b21Vc2VyQWdlbnQ7XG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xuICAgIH1cbiAgICBhc3luYyBfZmx1c2goKSB7XG4gICAgICAgIHRoaXMuY2xlYXJGbHVzaFRpbWVyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBsZXQgcXVldWUgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5RdWV1ZSkgfHwgW107XG4gICAgICAgIGlmICghcXVldWUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHNlbnRNZXNzYWdlcyA9IFtdO1xuICAgICAgICBjb25zdCBvcmlnaW5hbFF1ZXVlTGVuZ3RoID0gcXVldWUubGVuZ3RoO1xuICAgICAgICB3aGlsZShxdWV1ZS5sZW5ndGggPiAwICYmIHNlbnRNZXNzYWdlcy5sZW5ndGggPCBvcmlnaW5hbFF1ZXVlTGVuZ3RoKXtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoSXRlbXMgPSBxdWV1ZS5zbGljZSgwLCB0aGlzLm1heEJhdGNoU2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBiYXRjaE1lc3NhZ2VzID0gYmF0Y2hJdGVtcy5tYXAoKGl0ZW0pPT5pdGVtLm1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgcGVyc2lzdFF1ZXVlQ2hhbmdlID0gKCk9PntcbiAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoZWRRdWV1ZSA9IHRoaXMuZ2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlF1ZXVlKSB8fCBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdRdWV1ZSA9IHJlZnJlc2hlZFF1ZXVlLnNsaWNlKGJhdGNoSXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5RdWV1ZSwgbmV3UXVldWUpO1xuICAgICAgICAgICAgICAgIHF1ZXVlID0gbmV3UXVldWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcGlfa2V5OiB0aGlzLmFwaUtleSxcbiAgICAgICAgICAgICAgICBiYXRjaDogYmF0Y2hNZXNzYWdlcyxcbiAgICAgICAgICAgICAgICBzZW50X2F0OiBjdXJyZW50SVNPVGltZSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaGlzdG9yaWNhbE1pZ3JhdGlvbikgZGF0YS5oaXN0b3JpY2FsX21pZ3JhdGlvbiA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmhvc3R9L2JhdGNoL2A7XG4gICAgICAgICAgICBjb25zdCBnemlwcGVkUGF5bG9hZCA9IHRoaXMuZGlzYWJsZUNvbXByZXNzaW9uID8gbnVsbCA6IGF3YWl0IGd6aXBDb21wcmVzcyhwYXlsb2FkLCB0aGlzLmlzRGVidWcpO1xuICAgICAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5nZXRDdXN0b21IZWFkZXJzKCksXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIC4uLm51bGwgIT09IGd6aXBwZWRQYXlsb2FkICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LUVuY29kaW5nJzogJ2d6aXAnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IGd6aXBwZWRQYXlsb2FkIHx8IHBheWxvYWRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXRyeU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcmV0cnlDaGVjazogKGVycik9PntcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUG9zdEhvZ0ZldGNoQ29udGVudFRvb0xhcmdlRXJyb3IoZXJyKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNQb3N0SG9nRmV0Y2hFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hXaXRoUmV0cnkodXJsLCBmZXRjaE9wdGlvbnMsIHJldHJ5T3B0aW9ucyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNQb3N0SG9nRmV0Y2hDb250ZW50VG9vTGFyZ2VFcnJvcihlcnIpICYmIGJhdGNoTWVzc2FnZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1heEJhdGNoU2l6ZSA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IoYmF0Y2hNZXNzYWdlcy5sZW5ndGggLyAyKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci53YXJuKGBSZWNlaXZlZCA0MTMgd2hlbiBzZW5kaW5nIGJhdGNoIG9mIHNpemUgJHtiYXRjaE1lc3NhZ2VzLmxlbmd0aH0sIHJlZHVjaW5nIGJhdGNoIHNpemUgdG8gJHt0aGlzLm1heEJhdGNoU2l6ZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIFBvc3RIb2dGZXRjaE5ldHdvcmtFcnJvcikpIHBlcnNpc3RRdWV1ZUNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVyc2lzdFF1ZXVlQ2hhbmdlKCk7XG4gICAgICAgICAgICBzZW50TWVzc2FnZXMucHVzaCguLi5iYXRjaE1lc3NhZ2VzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ldmVudHMuZW1pdCgnZmx1c2gnLCBzZW50TWVzc2FnZXMpO1xuICAgIH1cbiAgICBhc3luYyBmZXRjaFdpdGhSZXRyeSh1cmwsIG9wdGlvbnMsIHJldHJ5T3B0aW9ucywgcmVxdWVzdFRpbWVvdXQpIHtcbiAgICAgICAgQWJvcnRTaWduYWwudGltZW91dCA/Pz0gZnVuY3Rpb24obXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0cmwgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT5jdHJsLmFib3J0KCksIG1zKTtcbiAgICAgICAgICAgIHJldHVybiBjdHJsLnNpZ25hbDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYm9keSA9IG9wdGlvbnMuYm9keSA/IG9wdGlvbnMuYm9keSA6ICcnO1xuICAgICAgICBsZXQgcmVxQnl0ZUxlbmd0aCA9IC0xO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVxQnl0ZUxlbmd0aCA9IGJvZHkgaW5zdGFuY2VvZiBCbG9iID8gYm9keS5zaXplIDogQnVmZmVyLmJ5dGVMZW5ndGgoYm9keSwgU1RSSU5HX0ZPUk1BVCk7XG4gICAgICAgIH0gY2F0Y2ggIHtcbiAgICAgICAgICAgIGlmIChib2R5IGluc3RhbmNlb2YgQmxvYikgcmVxQnl0ZUxlbmd0aCA9IGJvZHkuc2l6ZTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWQgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYm9keSk7XG4gICAgICAgICAgICAgICAgcmVxQnl0ZUxlbmd0aCA9IGVuY29kZWQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCByZXRyaWFibGUoYXN5bmMgKCk9PntcbiAgICAgICAgICAgIGxldCByZXMgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXMgPSBhd2FpdCB0aGlzLmZldGNoKHVybCwge1xuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQocmVxdWVzdFRpbWVvdXQgPz8gdGhpcy5yZXF1ZXN0VGltZW91dCksXG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUG9zdEhvZ0ZldGNoTmV0d29ya0Vycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNOb0NvcnMgPSAnbm8tY29ycycgPT09IG9wdGlvbnMubW9kZTtcbiAgICAgICAgICAgIGlmICghaXNOb0NvcnMgJiYgKHJlcy5zdGF0dXMgPCAyMDAgfHwgcmVzLnN0YXR1cyA+PSA0MDApKSB0aHJvdyBuZXcgUG9zdEhvZ0ZldGNoSHR0cEVycm9yKHJlcywgcmVxQnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICAuLi50aGlzLl9yZXRyeU9wdGlvbnMsXG4gICAgICAgICAgICAuLi5yZXRyeU9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIF9zaHV0ZG93bihzaHV0ZG93blRpbWVvdXRNcyA9IDMwMDAwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2luaXRQcm9taXNlO1xuICAgICAgICBsZXQgaGFzVGltZWRPdXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbGVhckZsdXNoVGltZXIoKTtcbiAgICAgICAgY29uc3QgZG9TaHV0ZG93biA9IGFzeW5jICgpPT57XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvbWlzZVF1ZXVlLmpvaW4oKTtcbiAgICAgICAgICAgICAgICB3aGlsZSh0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVldWUgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5RdWV1ZSkgfHwgW107XG4gICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBxdWV1ZS5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNUaW1lZE91dCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghaXNQb3N0SG9nRmV0Y2hFcnJvcihlKSkgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dGbHVzaEVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpPT57XG4gICAgICAgICAgICAgICAgc2FmZVNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKCdUaW1lZCBvdXQgd2hpbGUgc2h1dHRpbmcgZG93biBQb3N0SG9nJyk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1RpbWVkT3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdUaW1lb3V0IHdoaWxlIHNodXR0aW5nIGRvd24gUG9zdEhvZy4gU29tZSBldmVudHMgbWF5IG5vdCBoYXZlIGJlZW4gc2VudC4nKTtcbiAgICAgICAgICAgICAgICB9LCBzaHV0ZG93blRpbWVvdXRNcyk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGRvU2h1dGRvd24oKVxuICAgICAgICBdKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oc2h1dGRvd25UaW1lb3V0TXMgPSAzMDAwMCkge1xuICAgICAgICBpZiAodGhpcy5zaHV0ZG93blByb21pc2UpIHRoaXMuX2xvZ2dlci53YXJuKCdzaHV0ZG93bigpIGNhbGxlZCB3aGlsZSBhbHJlYWR5IHNodXR0aW5nIGRvd24uIHNodXRkb3duKCkgaXMgbWVhbnQgdG8gYmUgY2FsbGVkIG9uY2UgYmVmb3JlIHByb2Nlc3MgZXhpdCAtIHVzZSBmbHVzaCgpIGZvciBwZXItcmVxdWVzdCBjbGVhbnVwJyk7XG4gICAgICAgIGVsc2UgdGhpcy5zaHV0ZG93blByb21pc2UgPSB0aGlzLl9zaHV0ZG93bihzaHV0ZG93blRpbWVvdXRNcykuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgdGhpcy5zaHV0ZG93blByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2h1dGRvd25Qcm9taXNlO1xuICAgIH1cbn1cbmV4cG9ydCB7IFBvc3RIb2dDb3JlU3RhdGVsZXNzLCBwb3N0aG9nX2NvcmVfc3RhdGVsZXNzX1F1b3RhTGltaXRlZEZlYXR1cmUgYXMgUXVvdGFMaW1pdGVkRmVhdHVyZSwgbG9nRmx1c2hFcnJvciwgbWF5YmVBZGQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core-stateless.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core.mjs":
/*!****************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PostHogCore: () => (/* binding */ PostHogCore)\n/* harmony export */ });\n/* harmony import */ var _featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./featureFlagUtils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/featureFlagUtils.mjs\");\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/types.mjs\");\n/* harmony import */ var _posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./posthog-core-stateless.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core-stateless.mjs\");\n/* harmony import */ var _vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vendor/uuidv7.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/vendor/uuidv7.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/index.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\");\n\n\n\n\n\nclass PostHogCore extends _posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.PostHogCoreStateless {\n    constructor(apiKey, options){\n        const disableGeoipOption = options?.disableGeoip ?? false;\n        const featureFlagsRequestTimeoutMs = options?.featureFlagsRequestTimeoutMs ?? 10000;\n        super(apiKey, {\n            ...options,\n            disableGeoip: disableGeoipOption,\n            featureFlagsRequestTimeoutMs\n        }), this.flagCallReported = {}, this._sessionMaxLengthSeconds = 86400, this.sessionProps = {};\n        this.sendFeatureFlagEvent = options?.sendFeatureFlagEvent ?? true;\n        this._sessionExpirationTimeSeconds = options?.sessionExpirationTimeSeconds ?? 1800;\n    }\n    setupBootstrap(options) {\n        const bootstrap = options?.bootstrap;\n        if (!bootstrap) return;\n        if (bootstrap.distinctId) if (bootstrap.isIdentifiedId) {\n            const distinctId = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.DistinctId);\n            if (!distinctId) this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.DistinctId, bootstrap.distinctId);\n        } else {\n            const anonymousId = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.AnonymousId);\n            if (!anonymousId) this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.AnonymousId, bootstrap.distinctId);\n        }\n        const bootstrapFeatureFlags = bootstrap.featureFlags;\n        const bootstrapFeatureFlagPayloads = bootstrap.featureFlagPayloads ?? {};\n        if (bootstrapFeatureFlags && Object.keys(bootstrapFeatureFlags).length) {\n            const normalizedBootstrapFeatureFlagDetails = (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.createFlagsResponseFromFlagsAndPayloads)(bootstrapFeatureFlags, bootstrapFeatureFlagPayloads);\n            if (Object.keys(normalizedBootstrapFeatureFlagDetails.flags).length > 0) {\n                this.setBootstrappedFeatureFlagDetails(normalizedBootstrapFeatureFlagDetails);\n                const currentFeatureFlagDetails = this.getKnownFeatureFlagDetails() || {\n                    flags: {},\n                    requestId: void 0\n                };\n                const newFeatureFlagDetails = {\n                    flags: {\n                        ...normalizedBootstrapFeatureFlagDetails.flags,\n                        ...currentFeatureFlagDetails.flags\n                    },\n                    requestId: normalizedBootstrapFeatureFlagDetails.requestId\n                };\n                this.setKnownFeatureFlagDetails(newFeatureFlagDetails);\n            }\n        }\n    }\n    clearProps() {\n        this.props = void 0;\n        this.sessionProps = {};\n        this.flagCallReported = {};\n    }\n    on(event, cb) {\n        return this._events.on(event, cb);\n    }\n    reset(propertiesToKeep) {\n        this.wrap(()=>{\n            const allPropertiesToKeep = [\n                _types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.Queue,\n                ...propertiesToKeep || []\n            ];\n            this.clearProps();\n            for (const key of Object.keys(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty))if (!allPropertiesToKeep.includes(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty[key])) this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty[key], null);\n            this.reloadFeatureFlags();\n        });\n    }\n    getCommonEventProperties() {\n        const featureFlags = this.getFeatureFlags();\n        const featureVariantProperties = {};\n        if (featureFlags) for (const [feature, variant] of Object.entries(featureFlags))featureVariantProperties[`$feature/${feature}`] = variant;\n        return {\n            ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$active_feature_flags', featureFlags ? Object.keys(featureFlags) : void 0),\n            ...featureVariantProperties,\n            ...super.getCommonEventProperties()\n        };\n    }\n    enrichProperties(properties) {\n        return {\n            ...this.props,\n            ...this.sessionProps,\n            ...properties || {},\n            ...this.getCommonEventProperties(),\n            $session_id: this.getSessionId()\n        };\n    }\n    getSessionId() {\n        if (!this._isInitialized) return '';\n        let sessionId = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionId);\n        const sessionLastTimestamp = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionLastTimestamp) || 0;\n        const sessionStartTimestamp = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionStartTimestamp) || 0;\n        const now = Date.now();\n        const sessionLastDif = now - sessionLastTimestamp;\n        const sessionStartDif = now - sessionStartTimestamp;\n        if (!sessionId || sessionLastDif > 1000 * this._sessionExpirationTimeSeconds || sessionStartDif > 1000 * this._sessionMaxLengthSeconds) {\n            sessionId = (0,_vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_3__.uuidv7)();\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionId, sessionId);\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionStartTimestamp, now);\n        }\n        this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionLastTimestamp, now);\n        return sessionId;\n    }\n    resetSessionId() {\n        this.wrap(()=>{\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionId, null);\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionLastTimestamp, null);\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionStartTimestamp, null);\n        });\n    }\n    getAnonymousId() {\n        if (!this._isInitialized) return '';\n        let anonId = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.AnonymousId);\n        if (!anonId) {\n            anonId = (0,_vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_3__.uuidv7)();\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.AnonymousId, anonId);\n        }\n        return anonId;\n    }\n    getDistinctId() {\n        if (!this._isInitialized) return '';\n        return this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.DistinctId) || this.getAnonymousId();\n    }\n    registerForSession(properties) {\n        this.sessionProps = {\n            ...this.sessionProps,\n            ...properties\n        };\n    }\n    unregisterForSession(property) {\n        delete this.sessionProps[property];\n    }\n    identify(distinctId, properties, options) {\n        this.wrap(()=>{\n            const previousDistinctId = this.getDistinctId();\n            distinctId = distinctId || previousDistinctId;\n            if (properties?.$groups) this.groups(properties.$groups);\n            const userPropsOnce = properties?.$set_once;\n            delete properties?.$set_once;\n            const userProps = properties?.$set || properties;\n            const allProperties = this.enrichProperties({\n                $anon_distinct_id: this.getAnonymousId(),\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$set', userProps),\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$set_once', userPropsOnce)\n            });\n            if (distinctId !== previousDistinctId) {\n                this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.AnonymousId, previousDistinctId);\n                this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.DistinctId, distinctId);\n                this.reloadFeatureFlags();\n            }\n            super.identifyStateless(distinctId, allProperties, options);\n        });\n    }\n    capture(event, properties, options) {\n        this.wrap(()=>{\n            const distinctId = this.getDistinctId();\n            if (properties?.$groups) this.groups(properties.$groups);\n            const allProperties = this.enrichProperties(properties);\n            super.captureStateless(distinctId, event, allProperties, options);\n        });\n    }\n    alias(alias) {\n        this.wrap(()=>{\n            const distinctId = this.getDistinctId();\n            const allProperties = this.enrichProperties({});\n            super.aliasStateless(alias, distinctId, allProperties);\n        });\n    }\n    autocapture(eventType, elements, properties = {}, options) {\n        this.wrap(()=>{\n            const distinctId = this.getDistinctId();\n            const payload = {\n                distinct_id: distinctId,\n                event: '$autocapture',\n                properties: {\n                    ...this.enrichProperties(properties),\n                    $event_type: eventType,\n                    $elements: elements\n                }\n            };\n            this.enqueue('autocapture', payload, options);\n        });\n    }\n    groups(groups) {\n        this.wrap(()=>{\n            const existingGroups = this.props.$groups || {};\n            this.register({\n                $groups: {\n                    ...existingGroups,\n                    ...groups\n                }\n            });\n            if (Object.keys(groups).find((type)=>existingGroups[type] !== groups[type])) this.reloadFeatureFlags();\n        });\n    }\n    group(groupType, groupKey, groupProperties, options) {\n        this.wrap(()=>{\n            this.groups({\n                [groupType]: groupKey\n            });\n            if (groupProperties) this.groupIdentify(groupType, groupKey, groupProperties, options);\n        });\n    }\n    groupIdentify(groupType, groupKey, groupProperties, options) {\n        this.wrap(()=>{\n            const distinctId = this.getDistinctId();\n            const eventProperties = this.enrichProperties({});\n            super.groupIdentifyStateless(groupType, groupKey, groupProperties, options, distinctId, eventProperties);\n        });\n    }\n    setPersonPropertiesForFlags(properties) {\n        this.wrap(()=>{\n            const existingProperties = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.PersonProperties) || {};\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.PersonProperties, {\n                ...existingProperties,\n                ...properties\n            });\n        });\n    }\n    resetPersonPropertiesForFlags() {\n        this.wrap(()=>{\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.PersonProperties, null);\n        });\n    }\n    setGroupPropertiesForFlags(properties) {\n        this.wrap(()=>{\n            const existingProperties = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.GroupProperties) || {};\n            if (0 !== Object.keys(existingProperties).length) Object.keys(existingProperties).forEach((groupType)=>{\n                existingProperties[groupType] = {\n                    ...existingProperties[groupType],\n                    ...properties[groupType]\n                };\n                delete properties[groupType];\n            });\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.GroupProperties, {\n                ...existingProperties,\n                ...properties\n            });\n        });\n    }\n    resetGroupPropertiesForFlags() {\n        this.wrap(()=>{\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.GroupProperties, null);\n        });\n    }\n    async remoteConfigAsync() {\n        await this._initPromise;\n        if (this._remoteConfigResponsePromise) return this._remoteConfigResponsePromise;\n        return this._remoteConfigAsync();\n    }\n    async flagsAsync(sendAnonDistinctId = true, fetchConfig = true) {\n        await this._initPromise;\n        if (this._flagsResponsePromise) return this._flagsResponsePromise;\n        return this._flagsAsync(sendAnonDistinctId, fetchConfig);\n    }\n    cacheSessionReplay(source, response) {\n        const sessionReplay = response?.sessionRecording;\n        if (sessionReplay) {\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionReplay, sessionReplay);\n            this._logger.info(`Session replay config from ${source}: `, JSON.stringify(sessionReplay));\n        } else if ('boolean' == typeof sessionReplay && false === sessionReplay) {\n            this._logger.info(`Session replay config from ${source} disabled.`);\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.SessionReplay, null);\n        }\n    }\n    async _remoteConfigAsync() {\n        this._remoteConfigResponsePromise = this._initPromise.then(()=>{\n            let remoteConfig = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.RemoteConfig);\n            this._logger.info('Cached remote config: ', JSON.stringify(remoteConfig));\n            return super.getRemoteConfig().then((response)=>{\n                if (response) {\n                    const remoteConfigWithoutSurveys = {\n                        ...response\n                    };\n                    delete remoteConfigWithoutSurveys.surveys;\n                    this._logger.info('Fetched remote config: ', JSON.stringify(remoteConfigWithoutSurveys));\n                    if (false === this.disableSurveys) {\n                        const surveys = response.surveys;\n                        let hasSurveys = true;\n                        if (Array.isArray(surveys)) this._logger.info('Surveys fetched from remote config: ', JSON.stringify(surveys));\n                        else {\n                            this._logger.info('There are no surveys.');\n                            hasSurveys = false;\n                        }\n                        if (hasSurveys) this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.Surveys, surveys);\n                        else this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.Surveys, null);\n                    } else this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.Surveys, null);\n                    this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.RemoteConfig, remoteConfigWithoutSurveys);\n                    this.cacheSessionReplay('remote config', response);\n                    if (false === response.hasFeatureFlags) {\n                        this.setKnownFeatureFlagDetails({\n                            flags: {}\n                        });\n                        this._logger.warn('Remote config has no feature flags, will not load feature flags.');\n                    } else if (false !== this.preloadFeatureFlags) this.reloadFeatureFlags();\n                    if (!response.supportedCompression?.includes(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.Compression.GZipJS)) this.disableCompression = true;\n                    remoteConfig = response;\n                }\n                return remoteConfig;\n            });\n        }).finally(()=>{\n            this._remoteConfigResponsePromise = void 0;\n        });\n        return this._remoteConfigResponsePromise;\n    }\n    async _flagsAsync(sendAnonDistinctId = true, fetchConfig = true) {\n        this._flagsResponsePromise = this._initPromise.then(async ()=>{\n            const distinctId = this.getDistinctId();\n            const groups = this.props.$groups || {};\n            const personProperties = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.PersonProperties) || {};\n            const groupProperties = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.GroupProperties) || {};\n            const extraProperties = {\n                $anon_distinct_id: sendAnonDistinctId ? this.getAnonymousId() : void 0\n            };\n            const res = await super.getFlags(distinctId, groups, personProperties, groupProperties, extraProperties, fetchConfig);\n            if (res?.quotaLimited?.includes(_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.QuotaLimitedFeature.FeatureFlags)) {\n                this.setKnownFeatureFlagDetails(null);\n                console.warn('[FEATURE FLAGS] Feature flags quota limit exceeded - unsetting all flags. Learn more about billing limits at https://posthog.com/docs/billing/limits-alerts');\n                return res;\n            }\n            if (res?.featureFlags) {\n                if (this.sendFeatureFlagEvent) this.flagCallReported = {};\n                let newFeatureFlagDetails = res;\n                if (res.errorsWhileComputingFlags) {\n                    const currentFlagDetails = this.getKnownFeatureFlagDetails();\n                    this._logger.info('Cached feature flags: ', JSON.stringify(currentFlagDetails));\n                    newFeatureFlagDetails = {\n                        ...res,\n                        flags: {\n                            ...currentFlagDetails?.flags,\n                            ...res.flags\n                        }\n                    };\n                }\n                this.setKnownFeatureFlagDetails(newFeatureFlagDetails);\n                this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.FlagsEndpointWasHit, true);\n                this.cacheSessionReplay('flags', res);\n            }\n            return res;\n        }).finally(()=>{\n            this._flagsResponsePromise = void 0;\n        });\n        return this._flagsResponsePromise;\n    }\n    setKnownFeatureFlagDetails(flagsResponse) {\n        this.wrap(()=>{\n            this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.FeatureFlagDetails, flagsResponse);\n            this._events.emit('featureflags', (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.getFlagValuesFromFlags)(flagsResponse?.flags ?? {}));\n        });\n    }\n    getKnownFeatureFlagDetails() {\n        const storedDetails = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.FeatureFlagDetails);\n        if (!storedDetails) {\n            const featureFlags = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.FeatureFlags);\n            const featureFlagPayloads = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.FeatureFlagPayloads);\n            if (void 0 === featureFlags && void 0 === featureFlagPayloads) return;\n            return (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.createFlagsResponseFromFlagsAndPayloads)(featureFlags ?? {}, featureFlagPayloads ?? {});\n        }\n        return (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.normalizeFlagsResponse)(storedDetails);\n    }\n    getKnownFeatureFlags() {\n        const featureFlagDetails = this.getKnownFeatureFlagDetails();\n        if (!featureFlagDetails) return;\n        return (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.getFlagValuesFromFlags)(featureFlagDetails.flags);\n    }\n    getKnownFeatureFlagPayloads() {\n        const featureFlagDetails = this.getKnownFeatureFlagDetails();\n        if (!featureFlagDetails) return;\n        return (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.getPayloadsFromFlags)(featureFlagDetails.flags);\n    }\n    getBootstrappedFeatureFlagDetails() {\n        const details = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.BootstrapFeatureFlagDetails);\n        if (!details) return;\n        return details;\n    }\n    setBootstrappedFeatureFlagDetails(details) {\n        this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.BootstrapFeatureFlagDetails, details);\n    }\n    getBootstrappedFeatureFlags() {\n        const details = this.getBootstrappedFeatureFlagDetails();\n        if (!details) return;\n        return (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.getFlagValuesFromFlags)(details.flags);\n    }\n    getBootstrappedFeatureFlagPayloads() {\n        const details = this.getBootstrappedFeatureFlagDetails();\n        if (!details) return;\n        return (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.getPayloadsFromFlags)(details.flags);\n    }\n    getFeatureFlag(key) {\n        const details = this.getFeatureFlagDetails();\n        if (!details) return;\n        const featureFlag = details.flags[key];\n        let response = (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.getFeatureFlagValue)(featureFlag);\n        if (void 0 === response) response = false;\n        if (this.sendFeatureFlagEvent && !this.flagCallReported[key]) {\n            const bootstrappedResponse = this.getBootstrappedFeatureFlags()?.[key];\n            const bootstrappedPayload = this.getBootstrappedFeatureFlagPayloads()?.[key];\n            this.flagCallReported[key] = true;\n            this.capture('$feature_flag_called', {\n                $feature_flag: key,\n                $feature_flag_response: response,\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$feature_flag_id', featureFlag?.metadata?.id),\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$feature_flag_version', featureFlag?.metadata?.version),\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$feature_flag_reason', featureFlag?.reason?.description ?? featureFlag?.reason?.code),\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$feature_flag_bootstrapped_response', bootstrappedResponse),\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$feature_flag_bootstrapped_payload', bootstrappedPayload),\n                $used_bootstrap_value: !this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.FlagsEndpointWasHit),\n                ...(0,_posthog_core_stateless_mjs__WEBPACK_IMPORTED_MODULE_2__.maybeAdd)('$feature_flag_request_id', details.requestId)\n            });\n        }\n        return response;\n    }\n    getFeatureFlagPayload(key) {\n        const payloads = this.getFeatureFlagPayloads();\n        if (!payloads) return;\n        const response = payloads[key];\n        if (void 0 === response) return null;\n        return response;\n    }\n    getFeatureFlagPayloads() {\n        return this.getFeatureFlagDetails()?.featureFlagPayloads;\n    }\n    getFeatureFlags() {\n        return this.getFeatureFlagDetails()?.featureFlags;\n    }\n    getFeatureFlagDetails() {\n        let details = this.getKnownFeatureFlagDetails();\n        const overriddenFlags = this.getPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.OverrideFeatureFlags);\n        if (!overriddenFlags) return details;\n        details = details ?? {\n            featureFlags: {},\n            featureFlagPayloads: {},\n            flags: {}\n        };\n        const flags = details.flags ?? {};\n        for(const key in overriddenFlags)if (overriddenFlags[key]) flags[key] = (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.updateFlagValue)(flags[key], overriddenFlags[key]);\n        else delete flags[key];\n        const result = {\n            ...details,\n            flags\n        };\n        return (0,_featureFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__.normalizeFlagsResponse)(result);\n    }\n    getFeatureFlagsAndPayloads() {\n        const flags = this.getFeatureFlags();\n        const payloads = this.getFeatureFlagPayloads();\n        return {\n            flags,\n            payloads\n        };\n    }\n    isFeatureEnabled(key) {\n        const response = this.getFeatureFlag(key);\n        if (void 0 === response) return;\n        return !!response;\n    }\n    reloadFeatureFlags(options) {\n        this.flagsAsync(true).then((res)=>{\n            options?.cb?.(void 0, res?.featureFlags);\n        }).catch((e)=>{\n            options?.cb?.(e, void 0);\n            if (!options?.cb) this._logger.info('Error reloading feature flags', e);\n        });\n    }\n    async reloadRemoteConfigAsync() {\n        return await this.remoteConfigAsync();\n    }\n    async reloadFeatureFlagsAsync(sendAnonDistinctId) {\n        return (await this.flagsAsync(sendAnonDistinctId ?? true))?.featureFlags;\n    }\n    onFeatureFlags(cb) {\n        return this.on('featureflags', async ()=>{\n            const flags = this.getFeatureFlags();\n            if (flags) cb(flags);\n        });\n    }\n    onFeatureFlag(key, cb) {\n        return this.on('featureflags', async ()=>{\n            const flagResponse = this.getFeatureFlag(key);\n            if (void 0 !== flagResponse) cb(flagResponse);\n        });\n    }\n    async overrideFeatureFlag(flags) {\n        this.wrap(()=>{\n            if (null === flags) return this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.OverrideFeatureFlags, null);\n            return this.setPersistedProperty(_types_mjs__WEBPACK_IMPORTED_MODULE_1__.PostHogPersistedProperty.OverrideFeatureFlags, flags);\n        });\n    }\n    captureException(error, additionalProperties) {\n        const properties = {\n            $exception_level: 'error',\n            $exception_list: [\n                {\n                    type: (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.isPlainError)(error) ? error.name : 'Error',\n                    value: (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.isPlainError)(error) ? error.message : error,\n                    mechanism: {\n                        handled: true,\n                        synthetic: false\n                    }\n                }\n            ],\n            ...additionalProperties\n        };\n        this.capture('$exception', properties);\n    }\n    captureTraceFeedback(traceId, userFeedback) {\n        this.capture('$ai_feedback', {\n            $ai_feedback_text: userFeedback,\n            $ai_trace_id: String(traceId)\n        });\n    }\n    captureTraceMetric(traceId, metricName, metricValue) {\n        this.capture('$ai_metric', {\n            $ai_metric_name: metricName,\n            $ai_metric_value: String(metricValue),\n            $ai_trace_id: String(traceId)\n        });\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvcG9zdGhvZy1jb3JlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkw7QUFDekg7QUFDK0I7QUFDdEQ7QUFDSTtBQUNqRCwwQkFBMEIsNkVBQW9CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2QkFBNkI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsZ0VBQXdCO0FBQ2pGLHVEQUF1RCxnRUFBd0I7QUFDL0UsVUFBVTtBQUNWLDBEQUEwRCxnRUFBd0I7QUFDbEYsd0RBQXdELGdFQUF3QjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCw4RkFBdUM7QUFDakc7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUF3QjtBQUN4QztBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZ0VBQXdCLG9DQUFvQyxnRUFBd0Isa0NBQWtDLGdFQUF3QjtBQUN4TDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZIQUE2SCxRQUFRO0FBQ3JJO0FBQ0EsZUFBZSxxRUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnRUFBd0I7QUFDMUUsK0RBQStELGdFQUF3QjtBQUN2RixnRUFBZ0UsZ0VBQXdCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFNO0FBQzlCLHNDQUFzQyxnRUFBd0I7QUFDOUQsc0NBQXNDLGdFQUF3QjtBQUM5RDtBQUNBLGtDQUFrQyxnRUFBd0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0VBQXdCO0FBQzlELHNDQUFzQyxnRUFBd0I7QUFDOUQsc0NBQXNDLGdFQUF3QjtBQUM5RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGdFQUF3QjtBQUN2RTtBQUNBLHFCQUFxQiwwREFBTTtBQUMzQixzQ0FBc0MsZ0VBQXdCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsZ0VBQXdCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUVBQVE7QUFDM0IsbUJBQW1CLHFFQUFRO0FBQzNCLGFBQWE7QUFDYjtBQUNBLDBDQUEwQyxnRUFBd0I7QUFDbEUsMENBQTBDLGdFQUF3QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRUFBd0I7QUFDekYsc0NBQXNDLGdFQUF3QjtBQUM5RDtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0VBQXdCO0FBQzlELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0VBQXdCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixzQ0FBc0MsZ0VBQXdCO0FBQzlEO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxnRUFBd0I7QUFDOUQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0VBQXdCO0FBQzlELDREQUE0RCxPQUFPO0FBQ25FLFVBQVU7QUFDViw0REFBNEQsUUFBUTtBQUNwRSxzQ0FBc0MsZ0VBQXdCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELGdFQUF3QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxnRUFBd0I7QUFDMUYsdURBQXVELGdFQUF3QjtBQUMvRSxzQkFBc0IsK0JBQStCLGdFQUF3QjtBQUM3RSw4Q0FBOEMsZ0VBQXdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0Esc0JBQXNCO0FBQ3RCLGlFQUFpRSxtREFBVztBQUM1RTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxnRUFBd0I7QUFDdkYsOERBQThELGdFQUF3QjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyw0RUFBbUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZ0VBQXdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxnRUFBd0I7QUFDOUQsOENBQThDLDZFQUFzQiwyQkFBMkI7QUFDL0YsU0FBUztBQUNUO0FBQ0E7QUFDQSx3REFBd0QsZ0VBQXdCO0FBQ2hGO0FBQ0EsMkRBQTJELGdFQUF3QjtBQUNuRixrRUFBa0UsZ0VBQXdCO0FBQzFGO0FBQ0EsbUJBQW1CLDhGQUF1QyxtQkFBbUIsMkJBQTJCO0FBQ3hHO0FBQ0EsZUFBZSw2RUFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZFQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkVBQW9CO0FBQ25DO0FBQ0E7QUFDQSxrREFBa0QsZ0VBQXdCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGdFQUF3QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsNkVBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwyRUFBb0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwRUFBbUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxRUFBUTtBQUMzQixtQkFBbUIscUVBQVE7QUFDM0IsbUJBQW1CLHFFQUFRO0FBQzNCLG1CQUFtQixxRUFBUTtBQUMzQixtQkFBbUIscUVBQVE7QUFDM0Isa0VBQWtFLGdFQUF3QjtBQUMxRixtQkFBbUIscUVBQVE7QUFDM0IsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxnRUFBd0I7QUFDbEY7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLHNFQUFlO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZFQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRUFBd0I7QUFDekYsNkNBQTZDLGdFQUF3QjtBQUNyRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhEQUFZO0FBQ3RDLDJCQUEyQiw4REFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ3VCIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC9wb3N0aG9nLWNvcmUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUZsYWdzUmVzcG9uc2VGcm9tRmxhZ3NBbmRQYXlsb2FkcywgZ2V0RmVhdHVyZUZsYWdWYWx1ZSwgZ2V0RmxhZ1ZhbHVlc0Zyb21GbGFncywgZ2V0UGF5bG9hZHNGcm9tRmxhZ3MsIG5vcm1hbGl6ZUZsYWdzUmVzcG9uc2UsIHVwZGF0ZUZsYWdWYWx1ZSB9IGZyb20gXCIuL2ZlYXR1cmVGbGFnVXRpbHMubWpzXCI7XG5pbXBvcnQgeyBDb21wcmVzc2lvbiwgUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5IH0gZnJvbSBcIi4vdHlwZXMubWpzXCI7XG5pbXBvcnQgeyBQb3N0SG9nQ29yZVN0YXRlbGVzcywgUXVvdGFMaW1pdGVkRmVhdHVyZSwgbWF5YmVBZGQgfSBmcm9tIFwiLi9wb3N0aG9nLWNvcmUtc3RhdGVsZXNzLm1qc1wiO1xuaW1wb3J0IHsgdXVpZHY3IH0gZnJvbSBcIi4vdmVuZG9yL3V1aWR2Ny5tanNcIjtcbmltcG9ydCB7IGlzUGxhaW5FcnJvciB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuY2xhc3MgUG9zdEhvZ0NvcmUgZXh0ZW5kcyBQb3N0SG9nQ29yZVN0YXRlbGVzcyB7XG4gICAgY29uc3RydWN0b3IoYXBpS2V5LCBvcHRpb25zKXtcbiAgICAgICAgY29uc3QgZGlzYWJsZUdlb2lwT3B0aW9uID0gb3B0aW9ucz8uZGlzYWJsZUdlb2lwID8/IGZhbHNlO1xuICAgICAgICBjb25zdCBmZWF0dXJlRmxhZ3NSZXF1ZXN0VGltZW91dE1zID0gb3B0aW9ucz8uZmVhdHVyZUZsYWdzUmVxdWVzdFRpbWVvdXRNcyA/PyAxMDAwMDtcbiAgICAgICAgc3VwZXIoYXBpS2V5LCB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgZGlzYWJsZUdlb2lwOiBkaXNhYmxlR2VvaXBPcHRpb24sXG4gICAgICAgICAgICBmZWF0dXJlRmxhZ3NSZXF1ZXN0VGltZW91dE1zXG4gICAgICAgIH0pLCB0aGlzLmZsYWdDYWxsUmVwb3J0ZWQgPSB7fSwgdGhpcy5fc2Vzc2lvbk1heExlbmd0aFNlY29uZHMgPSA4NjQwMCwgdGhpcy5zZXNzaW9uUHJvcHMgPSB7fTtcbiAgICAgICAgdGhpcy5zZW5kRmVhdHVyZUZsYWdFdmVudCA9IG9wdGlvbnM/LnNlbmRGZWF0dXJlRmxhZ0V2ZW50ID8/IHRydWU7XG4gICAgICAgIHRoaXMuX3Nlc3Npb25FeHBpcmF0aW9uVGltZVNlY29uZHMgPSBvcHRpb25zPy5zZXNzaW9uRXhwaXJhdGlvblRpbWVTZWNvbmRzID8/IDE4MDA7XG4gICAgfVxuICAgIHNldHVwQm9vdHN0cmFwKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYm9vdHN0cmFwID0gb3B0aW9ucz8uYm9vdHN0cmFwO1xuICAgICAgICBpZiAoIWJvb3RzdHJhcCkgcmV0dXJuO1xuICAgICAgICBpZiAoYm9vdHN0cmFwLmRpc3RpbmN0SWQpIGlmIChib290c3RyYXAuaXNJZGVudGlmaWVkSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc3RpbmN0SWQgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5EaXN0aW5jdElkKTtcbiAgICAgICAgICAgIGlmICghZGlzdGluY3RJZCkgdGhpcy5zZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuRGlzdGluY3RJZCwgYm9vdHN0cmFwLmRpc3RpbmN0SWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYW5vbnltb3VzSWQgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5Bbm9ueW1vdXNJZCk7XG4gICAgICAgICAgICBpZiAoIWFub255bW91c0lkKSB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5Bbm9ueW1vdXNJZCwgYm9vdHN0cmFwLmRpc3RpbmN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvb3RzdHJhcEZlYXR1cmVGbGFncyA9IGJvb3RzdHJhcC5mZWF0dXJlRmxhZ3M7XG4gICAgICAgIGNvbnN0IGJvb3RzdHJhcEZlYXR1cmVGbGFnUGF5bG9hZHMgPSBib290c3RyYXAuZmVhdHVyZUZsYWdQYXlsb2FkcyA/PyB7fTtcbiAgICAgICAgaWYgKGJvb3RzdHJhcEZlYXR1cmVGbGFncyAmJiBPYmplY3Qua2V5cyhib290c3RyYXBGZWF0dXJlRmxhZ3MpLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEJvb3RzdHJhcEZlYXR1cmVGbGFnRGV0YWlscyA9IGNyZWF0ZUZsYWdzUmVzcG9uc2VGcm9tRmxhZ3NBbmRQYXlsb2Fkcyhib290c3RyYXBGZWF0dXJlRmxhZ3MsIGJvb3RzdHJhcEZlYXR1cmVGbGFnUGF5bG9hZHMpO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vcm1hbGl6ZWRCb290c3RyYXBGZWF0dXJlRmxhZ0RldGFpbHMuZmxhZ3MpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJvb3RzdHJhcHBlZEZlYXR1cmVGbGFnRGV0YWlscyhub3JtYWxpemVkQm9vdHN0cmFwRmVhdHVyZUZsYWdEZXRhaWxzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RmVhdHVyZUZsYWdEZXRhaWxzID0gdGhpcy5nZXRLbm93bkZlYXR1cmVGbGFnRGV0YWlscygpIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IHt9LFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHZvaWQgMFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RmVhdHVyZUZsYWdEZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubm9ybWFsaXplZEJvb3RzdHJhcEZlYXR1cmVGbGFnRGV0YWlscy5mbGFncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRGZWF0dXJlRmxhZ0RldGFpbHMuZmxhZ3NcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiBub3JtYWxpemVkQm9vdHN0cmFwRmVhdHVyZUZsYWdEZXRhaWxzLnJlcXVlc3RJZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRLbm93bkZlYXR1cmVGbGFnRGV0YWlscyhuZXdGZWF0dXJlRmxhZ0RldGFpbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyUHJvcHMoKSB7XG4gICAgICAgIHRoaXMucHJvcHMgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuc2Vzc2lvblByb3BzID0ge307XG4gICAgICAgIHRoaXMuZmxhZ0NhbGxSZXBvcnRlZCA9IHt9O1xuICAgIH1cbiAgICBvbihldmVudCwgY2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50cy5vbihldmVudCwgY2IpO1xuICAgIH1cbiAgICByZXNldChwcm9wZXJ0aWVzVG9LZWVwKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgY29uc3QgYWxsUHJvcGVydGllc1RvS2VlcCA9IFtcbiAgICAgICAgICAgICAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuUXVldWUsXG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllc1RvS2VlcCB8fCBbXVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJQcm9wcygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5KSlpZiAoIWFsbFByb3BlcnRpZXNUb0tlZXAuaW5jbHVkZXMoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5W2tleV0pKSB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtrZXldLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRDb21tb25FdmVudFByb3BlcnRpZXMoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVGbGFncyA9IHRoaXMuZ2V0RmVhdHVyZUZsYWdzKCk7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVWYXJpYW50UHJvcGVydGllcyA9IHt9O1xuICAgICAgICBpZiAoZmVhdHVyZUZsYWdzKSBmb3IgKGNvbnN0IFtmZWF0dXJlLCB2YXJpYW50XSBvZiBPYmplY3QuZW50cmllcyhmZWF0dXJlRmxhZ3MpKWZlYXR1cmVWYXJpYW50UHJvcGVydGllc1tgJGZlYXR1cmUvJHtmZWF0dXJlfWBdID0gdmFyaWFudDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLm1heWJlQWRkKCckYWN0aXZlX2ZlYXR1cmVfZmxhZ3MnLCBmZWF0dXJlRmxhZ3MgPyBPYmplY3Qua2V5cyhmZWF0dXJlRmxhZ3MpIDogdm9pZCAwKSxcbiAgICAgICAgICAgIC4uLmZlYXR1cmVWYXJpYW50UHJvcGVydGllcyxcbiAgICAgICAgICAgIC4uLnN1cGVyLmdldENvbW1vbkV2ZW50UHJvcGVydGllcygpXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVucmljaFByb3BlcnRpZXMocHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4udGhpcy5wcm9wcyxcbiAgICAgICAgICAgIC4uLnRoaXMuc2Vzc2lvblByb3BzLFxuICAgICAgICAgICAgLi4ucHJvcGVydGllcyB8fCB7fSxcbiAgICAgICAgICAgIC4uLnRoaXMuZ2V0Q29tbW9uRXZlbnRQcm9wZXJ0aWVzKCksXG4gICAgICAgICAgICAkc2Vzc2lvbl9pZDogdGhpcy5nZXRTZXNzaW9uSWQoKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRTZXNzaW9uSWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkgcmV0dXJuICcnO1xuICAgICAgICBsZXQgc2Vzc2lvbklkID0gdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuU2Vzc2lvbklkKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkxhc3RUaW1lc3RhbXAgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5TZXNzaW9uTGFzdFRpbWVzdGFtcCkgfHwgMDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvblN0YXJ0VGltZXN0YW1wID0gdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuU2Vzc2lvblN0YXJ0VGltZXN0YW1wKSB8fCAwO1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBzZXNzaW9uTGFzdERpZiA9IG5vdyAtIHNlc3Npb25MYXN0VGltZXN0YW1wO1xuICAgICAgICBjb25zdCBzZXNzaW9uU3RhcnREaWYgPSBub3cgLSBzZXNzaW9uU3RhcnRUaW1lc3RhbXA7XG4gICAgICAgIGlmICghc2Vzc2lvbklkIHx8IHNlc3Npb25MYXN0RGlmID4gMTAwMCAqIHRoaXMuX3Nlc3Npb25FeHBpcmF0aW9uVGltZVNlY29uZHMgfHwgc2Vzc2lvblN0YXJ0RGlmID4gMTAwMCAqIHRoaXMuX3Nlc3Npb25NYXhMZW5ndGhTZWNvbmRzKSB7XG4gICAgICAgICAgICBzZXNzaW9uSWQgPSB1dWlkdjcoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlNlc3Npb25JZCwgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlNlc3Npb25TdGFydFRpbWVzdGFtcCwgbm93KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5TZXNzaW9uTGFzdFRpbWVzdGFtcCwgbm93KTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25JZDtcbiAgICB9XG4gICAgcmVzZXRTZXNzaW9uSWQoKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgdGhpcy5zZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuU2Vzc2lvbklkLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlNlc3Npb25MYXN0VGltZXN0YW1wLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlNlc3Npb25TdGFydFRpbWVzdGFtcCwgbnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRBbm9ueW1vdXNJZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSByZXR1cm4gJyc7XG4gICAgICAgIGxldCBhbm9uSWQgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5Bbm9ueW1vdXNJZCk7XG4gICAgICAgIGlmICghYW5vbklkKSB7XG4gICAgICAgICAgICBhbm9uSWQgPSB1dWlkdjcoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LkFub255bW91c0lkLCBhbm9uSWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbm9uSWQ7XG4gICAgfVxuICAgIGdldERpc3RpbmN0SWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuRGlzdGluY3RJZCkgfHwgdGhpcy5nZXRBbm9ueW1vdXNJZCgpO1xuICAgIH1cbiAgICByZWdpc3RlckZvclNlc3Npb24ocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLnNlc3Npb25Qcm9wcyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuc2Vzc2lvblByb3BzLFxuICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICB9O1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyRm9yU2Vzc2lvbihwcm9wZXJ0eSkge1xuICAgICAgICBkZWxldGUgdGhpcy5zZXNzaW9uUHJvcHNbcHJvcGVydHldO1xuICAgIH1cbiAgICBpZGVudGlmeShkaXN0aW5jdElkLCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNEaXN0aW5jdElkID0gdGhpcy5nZXREaXN0aW5jdElkKCk7XG4gICAgICAgICAgICBkaXN0aW5jdElkID0gZGlzdGluY3RJZCB8fCBwcmV2aW91c0Rpc3RpbmN0SWQ7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcz8uJGdyb3VwcykgdGhpcy5ncm91cHMocHJvcGVydGllcy4kZ3JvdXBzKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJQcm9wc09uY2UgPSBwcm9wZXJ0aWVzPy4kc2V0X29uY2U7XG4gICAgICAgICAgICBkZWxldGUgcHJvcGVydGllcz8uJHNldF9vbmNlO1xuICAgICAgICAgICAgY29uc3QgdXNlclByb3BzID0gcHJvcGVydGllcz8uJHNldCB8fCBwcm9wZXJ0aWVzO1xuICAgICAgICAgICAgY29uc3QgYWxsUHJvcGVydGllcyA9IHRoaXMuZW5yaWNoUHJvcGVydGllcyh7XG4gICAgICAgICAgICAgICAgJGFub25fZGlzdGluY3RfaWQ6IHRoaXMuZ2V0QW5vbnltb3VzSWQoKSxcbiAgICAgICAgICAgICAgICAuLi5tYXliZUFkZCgnJHNldCcsIHVzZXJQcm9wcyksXG4gICAgICAgICAgICAgICAgLi4ubWF5YmVBZGQoJyRzZXRfb25jZScsIHVzZXJQcm9wc09uY2UpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChkaXN0aW5jdElkICE9PSBwcmV2aW91c0Rpc3RpbmN0SWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5Bbm9ueW1vdXNJZCwgcHJldmlvdXNEaXN0aW5jdElkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5EaXN0aW5jdElkLCBkaXN0aW5jdElkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbG9hZEZlYXR1cmVGbGFncygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3VwZXIuaWRlbnRpZnlTdGF0ZWxlc3MoZGlzdGluY3RJZCwgYWxsUHJvcGVydGllcywgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXB0dXJlKGV2ZW50LCBwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgY29uc3QgZGlzdGluY3RJZCA9IHRoaXMuZ2V0RGlzdGluY3RJZCgpO1xuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXM/LiRncm91cHMpIHRoaXMuZ3JvdXBzKHByb3BlcnRpZXMuJGdyb3Vwcyk7XG4gICAgICAgICAgICBjb25zdCBhbGxQcm9wZXJ0aWVzID0gdGhpcy5lbnJpY2hQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgc3VwZXIuY2FwdHVyZVN0YXRlbGVzcyhkaXN0aW5jdElkLCBldmVudCwgYWxsUHJvcGVydGllcywgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhbGlhcyhhbGlhcykge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIGNvbnN0IGRpc3RpbmN0SWQgPSB0aGlzLmdldERpc3RpbmN0SWQoKTtcbiAgICAgICAgICAgIGNvbnN0IGFsbFByb3BlcnRpZXMgPSB0aGlzLmVucmljaFByb3BlcnRpZXMoe30pO1xuICAgICAgICAgICAgc3VwZXIuYWxpYXNTdGF0ZWxlc3MoYWxpYXMsIGRpc3RpbmN0SWQsIGFsbFByb3BlcnRpZXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXV0b2NhcHR1cmUoZXZlbnRUeXBlLCBlbGVtZW50cywgcHJvcGVydGllcyA9IHt9LCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgY29uc3QgZGlzdGluY3RJZCA9IHRoaXMuZ2V0RGlzdGluY3RJZCgpO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICBkaXN0aW5jdF9pZDogZGlzdGluY3RJZCxcbiAgICAgICAgICAgICAgICBldmVudDogJyRhdXRvY2FwdHVyZScsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmVucmljaFByb3BlcnRpZXMocHJvcGVydGllcyksXG4gICAgICAgICAgICAgICAgICAgICRldmVudF90eXBlOiBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50czogZWxlbWVudHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbnF1ZXVlKCdhdXRvY2FwdHVyZScsIHBheWxvYWQsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ3JvdXBzKGdyb3Vwcykge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nR3JvdXBzID0gdGhpcy5wcm9wcy4kZ3JvdXBzIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5yZWdpc3Rlcih7XG4gICAgICAgICAgICAgICAgJGdyb3Vwczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0dyb3VwcyxcbiAgICAgICAgICAgICAgICAgICAgLi4uZ3JvdXBzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZ3JvdXBzKS5maW5kKCh0eXBlKT0+ZXhpc3RpbmdHcm91cHNbdHlwZV0gIT09IGdyb3Vwc1t0eXBlXSkpIHRoaXMucmVsb2FkRmVhdHVyZUZsYWdzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBncm91cChncm91cFR5cGUsIGdyb3VwS2V5LCBncm91cFByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy53cmFwKCgpPT57XG4gICAgICAgICAgICB0aGlzLmdyb3Vwcyh7XG4gICAgICAgICAgICAgICAgW2dyb3VwVHlwZV06IGdyb3VwS2V5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChncm91cFByb3BlcnRpZXMpIHRoaXMuZ3JvdXBJZGVudGlmeShncm91cFR5cGUsIGdyb3VwS2V5LCBncm91cFByb3BlcnRpZXMsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ3JvdXBJZGVudGlmeShncm91cFR5cGUsIGdyb3VwS2V5LCBncm91cFByb3BlcnRpZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy53cmFwKCgpPT57XG4gICAgICAgICAgICBjb25zdCBkaXN0aW5jdElkID0gdGhpcy5nZXREaXN0aW5jdElkKCk7XG4gICAgICAgICAgICBjb25zdCBldmVudFByb3BlcnRpZXMgPSB0aGlzLmVucmljaFByb3BlcnRpZXMoe30pO1xuICAgICAgICAgICAgc3VwZXIuZ3JvdXBJZGVudGlmeVN0YXRlbGVzcyhncm91cFR5cGUsIGdyb3VwS2V5LCBncm91cFByb3BlcnRpZXMsIG9wdGlvbnMsIGRpc3RpbmN0SWQsIGV2ZW50UHJvcGVydGllcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRQZXJzb25Qcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUHJvcGVydGllcyA9IHRoaXMuZ2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlBlcnNvblByb3BlcnRpZXMpIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5zZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuUGVyc29uUHJvcGVydGllcywge1xuICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAuLi5wcm9wZXJ0aWVzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlc2V0UGVyc29uUHJvcGVydGllc0ZvckZsYWdzKCkge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LlBlcnNvblByb3BlcnRpZXMsIG51bGwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0R3JvdXBQcm9wZXJ0aWVzRm9yRmxhZ3MocHJvcGVydGllcykge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUHJvcGVydGllcyA9IHRoaXMuZ2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5Lkdyb3VwUHJvcGVydGllcykgfHwge307XG4gICAgICAgICAgICBpZiAoMCAhPT0gT2JqZWN0LmtleXMoZXhpc3RpbmdQcm9wZXJ0aWVzKS5sZW5ndGgpIE9iamVjdC5rZXlzKGV4aXN0aW5nUHJvcGVydGllcykuZm9yRWFjaCgoZ3JvdXBUeXBlKT0+e1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nUHJvcGVydGllc1tncm91cFR5cGVdID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Byb3BlcnRpZXNbZ3JvdXBUeXBlXSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucHJvcGVydGllc1tncm91cFR5cGVdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcGVydGllc1tncm91cFR5cGVdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5Hcm91cFByb3BlcnRpZXMsIHtcbiAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Byb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgLi4ucHJvcGVydGllc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXNldEdyb3VwUHJvcGVydGllc0ZvckZsYWdzKCkge1xuICAgICAgICB0aGlzLndyYXAoKCk9PntcbiAgICAgICAgICAgIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5Lkdyb3VwUHJvcGVydGllcywgbnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyByZW1vdGVDb25maWdBc3luYygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5faW5pdFByb21pc2U7XG4gICAgICAgIGlmICh0aGlzLl9yZW1vdGVDb25maWdSZXNwb25zZVByb21pc2UpIHJldHVybiB0aGlzLl9yZW1vdGVDb25maWdSZXNwb25zZVByb21pc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVDb25maWdBc3luYygpO1xuICAgIH1cbiAgICBhc3luYyBmbGFnc0FzeW5jKHNlbmRBbm9uRGlzdGluY3RJZCA9IHRydWUsIGZldGNoQ29uZmlnID0gdHJ1ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLl9pbml0UHJvbWlzZTtcbiAgICAgICAgaWYgKHRoaXMuX2ZsYWdzUmVzcG9uc2VQcm9taXNlKSByZXR1cm4gdGhpcy5fZmxhZ3NSZXNwb25zZVByb21pc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9mbGFnc0FzeW5jKHNlbmRBbm9uRGlzdGluY3RJZCwgZmV0Y2hDb25maWcpO1xuICAgIH1cbiAgICBjYWNoZVNlc3Npb25SZXBsYXkoc291cmNlLCByZXNwb25zZSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uUmVwbGF5ID0gcmVzcG9uc2U/LnNlc3Npb25SZWNvcmRpbmc7XG4gICAgICAgIGlmIChzZXNzaW9uUmVwbGF5KSB7XG4gICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5TZXNzaW9uUmVwbGF5LCBzZXNzaW9uUmVwbGF5KTtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKGBTZXNzaW9uIHJlcGxheSBjb25maWcgZnJvbSAke3NvdXJjZX06IGAsIEpTT04uc3RyaW5naWZ5KHNlc3Npb25SZXBsYXkpKTtcbiAgICAgICAgfSBlbHNlIGlmICgnYm9vbGVhbicgPT0gdHlwZW9mIHNlc3Npb25SZXBsYXkgJiYgZmFsc2UgPT09IHNlc3Npb25SZXBsYXkpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvZ2dlci5pbmZvKGBTZXNzaW9uIHJlcGxheSBjb25maWcgZnJvbSAke3NvdXJjZX0gZGlzYWJsZWQuYCk7XG4gICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5TZXNzaW9uUmVwbGF5LCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfcmVtb3RlQ29uZmlnQXN5bmMoKSB7XG4gICAgICAgIHRoaXMuX3JlbW90ZUNvbmZpZ1Jlc3BvbnNlUHJvbWlzZSA9IHRoaXMuX2luaXRQcm9taXNlLnRoZW4oKCk9PntcbiAgICAgICAgICAgIGxldCByZW1vdGVDb25maWcgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5SZW1vdGVDb25maWcpO1xuICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oJ0NhY2hlZCByZW1vdGUgY29uZmlnOiAnLCBKU09OLnN0cmluZ2lmeShyZW1vdGVDb25maWcpKTtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRSZW1vdGVDb25maWcoKS50aGVuKChyZXNwb25zZSk9PntcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3RlQ29uZmlnV2l0aG91dFN1cnZleXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVtb3RlQ29uZmlnV2l0aG91dFN1cnZleXMuc3VydmV5cztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oJ0ZldGNoZWQgcmVtb3RlIGNvbmZpZzogJywgSlNPTi5zdHJpbmdpZnkocmVtb3RlQ29uZmlnV2l0aG91dFN1cnZleXMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbHNlID09PSB0aGlzLmRpc2FibGVTdXJ2ZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdXJ2ZXlzID0gcmVzcG9uc2Uuc3VydmV5cztcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoYXNTdXJ2ZXlzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN1cnZleXMpKSB0aGlzLl9sb2dnZXIuaW5mbygnU3VydmV5cyBmZXRjaGVkIGZyb20gcmVtb3RlIGNvbmZpZzogJywgSlNPTi5zdHJpbmdpZnkoc3VydmV5cykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oJ1RoZXJlIGFyZSBubyBzdXJ2ZXlzLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1N1cnZleXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNTdXJ2ZXlzKSB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5TdXJ2ZXlzLCBzdXJ2ZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5zZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuU3VydmV5cywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5TdXJ2ZXlzLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuUmVtb3RlQ29uZmlnLCByZW1vdGVDb25maWdXaXRob3V0U3VydmV5cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTZXNzaW9uUmVwbGF5KCdyZW1vdGUgY29uZmlnJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmFsc2UgPT09IHJlc3BvbnNlLmhhc0ZlYXR1cmVGbGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRLbm93bkZlYXR1cmVGbGFnRGV0YWlscyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvZ2dlci53YXJuKCdSZW1vdGUgY29uZmlnIGhhcyBubyBmZWF0dXJlIGZsYWdzLCB3aWxsIG5vdCBsb2FkIGZlYXR1cmUgZmxhZ3MuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmFsc2UgIT09IHRoaXMucHJlbG9hZEZlYXR1cmVGbGFncykgdGhpcy5yZWxvYWRGZWF0dXJlRmxhZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdXBwb3J0ZWRDb21wcmVzc2lvbj8uaW5jbHVkZXMoQ29tcHJlc3Npb24uR1ppcEpTKSkgdGhpcy5kaXNhYmxlQ29tcHJlc3Npb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZW1vdGVDb25maWcgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW90ZUNvbmZpZztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICB0aGlzLl9yZW1vdGVDb25maWdSZXNwb25zZVByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVtb3RlQ29uZmlnUmVzcG9uc2VQcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBfZmxhZ3NBc3luYyhzZW5kQW5vbkRpc3RpbmN0SWQgPSB0cnVlLCBmZXRjaENvbmZpZyA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5fZmxhZ3NSZXNwb25zZVByb21pc2UgPSB0aGlzLl9pbml0UHJvbWlzZS50aGVuKGFzeW5jICgpPT57XG4gICAgICAgICAgICBjb25zdCBkaXN0aW5jdElkID0gdGhpcy5nZXREaXN0aW5jdElkKCk7XG4gICAgICAgICAgICBjb25zdCBncm91cHMgPSB0aGlzLnByb3BzLiRncm91cHMgfHwge307XG4gICAgICAgICAgICBjb25zdCBwZXJzb25Qcm9wZXJ0aWVzID0gdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuUGVyc29uUHJvcGVydGllcykgfHwge307XG4gICAgICAgICAgICBjb25zdCBncm91cFByb3BlcnRpZXMgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5Hcm91cFByb3BlcnRpZXMpIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgZXh0cmFQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgICRhbm9uX2Rpc3RpbmN0X2lkOiBzZW5kQW5vbkRpc3RpbmN0SWQgPyB0aGlzLmdldEFub255bW91c0lkKCkgOiB2b2lkIDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzdXBlci5nZXRGbGFncyhkaXN0aW5jdElkLCBncm91cHMsIHBlcnNvblByb3BlcnRpZXMsIGdyb3VwUHJvcGVydGllcywgZXh0cmFQcm9wZXJ0aWVzLCBmZXRjaENvbmZpZyk7XG4gICAgICAgICAgICBpZiAocmVzPy5xdW90YUxpbWl0ZWQ/LmluY2x1ZGVzKFF1b3RhTGltaXRlZEZlYXR1cmUuRmVhdHVyZUZsYWdzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0S25vd25GZWF0dXJlRmxhZ0RldGFpbHMobnVsbCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbRkVBVFVSRSBGTEFHU10gRmVhdHVyZSBmbGFncyBxdW90YSBsaW1pdCBleGNlZWRlZCAtIHVuc2V0dGluZyBhbGwgZmxhZ3MuIExlYXJuIG1vcmUgYWJvdXQgYmlsbGluZyBsaW1pdHMgYXQgaHR0cHM6Ly9wb3N0aG9nLmNvbS9kb2NzL2JpbGxpbmcvbGltaXRzLWFsZXJ0cycpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzPy5mZWF0dXJlRmxhZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZW5kRmVhdHVyZUZsYWdFdmVudCkgdGhpcy5mbGFnQ2FsbFJlcG9ydGVkID0ge307XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZlYXR1cmVGbGFnRGV0YWlscyA9IHJlcztcbiAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9yc1doaWxlQ29tcHV0aW5nRmxhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEZsYWdEZXRhaWxzID0gdGhpcy5nZXRLbm93bkZlYXR1cmVGbGFnRGV0YWlscygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbygnQ2FjaGVkIGZlYXR1cmUgZmxhZ3M6ICcsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRGbGFnRGV0YWlscykpO1xuICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlRmxhZ0RldGFpbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN1cnJlbnRGbGFnRGV0YWlscz8uZmxhZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVzLmZsYWdzXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0S25vd25GZWF0dXJlRmxhZ0RldGFpbHMobmV3RmVhdHVyZUZsYWdEZXRhaWxzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5GbGFnc0VuZHBvaW50V2FzSGl0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU2Vzc2lvblJlcGxheSgnZmxhZ3MnLCByZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgdGhpcy5fZmxhZ3NSZXNwb25zZVByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5fZmxhZ3NSZXNwb25zZVByb21pc2U7XG4gICAgfVxuICAgIHNldEtub3duRmVhdHVyZUZsYWdEZXRhaWxzKGZsYWdzUmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy53cmFwKCgpPT57XG4gICAgICAgICAgICB0aGlzLnNldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5GZWF0dXJlRmxhZ0RldGFpbHMsIGZsYWdzUmVzcG9uc2UpO1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRzLmVtaXQoJ2ZlYXR1cmVmbGFncycsIGdldEZsYWdWYWx1ZXNGcm9tRmxhZ3MoZmxhZ3NSZXNwb25zZT8uZmxhZ3MgPz8ge30pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEtub3duRmVhdHVyZUZsYWdEZXRhaWxzKCkge1xuICAgICAgICBjb25zdCBzdG9yZWREZXRhaWxzID0gdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuRmVhdHVyZUZsYWdEZXRhaWxzKTtcbiAgICAgICAgaWYgKCFzdG9yZWREZXRhaWxzKSB7XG4gICAgICAgICAgICBjb25zdCBmZWF0dXJlRmxhZ3MgPSB0aGlzLmdldFBlcnNpc3RlZFByb3BlcnR5KFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eS5GZWF0dXJlRmxhZ3MpO1xuICAgICAgICAgICAgY29uc3QgZmVhdHVyZUZsYWdQYXlsb2FkcyA9IHRoaXMuZ2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LkZlYXR1cmVGbGFnUGF5bG9hZHMpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZmVhdHVyZUZsYWdzICYmIHZvaWQgMCA9PT0gZmVhdHVyZUZsYWdQYXlsb2FkcykgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUZsYWdzUmVzcG9uc2VGcm9tRmxhZ3NBbmRQYXlsb2FkcyhmZWF0dXJlRmxhZ3MgPz8ge30sIGZlYXR1cmVGbGFnUGF5bG9hZHMgPz8ge30pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3JtYWxpemVGbGFnc1Jlc3BvbnNlKHN0b3JlZERldGFpbHMpO1xuICAgIH1cbiAgICBnZXRLbm93bkZlYXR1cmVGbGFncygpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZUZsYWdEZXRhaWxzID0gdGhpcy5nZXRLbm93bkZlYXR1cmVGbGFnRGV0YWlscygpO1xuICAgICAgICBpZiAoIWZlYXR1cmVGbGFnRGV0YWlscykgcmV0dXJuO1xuICAgICAgICByZXR1cm4gZ2V0RmxhZ1ZhbHVlc0Zyb21GbGFncyhmZWF0dXJlRmxhZ0RldGFpbHMuZmxhZ3MpO1xuICAgIH1cbiAgICBnZXRLbm93bkZlYXR1cmVGbGFnUGF5bG9hZHMoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVGbGFnRGV0YWlscyA9IHRoaXMuZ2V0S25vd25GZWF0dXJlRmxhZ0RldGFpbHMoKTtcbiAgICAgICAgaWYgKCFmZWF0dXJlRmxhZ0RldGFpbHMpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGdldFBheWxvYWRzRnJvbUZsYWdzKGZlYXR1cmVGbGFnRGV0YWlscy5mbGFncyk7XG4gICAgfVxuICAgIGdldEJvb3RzdHJhcHBlZEZlYXR1cmVGbGFnRGV0YWlscygpIHtcbiAgICAgICAgY29uc3QgZGV0YWlscyA9IHRoaXMuZ2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5LkJvb3RzdHJhcEZlYXR1cmVGbGFnRGV0YWlscyk7XG4gICAgICAgIGlmICghZGV0YWlscykgcmV0dXJuO1xuICAgICAgICByZXR1cm4gZGV0YWlscztcbiAgICB9XG4gICAgc2V0Qm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdEZXRhaWxzKGRldGFpbHMpIHtcbiAgICAgICAgdGhpcy5zZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuQm9vdHN0cmFwRmVhdHVyZUZsYWdEZXRhaWxzLCBkZXRhaWxzKTtcbiAgICB9XG4gICAgZ2V0Qm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdzKCkge1xuICAgICAgICBjb25zdCBkZXRhaWxzID0gdGhpcy5nZXRCb290c3RyYXBwZWRGZWF0dXJlRmxhZ0RldGFpbHMoKTtcbiAgICAgICAgaWYgKCFkZXRhaWxzKSByZXR1cm47XG4gICAgICAgIHJldHVybiBnZXRGbGFnVmFsdWVzRnJvbUZsYWdzKGRldGFpbHMuZmxhZ3MpO1xuICAgIH1cbiAgICBnZXRCb290c3RyYXBwZWRGZWF0dXJlRmxhZ1BheWxvYWRzKCkge1xuICAgICAgICBjb25zdCBkZXRhaWxzID0gdGhpcy5nZXRCb290c3RyYXBwZWRGZWF0dXJlRmxhZ0RldGFpbHMoKTtcbiAgICAgICAgaWYgKCFkZXRhaWxzKSByZXR1cm47XG4gICAgICAgIHJldHVybiBnZXRQYXlsb2Fkc0Zyb21GbGFncyhkZXRhaWxzLmZsYWdzKTtcbiAgICB9XG4gICAgZ2V0RmVhdHVyZUZsYWcoa2V5KSB7XG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSB0aGlzLmdldEZlYXR1cmVGbGFnRGV0YWlscygpO1xuICAgICAgICBpZiAoIWRldGFpbHMpIHJldHVybjtcbiAgICAgICAgY29uc3QgZmVhdHVyZUZsYWcgPSBkZXRhaWxzLmZsYWdzW2tleV07XG4gICAgICAgIGxldCByZXNwb25zZSA9IGdldEZlYXR1cmVGbGFnVmFsdWUoZmVhdHVyZUZsYWcpO1xuICAgICAgICBpZiAodm9pZCAwID09PSByZXNwb25zZSkgcmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc2VuZEZlYXR1cmVGbGFnRXZlbnQgJiYgIXRoaXMuZmxhZ0NhbGxSZXBvcnRlZFtrZXldKSB7XG4gICAgICAgICAgICBjb25zdCBib290c3RyYXBwZWRSZXNwb25zZSA9IHRoaXMuZ2V0Qm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdzKCk/LltrZXldO1xuICAgICAgICAgICAgY29uc3QgYm9vdHN0cmFwcGVkUGF5bG9hZCA9IHRoaXMuZ2V0Qm9vdHN0cmFwcGVkRmVhdHVyZUZsYWdQYXlsb2FkcygpPy5ba2V5XTtcbiAgICAgICAgICAgIHRoaXMuZmxhZ0NhbGxSZXBvcnRlZFtrZXldID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2FwdHVyZSgnJGZlYXR1cmVfZmxhZ19jYWxsZWQnLCB7XG4gICAgICAgICAgICAgICAgJGZlYXR1cmVfZmxhZzoga2V5LFxuICAgICAgICAgICAgICAgICRmZWF0dXJlX2ZsYWdfcmVzcG9uc2U6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIC4uLm1heWJlQWRkKCckZmVhdHVyZV9mbGFnX2lkJywgZmVhdHVyZUZsYWc/Lm1ldGFkYXRhPy5pZCksXG4gICAgICAgICAgICAgICAgLi4ubWF5YmVBZGQoJyRmZWF0dXJlX2ZsYWdfdmVyc2lvbicsIGZlYXR1cmVGbGFnPy5tZXRhZGF0YT8udmVyc2lvbiksXG4gICAgICAgICAgICAgICAgLi4ubWF5YmVBZGQoJyRmZWF0dXJlX2ZsYWdfcmVhc29uJywgZmVhdHVyZUZsYWc/LnJlYXNvbj8uZGVzY3JpcHRpb24gPz8gZmVhdHVyZUZsYWc/LnJlYXNvbj8uY29kZSksXG4gICAgICAgICAgICAgICAgLi4ubWF5YmVBZGQoJyRmZWF0dXJlX2ZsYWdfYm9vdHN0cmFwcGVkX3Jlc3BvbnNlJywgYm9vdHN0cmFwcGVkUmVzcG9uc2UpLFxuICAgICAgICAgICAgICAgIC4uLm1heWJlQWRkKCckZmVhdHVyZV9mbGFnX2Jvb3RzdHJhcHBlZF9wYXlsb2FkJywgYm9vdHN0cmFwcGVkUGF5bG9hZCksXG4gICAgICAgICAgICAgICAgJHVzZWRfYm9vdHN0cmFwX3ZhbHVlOiAhdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuRmxhZ3NFbmRwb2ludFdhc0hpdCksXG4gICAgICAgICAgICAgICAgLi4ubWF5YmVBZGQoJyRmZWF0dXJlX2ZsYWdfcmVxdWVzdF9pZCcsIGRldGFpbHMucmVxdWVzdElkKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICBnZXRGZWF0dXJlRmxhZ1BheWxvYWQoa2V5KSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWRzID0gdGhpcy5nZXRGZWF0dXJlRmxhZ1BheWxvYWRzKCk7XG4gICAgICAgIGlmICghcGF5bG9hZHMpIHJldHVybjtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBwYXlsb2Fkc1trZXldO1xuICAgICAgICBpZiAodm9pZCAwID09PSByZXNwb25zZSkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgZ2V0RmVhdHVyZUZsYWdQYXlsb2FkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUZsYWdEZXRhaWxzKCk/LmZlYXR1cmVGbGFnUGF5bG9hZHM7XG4gICAgfVxuICAgIGdldEZlYXR1cmVGbGFncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmVhdHVyZUZsYWdEZXRhaWxzKCk/LmZlYXR1cmVGbGFncztcbiAgICB9XG4gICAgZ2V0RmVhdHVyZUZsYWdEZXRhaWxzKCkge1xuICAgICAgICBsZXQgZGV0YWlscyA9IHRoaXMuZ2V0S25vd25GZWF0dXJlRmxhZ0RldGFpbHMoKTtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGRlbkZsYWdzID0gdGhpcy5nZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuT3ZlcnJpZGVGZWF0dXJlRmxhZ3MpO1xuICAgICAgICBpZiAoIW92ZXJyaWRkZW5GbGFncykgcmV0dXJuIGRldGFpbHM7XG4gICAgICAgIGRldGFpbHMgPSBkZXRhaWxzID8/IHtcbiAgICAgICAgICAgIGZlYXR1cmVGbGFnczoge30sXG4gICAgICAgICAgICBmZWF0dXJlRmxhZ1BheWxvYWRzOiB7fSxcbiAgICAgICAgICAgIGZsYWdzOiB7fVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmbGFncyA9IGRldGFpbHMuZmxhZ3MgPz8ge307XG4gICAgICAgIGZvcihjb25zdCBrZXkgaW4gb3ZlcnJpZGRlbkZsYWdzKWlmIChvdmVycmlkZGVuRmxhZ3Nba2V5XSkgZmxhZ3Nba2V5XSA9IHVwZGF0ZUZsYWdWYWx1ZShmbGFnc1trZXldLCBvdmVycmlkZGVuRmxhZ3Nba2V5XSk7XG4gICAgICAgIGVsc2UgZGVsZXRlIGZsYWdzW2tleV07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIC4uLmRldGFpbHMsXG4gICAgICAgICAgICBmbGFnc1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplRmxhZ3NSZXNwb25zZShyZXN1bHQpO1xuICAgIH1cbiAgICBnZXRGZWF0dXJlRmxhZ3NBbmRQYXlsb2FkcygpIHtcbiAgICAgICAgY29uc3QgZmxhZ3MgPSB0aGlzLmdldEZlYXR1cmVGbGFncygpO1xuICAgICAgICBjb25zdCBwYXlsb2FkcyA9IHRoaXMuZ2V0RmVhdHVyZUZsYWdQYXlsb2FkcygpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmxhZ3MsXG4gICAgICAgICAgICBwYXlsb2Fkc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBpc0ZlYXR1cmVFbmFibGVkKGtleSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMuZ2V0RmVhdHVyZUZsYWcoa2V5KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcmVzcG9uc2UpIHJldHVybjtcbiAgICAgICAgcmV0dXJuICEhcmVzcG9uc2U7XG4gICAgfVxuICAgIHJlbG9hZEZlYXR1cmVGbGFncyhvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZmxhZ3NBc3luYyh0cnVlKS50aGVuKChyZXMpPT57XG4gICAgICAgICAgICBvcHRpb25zPy5jYj8uKHZvaWQgMCwgcmVzPy5mZWF0dXJlRmxhZ3MpO1xuICAgICAgICB9KS5jYXRjaCgoZSk9PntcbiAgICAgICAgICAgIG9wdGlvbnM/LmNiPy4oZSwgdm9pZCAwKTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucz8uY2IpIHRoaXMuX2xvZ2dlci5pbmZvKCdFcnJvciByZWxvYWRpbmcgZmVhdHVyZSBmbGFncycsIGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcmVsb2FkUmVtb3RlQ29uZmlnQXN5bmMoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbW90ZUNvbmZpZ0FzeW5jKCk7XG4gICAgfVxuICAgIGFzeW5jIHJlbG9hZEZlYXR1cmVGbGFnc0FzeW5jKHNlbmRBbm9uRGlzdGluY3RJZCkge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuZmxhZ3NBc3luYyhzZW5kQW5vbkRpc3RpbmN0SWQgPz8gdHJ1ZSkpPy5mZWF0dXJlRmxhZ3M7XG4gICAgfVxuICAgIG9uRmVhdHVyZUZsYWdzKGNiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9uKCdmZWF0dXJlZmxhZ3MnLCBhc3luYyAoKT0+e1xuICAgICAgICAgICAgY29uc3QgZmxhZ3MgPSB0aGlzLmdldEZlYXR1cmVGbGFncygpO1xuICAgICAgICAgICAgaWYgKGZsYWdzKSBjYihmbGFncyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkZlYXR1cmVGbGFnKGtleSwgY2IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub24oJ2ZlYXR1cmVmbGFncycsIGFzeW5jICgpPT57XG4gICAgICAgICAgICBjb25zdCBmbGFnUmVzcG9uc2UgPSB0aGlzLmdldEZlYXR1cmVGbGFnKGtleSk7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBmbGFnUmVzcG9uc2UpIGNiKGZsYWdSZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBvdmVycmlkZUZlYXR1cmVGbGFnKGZsYWdzKSB7XG4gICAgICAgIHRoaXMud3JhcCgoKT0+e1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IGZsYWdzKSByZXR1cm4gdGhpcy5zZXRQZXJzaXN0ZWRQcm9wZXJ0eShQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkuT3ZlcnJpZGVGZWF0dXJlRmxhZ3MsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0UGVyc2lzdGVkUHJvcGVydHkoUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5Lk92ZXJyaWRlRmVhdHVyZUZsYWdzLCBmbGFncyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXB0dXJlRXhjZXB0aW9uKGVycm9yLCBhZGRpdGlvbmFsUHJvcGVydGllcykge1xuICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbl9sZXZlbDogJ2Vycm9yJyxcbiAgICAgICAgICAgICRleGNlcHRpb25fbGlzdDogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXNQbGFpbkVycm9yKGVycm9yKSA/IGVycm9yLm5hbWUgOiAnRXJyb3InLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXNQbGFpbkVycm9yKGVycm9yKSA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgbWVjaGFuaXNtOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ludGhldGljOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIC4uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2FwdHVyZSgnJGV4Y2VwdGlvbicsIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgICBjYXB0dXJlVHJhY2VGZWVkYmFjayh0cmFjZUlkLCB1c2VyRmVlZGJhY2spIHtcbiAgICAgICAgdGhpcy5jYXB0dXJlKCckYWlfZmVlZGJhY2snLCB7XG4gICAgICAgICAgICAkYWlfZmVlZGJhY2tfdGV4dDogdXNlckZlZWRiYWNrLFxuICAgICAgICAgICAgJGFpX3RyYWNlX2lkOiBTdHJpbmcodHJhY2VJZClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhcHR1cmVUcmFjZU1ldHJpYyh0cmFjZUlkLCBtZXRyaWNOYW1lLCBtZXRyaWNWYWx1ZSkge1xuICAgICAgICB0aGlzLmNhcHR1cmUoJyRhaV9tZXRyaWMnLCB7XG4gICAgICAgICAgICAkYWlfbWV0cmljX25hbWU6IG1ldHJpY05hbWUsXG4gICAgICAgICAgICAkYWlfbWV0cmljX3ZhbHVlOiBTdHJpbmcobWV0cmljVmFsdWUpLFxuICAgICAgICAgICAgJGFpX3RyYWNlX2lkOiBTdHJpbmcodHJhY2VJZClcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IHsgUG9zdEhvZ0NvcmUgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/posthog-core.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/types.mjs":
/*!*********************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/types.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionStepStringMatching: () => (/* binding */ types_ActionStepStringMatching),\n/* harmony export */   Compression: () => (/* binding */ types_Compression),\n/* harmony export */   PostHogPersistedProperty: () => (/* binding */ types_PostHogPersistedProperty),\n/* harmony export */   SurveyMatchType: () => (/* binding */ types_SurveyMatchType),\n/* harmony export */   SurveyPosition: () => (/* binding */ types_SurveyPosition),\n/* harmony export */   SurveyQuestionBranchingType: () => (/* binding */ types_SurveyQuestionBranchingType),\n/* harmony export */   SurveyQuestionDescriptionContentType: () => (/* binding */ types_SurveyQuestionDescriptionContentType),\n/* harmony export */   SurveyQuestionType: () => (/* binding */ types_SurveyQuestionType),\n/* harmony export */   SurveyRatingDisplay: () => (/* binding */ types_SurveyRatingDisplay),\n/* harmony export */   SurveyType: () => (/* binding */ types_SurveyType),\n/* harmony export */   SurveyWidgetType: () => (/* binding */ types_SurveyWidgetType),\n/* harmony export */   knownUnsafeEditableEvent: () => (/* binding */ knownUnsafeEditableEvent)\n/* harmony export */ });\nvar types_PostHogPersistedProperty = /*#__PURE__*/ function(PostHogPersistedProperty) {\n    PostHogPersistedProperty[\"AnonymousId\"] = \"anonymous_id\";\n    PostHogPersistedProperty[\"DistinctId\"] = \"distinct_id\";\n    PostHogPersistedProperty[\"Props\"] = \"props\";\n    PostHogPersistedProperty[\"FeatureFlagDetails\"] = \"feature_flag_details\";\n    PostHogPersistedProperty[\"FeatureFlags\"] = \"feature_flags\";\n    PostHogPersistedProperty[\"FeatureFlagPayloads\"] = \"feature_flag_payloads\";\n    PostHogPersistedProperty[\"BootstrapFeatureFlagDetails\"] = \"bootstrap_feature_flag_details\";\n    PostHogPersistedProperty[\"BootstrapFeatureFlags\"] = \"bootstrap_feature_flags\";\n    PostHogPersistedProperty[\"BootstrapFeatureFlagPayloads\"] = \"bootstrap_feature_flag_payloads\";\n    PostHogPersistedProperty[\"OverrideFeatureFlags\"] = \"override_feature_flags\";\n    PostHogPersistedProperty[\"Queue\"] = \"queue\";\n    PostHogPersistedProperty[\"OptedOut\"] = \"opted_out\";\n    PostHogPersistedProperty[\"SessionId\"] = \"session_id\";\n    PostHogPersistedProperty[\"SessionStartTimestamp\"] = \"session_start_timestamp\";\n    PostHogPersistedProperty[\"SessionLastTimestamp\"] = \"session_timestamp\";\n    PostHogPersistedProperty[\"PersonProperties\"] = \"person_properties\";\n    PostHogPersistedProperty[\"GroupProperties\"] = \"group_properties\";\n    PostHogPersistedProperty[\"InstalledAppBuild\"] = \"installed_app_build\";\n    PostHogPersistedProperty[\"InstalledAppVersion\"] = \"installed_app_version\";\n    PostHogPersistedProperty[\"SessionReplay\"] = \"session_replay\";\n    PostHogPersistedProperty[\"SurveyLastSeenDate\"] = \"survey_last_seen_date\";\n    PostHogPersistedProperty[\"SurveysSeen\"] = \"surveys_seen\";\n    PostHogPersistedProperty[\"Surveys\"] = \"surveys\";\n    PostHogPersistedProperty[\"RemoteConfig\"] = \"remote_config\";\n    PostHogPersistedProperty[\"FlagsEndpointWasHit\"] = \"flags_endpoint_was_hit\";\n    return PostHogPersistedProperty;\n}({});\nvar types_Compression = /*#__PURE__*/ function(Compression) {\n    Compression[\"GZipJS\"] = \"gzip-js\";\n    Compression[\"Base64\"] = \"base64\";\n    return Compression;\n}({});\nvar types_SurveyPosition = /*#__PURE__*/ function(SurveyPosition) {\n    SurveyPosition[\"TopLeft\"] = \"top_left\";\n    SurveyPosition[\"TopCenter\"] = \"top_center\";\n    SurveyPosition[\"TopRight\"] = \"top_right\";\n    SurveyPosition[\"MiddleLeft\"] = \"middle_left\";\n    SurveyPosition[\"MiddleCenter\"] = \"middle_center\";\n    SurveyPosition[\"MiddleRight\"] = \"middle_right\";\n    SurveyPosition[\"Left\"] = \"left\";\n    SurveyPosition[\"Right\"] = \"right\";\n    SurveyPosition[\"Center\"] = \"center\";\n    return SurveyPosition;\n}({});\nvar types_SurveyWidgetType = /*#__PURE__*/ function(SurveyWidgetType) {\n    SurveyWidgetType[\"Button\"] = \"button\";\n    SurveyWidgetType[\"Tab\"] = \"tab\";\n    SurveyWidgetType[\"Selector\"] = \"selector\";\n    return SurveyWidgetType;\n}({});\nvar types_SurveyType = /*#__PURE__*/ function(SurveyType) {\n    SurveyType[\"Popover\"] = \"popover\";\n    SurveyType[\"API\"] = \"api\";\n    SurveyType[\"Widget\"] = \"widget\";\n    SurveyType[\"ExternalSurvey\"] = \"external_survey\";\n    return SurveyType;\n}({});\nvar types_SurveyQuestionDescriptionContentType = /*#__PURE__*/ function(SurveyQuestionDescriptionContentType) {\n    SurveyQuestionDescriptionContentType[\"Html\"] = \"html\";\n    SurveyQuestionDescriptionContentType[\"Text\"] = \"text\";\n    return SurveyQuestionDescriptionContentType;\n}({});\nvar types_SurveyRatingDisplay = /*#__PURE__*/ function(SurveyRatingDisplay) {\n    SurveyRatingDisplay[\"Number\"] = \"number\";\n    SurveyRatingDisplay[\"Emoji\"] = \"emoji\";\n    return SurveyRatingDisplay;\n}({});\nvar types_SurveyQuestionType = /*#__PURE__*/ function(SurveyQuestionType) {\n    SurveyQuestionType[\"Open\"] = \"open\";\n    SurveyQuestionType[\"MultipleChoice\"] = \"multiple_choice\";\n    SurveyQuestionType[\"SingleChoice\"] = \"single_choice\";\n    SurveyQuestionType[\"Rating\"] = \"rating\";\n    SurveyQuestionType[\"Link\"] = \"link\";\n    return SurveyQuestionType;\n}({});\nvar types_SurveyQuestionBranchingType = /*#__PURE__*/ function(SurveyQuestionBranchingType) {\n    SurveyQuestionBranchingType[\"NextQuestion\"] = \"next_question\";\n    SurveyQuestionBranchingType[\"End\"] = \"end\";\n    SurveyQuestionBranchingType[\"ResponseBased\"] = \"response_based\";\n    SurveyQuestionBranchingType[\"SpecificQuestion\"] = \"specific_question\";\n    return SurveyQuestionBranchingType;\n}({});\nvar types_SurveyMatchType = /*#__PURE__*/ function(SurveyMatchType) {\n    SurveyMatchType[\"Regex\"] = \"regex\";\n    SurveyMatchType[\"NotRegex\"] = \"not_regex\";\n    SurveyMatchType[\"Exact\"] = \"exact\";\n    SurveyMatchType[\"IsNot\"] = \"is_not\";\n    SurveyMatchType[\"Icontains\"] = \"icontains\";\n    SurveyMatchType[\"NotIcontains\"] = \"not_icontains\";\n    return SurveyMatchType;\n}({});\nvar types_ActionStepStringMatching = /*#__PURE__*/ function(ActionStepStringMatching) {\n    ActionStepStringMatching[\"Contains\"] = \"contains\";\n    ActionStepStringMatching[\"Exact\"] = \"exact\";\n    ActionStepStringMatching[\"Regex\"] = \"regex\";\n    return ActionStepStringMatching;\n}({});\nconst knownUnsafeEditableEvent = [\n    '$snapshot',\n    '$pageview',\n    '$pageleave',\n    '$set',\n    'survey dismissed',\n    'survey sent',\n    'survey shown',\n    '$identify',\n    '$groupidentify',\n    '$create_alias',\n    '$$client_ingestion_warning',\n    '$web_experiment_applied',\n    '$feature_enrollment_update',\n    '$feature_flag_called'\n];\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdHlwZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEdBQUc7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxHQUFHO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsR0FBRztBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ29sQiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdHlwZXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB0eXBlc19Qb3N0SG9nUGVyc2lzdGVkUHJvcGVydHkgPSAvKiNfX1BVUkVfXyovIGZ1bmN0aW9uKFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eSkge1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIkFub255bW91c0lkXCJdID0gXCJhbm9ueW1vdXNfaWRcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJEaXN0aW5jdElkXCJdID0gXCJkaXN0aW5jdF9pZFwiO1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIlByb3BzXCJdID0gXCJwcm9wc1wiO1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIkZlYXR1cmVGbGFnRGV0YWlsc1wiXSA9IFwiZmVhdHVyZV9mbGFnX2RldGFpbHNcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJGZWF0dXJlRmxhZ3NcIl0gPSBcImZlYXR1cmVfZmxhZ3NcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJGZWF0dXJlRmxhZ1BheWxvYWRzXCJdID0gXCJmZWF0dXJlX2ZsYWdfcGF5bG9hZHNcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJCb290c3RyYXBGZWF0dXJlRmxhZ0RldGFpbHNcIl0gPSBcImJvb3RzdHJhcF9mZWF0dXJlX2ZsYWdfZGV0YWlsc1wiO1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIkJvb3RzdHJhcEZlYXR1cmVGbGFnc1wiXSA9IFwiYm9vdHN0cmFwX2ZlYXR1cmVfZmxhZ3NcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJCb290c3RyYXBGZWF0dXJlRmxhZ1BheWxvYWRzXCJdID0gXCJib290c3RyYXBfZmVhdHVyZV9mbGFnX3BheWxvYWRzXCI7XG4gICAgUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5W1wiT3ZlcnJpZGVGZWF0dXJlRmxhZ3NcIl0gPSBcIm92ZXJyaWRlX2ZlYXR1cmVfZmxhZ3NcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJRdWV1ZVwiXSA9IFwicXVldWVcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJPcHRlZE91dFwiXSA9IFwib3B0ZWRfb3V0XCI7XG4gICAgUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5W1wiU2Vzc2lvbklkXCJdID0gXCJzZXNzaW9uX2lkXCI7XG4gICAgUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5W1wiU2Vzc2lvblN0YXJ0VGltZXN0YW1wXCJdID0gXCJzZXNzaW9uX3N0YXJ0X3RpbWVzdGFtcFwiO1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIlNlc3Npb25MYXN0VGltZXN0YW1wXCJdID0gXCJzZXNzaW9uX3RpbWVzdGFtcFwiO1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIlBlcnNvblByb3BlcnRpZXNcIl0gPSBcInBlcnNvbl9wcm9wZXJ0aWVzXCI7XG4gICAgUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5W1wiR3JvdXBQcm9wZXJ0aWVzXCJdID0gXCJncm91cF9wcm9wZXJ0aWVzXCI7XG4gICAgUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5W1wiSW5zdGFsbGVkQXBwQnVpbGRcIl0gPSBcImluc3RhbGxlZF9hcHBfYnVpbGRcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJJbnN0YWxsZWRBcHBWZXJzaW9uXCJdID0gXCJpbnN0YWxsZWRfYXBwX3ZlcnNpb25cIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJTZXNzaW9uUmVwbGF5XCJdID0gXCJzZXNzaW9uX3JlcGxheVwiO1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIlN1cnZleUxhc3RTZWVuRGF0ZVwiXSA9IFwic3VydmV5X2xhc3Rfc2Vlbl9kYXRlXCI7XG4gICAgUG9zdEhvZ1BlcnNpc3RlZFByb3BlcnR5W1wiU3VydmV5c1NlZW5cIl0gPSBcInN1cnZleXNfc2VlblwiO1xuICAgIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eVtcIlN1cnZleXNcIl0gPSBcInN1cnZleXNcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJSZW1vdGVDb25maWdcIl0gPSBcInJlbW90ZV9jb25maWdcIjtcbiAgICBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHlbXCJGbGFnc0VuZHBvaW50V2FzSGl0XCJdID0gXCJmbGFnc19lbmRwb2ludF93YXNfaGl0XCI7XG4gICAgcmV0dXJuIFBvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eTtcbn0oe30pO1xudmFyIHR5cGVzX0NvbXByZXNzaW9uID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihDb21wcmVzc2lvbikge1xuICAgIENvbXByZXNzaW9uW1wiR1ppcEpTXCJdID0gXCJnemlwLWpzXCI7XG4gICAgQ29tcHJlc3Npb25bXCJCYXNlNjRcIl0gPSBcImJhc2U2NFwiO1xuICAgIHJldHVybiBDb21wcmVzc2lvbjtcbn0oe30pO1xudmFyIHR5cGVzX1N1cnZleVBvc2l0aW9uID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihTdXJ2ZXlQb3NpdGlvbikge1xuICAgIFN1cnZleVBvc2l0aW9uW1wiVG9wTGVmdFwiXSA9IFwidG9wX2xlZnRcIjtcbiAgICBTdXJ2ZXlQb3NpdGlvbltcIlRvcENlbnRlclwiXSA9IFwidG9wX2NlbnRlclwiO1xuICAgIFN1cnZleVBvc2l0aW9uW1wiVG9wUmlnaHRcIl0gPSBcInRvcF9yaWdodFwiO1xuICAgIFN1cnZleVBvc2l0aW9uW1wiTWlkZGxlTGVmdFwiXSA9IFwibWlkZGxlX2xlZnRcIjtcbiAgICBTdXJ2ZXlQb3NpdGlvbltcIk1pZGRsZUNlbnRlclwiXSA9IFwibWlkZGxlX2NlbnRlclwiO1xuICAgIFN1cnZleVBvc2l0aW9uW1wiTWlkZGxlUmlnaHRcIl0gPSBcIm1pZGRsZV9yaWdodFwiO1xuICAgIFN1cnZleVBvc2l0aW9uW1wiTGVmdFwiXSA9IFwibGVmdFwiO1xuICAgIFN1cnZleVBvc2l0aW9uW1wiUmlnaHRcIl0gPSBcInJpZ2h0XCI7XG4gICAgU3VydmV5UG9zaXRpb25bXCJDZW50ZXJcIl0gPSBcImNlbnRlclwiO1xuICAgIHJldHVybiBTdXJ2ZXlQb3NpdGlvbjtcbn0oe30pO1xudmFyIHR5cGVzX1N1cnZleVdpZGdldFR5cGUgPSAvKiNfX1BVUkVfXyovIGZ1bmN0aW9uKFN1cnZleVdpZGdldFR5cGUpIHtcbiAgICBTdXJ2ZXlXaWRnZXRUeXBlW1wiQnV0dG9uXCJdID0gXCJidXR0b25cIjtcbiAgICBTdXJ2ZXlXaWRnZXRUeXBlW1wiVGFiXCJdID0gXCJ0YWJcIjtcbiAgICBTdXJ2ZXlXaWRnZXRUeXBlW1wiU2VsZWN0b3JcIl0gPSBcInNlbGVjdG9yXCI7XG4gICAgcmV0dXJuIFN1cnZleVdpZGdldFR5cGU7XG59KHt9KTtcbnZhciB0eXBlc19TdXJ2ZXlUeXBlID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihTdXJ2ZXlUeXBlKSB7XG4gICAgU3VydmV5VHlwZVtcIlBvcG92ZXJcIl0gPSBcInBvcG92ZXJcIjtcbiAgICBTdXJ2ZXlUeXBlW1wiQVBJXCJdID0gXCJhcGlcIjtcbiAgICBTdXJ2ZXlUeXBlW1wiV2lkZ2V0XCJdID0gXCJ3aWRnZXRcIjtcbiAgICBTdXJ2ZXlUeXBlW1wiRXh0ZXJuYWxTdXJ2ZXlcIl0gPSBcImV4dGVybmFsX3N1cnZleVwiO1xuICAgIHJldHVybiBTdXJ2ZXlUeXBlO1xufSh7fSk7XG52YXIgdHlwZXNfU3VydmV5UXVlc3Rpb25EZXNjcmlwdGlvbkNvbnRlbnRUeXBlID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihTdXJ2ZXlRdWVzdGlvbkRlc2NyaXB0aW9uQ29udGVudFR5cGUpIHtcbiAgICBTdXJ2ZXlRdWVzdGlvbkRlc2NyaXB0aW9uQ29udGVudFR5cGVbXCJIdG1sXCJdID0gXCJodG1sXCI7XG4gICAgU3VydmV5UXVlc3Rpb25EZXNjcmlwdGlvbkNvbnRlbnRUeXBlW1wiVGV4dFwiXSA9IFwidGV4dFwiO1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkRlc2NyaXB0aW9uQ29udGVudFR5cGU7XG59KHt9KTtcbnZhciB0eXBlc19TdXJ2ZXlSYXRpbmdEaXNwbGF5ID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihTdXJ2ZXlSYXRpbmdEaXNwbGF5KSB7XG4gICAgU3VydmV5UmF0aW5nRGlzcGxheVtcIk51bWJlclwiXSA9IFwibnVtYmVyXCI7XG4gICAgU3VydmV5UmF0aW5nRGlzcGxheVtcIkVtb2ppXCJdID0gXCJlbW9qaVwiO1xuICAgIHJldHVybiBTdXJ2ZXlSYXRpbmdEaXNwbGF5O1xufSh7fSk7XG52YXIgdHlwZXNfU3VydmV5UXVlc3Rpb25UeXBlID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihTdXJ2ZXlRdWVzdGlvblR5cGUpIHtcbiAgICBTdXJ2ZXlRdWVzdGlvblR5cGVbXCJPcGVuXCJdID0gXCJvcGVuXCI7XG4gICAgU3VydmV5UXVlc3Rpb25UeXBlW1wiTXVsdGlwbGVDaG9pY2VcIl0gPSBcIm11bHRpcGxlX2Nob2ljZVwiO1xuICAgIFN1cnZleVF1ZXN0aW9uVHlwZVtcIlNpbmdsZUNob2ljZVwiXSA9IFwic2luZ2xlX2Nob2ljZVwiO1xuICAgIFN1cnZleVF1ZXN0aW9uVHlwZVtcIlJhdGluZ1wiXSA9IFwicmF0aW5nXCI7XG4gICAgU3VydmV5UXVlc3Rpb25UeXBlW1wiTGlua1wiXSA9IFwibGlua1wiO1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvblR5cGU7XG59KHt9KTtcbnZhciB0eXBlc19TdXJ2ZXlRdWVzdGlvbkJyYW5jaGluZ1R5cGUgPSAvKiNfX1BVUkVfXyovIGZ1bmN0aW9uKFN1cnZleVF1ZXN0aW9uQnJhbmNoaW5nVHlwZSkge1xuICAgIFN1cnZleVF1ZXN0aW9uQnJhbmNoaW5nVHlwZVtcIk5leHRRdWVzdGlvblwiXSA9IFwibmV4dF9xdWVzdGlvblwiO1xuICAgIFN1cnZleVF1ZXN0aW9uQnJhbmNoaW5nVHlwZVtcIkVuZFwiXSA9IFwiZW5kXCI7XG4gICAgU3VydmV5UXVlc3Rpb25CcmFuY2hpbmdUeXBlW1wiUmVzcG9uc2VCYXNlZFwiXSA9IFwicmVzcG9uc2VfYmFzZWRcIjtcbiAgICBTdXJ2ZXlRdWVzdGlvbkJyYW5jaGluZ1R5cGVbXCJTcGVjaWZpY1F1ZXN0aW9uXCJdID0gXCJzcGVjaWZpY19xdWVzdGlvblwiO1xuICAgIHJldHVybiBTdXJ2ZXlRdWVzdGlvbkJyYW5jaGluZ1R5cGU7XG59KHt9KTtcbnZhciB0eXBlc19TdXJ2ZXlNYXRjaFR5cGUgPSAvKiNfX1BVUkVfXyovIGZ1bmN0aW9uKFN1cnZleU1hdGNoVHlwZSkge1xuICAgIFN1cnZleU1hdGNoVHlwZVtcIlJlZ2V4XCJdID0gXCJyZWdleFwiO1xuICAgIFN1cnZleU1hdGNoVHlwZVtcIk5vdFJlZ2V4XCJdID0gXCJub3RfcmVnZXhcIjtcbiAgICBTdXJ2ZXlNYXRjaFR5cGVbXCJFeGFjdFwiXSA9IFwiZXhhY3RcIjtcbiAgICBTdXJ2ZXlNYXRjaFR5cGVbXCJJc05vdFwiXSA9IFwiaXNfbm90XCI7XG4gICAgU3VydmV5TWF0Y2hUeXBlW1wiSWNvbnRhaW5zXCJdID0gXCJpY29udGFpbnNcIjtcbiAgICBTdXJ2ZXlNYXRjaFR5cGVbXCJOb3RJY29udGFpbnNcIl0gPSBcIm5vdF9pY29udGFpbnNcIjtcbiAgICByZXR1cm4gU3VydmV5TWF0Y2hUeXBlO1xufSh7fSk7XG52YXIgdHlwZXNfQWN0aW9uU3RlcFN0cmluZ01hdGNoaW5nID0gLyojX19QVVJFX18qLyBmdW5jdGlvbihBY3Rpb25TdGVwU3RyaW5nTWF0Y2hpbmcpIHtcbiAgICBBY3Rpb25TdGVwU3RyaW5nTWF0Y2hpbmdbXCJDb250YWluc1wiXSA9IFwiY29udGFpbnNcIjtcbiAgICBBY3Rpb25TdGVwU3RyaW5nTWF0Y2hpbmdbXCJFeGFjdFwiXSA9IFwiZXhhY3RcIjtcbiAgICBBY3Rpb25TdGVwU3RyaW5nTWF0Y2hpbmdbXCJSZWdleFwiXSA9IFwicmVnZXhcIjtcbiAgICByZXR1cm4gQWN0aW9uU3RlcFN0cmluZ01hdGNoaW5nO1xufSh7fSk7XG5jb25zdCBrbm93blVuc2FmZUVkaXRhYmxlRXZlbnQgPSBbXG4gICAgJyRzbmFwc2hvdCcsXG4gICAgJyRwYWdldmlldycsXG4gICAgJyRwYWdlbGVhdmUnLFxuICAgICckc2V0JyxcbiAgICAnc3VydmV5IGRpc21pc3NlZCcsXG4gICAgJ3N1cnZleSBzZW50JyxcbiAgICAnc3VydmV5IHNob3duJyxcbiAgICAnJGlkZW50aWZ5JyxcbiAgICAnJGdyb3VwaWRlbnRpZnknLFxuICAgICckY3JlYXRlX2FsaWFzJyxcbiAgICAnJCRjbGllbnRfaW5nZXN0aW9uX3dhcm5pbmcnLFxuICAgICckd2ViX2V4cGVyaW1lbnRfYXBwbGllZCcsXG4gICAgJyRmZWF0dXJlX2Vucm9sbG1lbnRfdXBkYXRlJyxcbiAgICAnJGZlYXR1cmVfZmxhZ19jYWxsZWQnXG5dO1xuZXhwb3J0IHsgdHlwZXNfQWN0aW9uU3RlcFN0cmluZ01hdGNoaW5nIGFzIEFjdGlvblN0ZXBTdHJpbmdNYXRjaGluZywgdHlwZXNfQ29tcHJlc3Npb24gYXMgQ29tcHJlc3Npb24sIHR5cGVzX1Bvc3RIb2dQZXJzaXN0ZWRQcm9wZXJ0eSBhcyBQb3N0SG9nUGVyc2lzdGVkUHJvcGVydHksIHR5cGVzX1N1cnZleU1hdGNoVHlwZSBhcyBTdXJ2ZXlNYXRjaFR5cGUsIHR5cGVzX1N1cnZleVBvc2l0aW9uIGFzIFN1cnZleVBvc2l0aW9uLCB0eXBlc19TdXJ2ZXlRdWVzdGlvbkJyYW5jaGluZ1R5cGUgYXMgU3VydmV5UXVlc3Rpb25CcmFuY2hpbmdUeXBlLCB0eXBlc19TdXJ2ZXlRdWVzdGlvbkRlc2NyaXB0aW9uQ29udGVudFR5cGUgYXMgU3VydmV5UXVlc3Rpb25EZXNjcmlwdGlvbkNvbnRlbnRUeXBlLCB0eXBlc19TdXJ2ZXlRdWVzdGlvblR5cGUgYXMgU3VydmV5UXVlc3Rpb25UeXBlLCB0eXBlc19TdXJ2ZXlSYXRpbmdEaXNwbGF5IGFzIFN1cnZleVJhdGluZ0Rpc3BsYXksIHR5cGVzX1N1cnZleVR5cGUgYXMgU3VydmV5VHlwZSwgdHlwZXNfU3VydmV5V2lkZ2V0VHlwZSBhcyBTdXJ2ZXlXaWRnZXRUeXBlLCBrbm93blVuc2FmZUVkaXRhYmxlRXZlbnQgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/types.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/bucketed-rate-limiter.mjs":
/*!*******************************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/bucketed-rate-limiter.mjs ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BucketedRateLimiter: () => (/* binding */ BucketedRateLimiter)\n/* harmony export */ });\n/* harmony import */ var _number_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number-utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/number-utils.mjs\");\n\nclass BucketedRateLimiter {\n    constructor(_options){\n        this._options = _options;\n        this._buckets = {};\n        this._refillBuckets = ()=>{\n            Object.keys(this._buckets).forEach((key)=>{\n                const newTokens = this._getBucket(key) + this._refillRate;\n                if (newTokens >= this._bucketSize) delete this._buckets[key];\n                else this._setBucket(key, newTokens);\n            });\n        };\n        this._getBucket = (key)=>this._buckets[String(key)];\n        this._setBucket = (key, value)=>{\n            this._buckets[String(key)] = value;\n        };\n        this.consumeRateLimit = (key)=>{\n            let tokens = this._getBucket(key) ?? this._bucketSize;\n            tokens = Math.max(tokens - 1, 0);\n            if (0 === tokens) return true;\n            this._setBucket(key, tokens);\n            const hasReachedZero = 0 === tokens;\n            if (hasReachedZero) this._onBucketRateLimited?.(key);\n            return hasReachedZero;\n        };\n        this._onBucketRateLimited = this._options._onBucketRateLimited;\n        this._bucketSize = (0,_number_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.clampToRange)(this._options.bucketSize, 0, 100, this._options._logger);\n        this._refillRate = (0,_number_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.clampToRange)(this._options.refillRate, 0, this._bucketSize, this._options._logger);\n        this._refillInterval = (0,_number_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.clampToRange)(this._options.refillInterval, 0, 86400000, this._options._logger);\n        this._removeInterval = setInterval(()=>{\n            this._refillBuckets();\n        }, this._refillInterval);\n    }\n    stop() {\n        if (this._removeInterval) {\n            clearInterval(this._removeInterval);\n            this._removeInterval = void 0;\n        }\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdXRpbHMvYnVja2V0ZWQtcmF0ZS1saW1pdGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtEQUFZO0FBQ3ZDLDJCQUEyQiwrREFBWTtBQUN2QywrQkFBK0IsK0RBQVk7QUFDM0M7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQytCIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC91dGlscy9idWNrZXRlZC1yYXRlLWxpbWl0ZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsYW1wVG9SYW5nZSB9IGZyb20gXCIuL251bWJlci11dGlscy5tanNcIjtcbmNsYXNzIEJ1Y2tldGVkUmF0ZUxpbWl0ZXIge1xuICAgIGNvbnN0cnVjdG9yKF9vcHRpb25zKXtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IF9vcHRpb25zO1xuICAgICAgICB0aGlzLl9idWNrZXRzID0ge307XG4gICAgICAgIHRoaXMuX3JlZmlsbEJ1Y2tldHMgPSAoKT0+e1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5fYnVja2V0cykuZm9yRWFjaCgoa2V5KT0+e1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VucyA9IHRoaXMuX2dldEJ1Y2tldChrZXkpICsgdGhpcy5fcmVmaWxsUmF0ZTtcbiAgICAgICAgICAgICAgICBpZiAobmV3VG9rZW5zID49IHRoaXMuX2J1Y2tldFNpemUpIGRlbGV0ZSB0aGlzLl9idWNrZXRzW2tleV07XG4gICAgICAgICAgICAgICAgZWxzZSB0aGlzLl9zZXRCdWNrZXQoa2V5LCBuZXdUb2tlbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2dldEJ1Y2tldCA9IChrZXkpPT50aGlzLl9idWNrZXRzW1N0cmluZyhrZXkpXTtcbiAgICAgICAgdGhpcy5fc2V0QnVja2V0ID0gKGtleSwgdmFsdWUpPT57XG4gICAgICAgICAgICB0aGlzLl9idWNrZXRzW1N0cmluZyhrZXkpXSA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbnN1bWVSYXRlTGltaXQgPSAoa2V5KT0+e1xuICAgICAgICAgICAgbGV0IHRva2VucyA9IHRoaXMuX2dldEJ1Y2tldChrZXkpID8/IHRoaXMuX2J1Y2tldFNpemU7XG4gICAgICAgICAgICB0b2tlbnMgPSBNYXRoLm1heCh0b2tlbnMgLSAxLCAwKTtcbiAgICAgICAgICAgIGlmICgwID09PSB0b2tlbnMpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fc2V0QnVja2V0KGtleSwgdG9rZW5zKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc1JlYWNoZWRaZXJvID0gMCA9PT0gdG9rZW5zO1xuICAgICAgICAgICAgaWYgKGhhc1JlYWNoZWRaZXJvKSB0aGlzLl9vbkJ1Y2tldFJhdGVMaW1pdGVkPy4oa2V5KTtcbiAgICAgICAgICAgIHJldHVybiBoYXNSZWFjaGVkWmVybztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fb25CdWNrZXRSYXRlTGltaXRlZCA9IHRoaXMuX29wdGlvbnMuX29uQnVja2V0UmF0ZUxpbWl0ZWQ7XG4gICAgICAgIHRoaXMuX2J1Y2tldFNpemUgPSBjbGFtcFRvUmFuZ2UodGhpcy5fb3B0aW9ucy5idWNrZXRTaXplLCAwLCAxMDAsIHRoaXMuX29wdGlvbnMuX2xvZ2dlcik7XG4gICAgICAgIHRoaXMuX3JlZmlsbFJhdGUgPSBjbGFtcFRvUmFuZ2UodGhpcy5fb3B0aW9ucy5yZWZpbGxSYXRlLCAwLCB0aGlzLl9idWNrZXRTaXplLCB0aGlzLl9vcHRpb25zLl9sb2dnZXIpO1xuICAgICAgICB0aGlzLl9yZWZpbGxJbnRlcnZhbCA9IGNsYW1wVG9SYW5nZSh0aGlzLl9vcHRpb25zLnJlZmlsbEludGVydmFsLCAwLCA4NjQwMDAwMCwgdGhpcy5fb3B0aW9ucy5fbG9nZ2VyKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKT0+e1xuICAgICAgICAgICAgdGhpcy5fcmVmaWxsQnVja2V0cygpO1xuICAgICAgICB9LCB0aGlzLl9yZWZpbGxJbnRlcnZhbCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZW1vdmVJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9yZW1vdmVJbnRlcnZhbCk7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVJbnRlcnZhbCA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IEJ1Y2tldGVkUmF0ZUxpbWl0ZXIgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/bucketed-rate-limiter.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs":
/*!***************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BucketedRateLimiter: () => (/* reexport safe */ _bucketed_rate_limiter_mjs__WEBPACK_IMPORTED_MODULE_0__.BucketedRateLimiter),\n/* harmony export */   PromiseQueue: () => (/* reexport safe */ _promise_queue_mjs__WEBPACK_IMPORTED_MODULE_4__.PromiseQueue),\n/* harmony export */   STRING_FORMAT: () => (/* binding */ STRING_FORMAT),\n/* harmony export */   allSettled: () => (/* binding */ allSettled),\n/* harmony export */   assert: () => (/* binding */ assert),\n/* harmony export */   clampToRange: () => (/* reexport safe */ _number_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.clampToRange),\n/* harmony export */   currentISOTime: () => (/* binding */ currentISOTime),\n/* harmony export */   currentTimestamp: () => (/* binding */ currentTimestamp),\n/* harmony export */   getFetch: () => (/* binding */ getFetch),\n/* harmony export */   hasOwnProperty: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.hasOwnProperty),\n/* harmony export */   includes: () => (/* reexport safe */ _string_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.includes),\n/* harmony export */   isArray: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isArray),\n/* harmony export */   isBoolean: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isBoolean),\n/* harmony export */   isBuiltin: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isBuiltin),\n/* harmony export */   isDistinctIdStringLike: () => (/* reexport safe */ _string_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.isDistinctIdStringLike),\n/* harmony export */   isEmptyObject: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isEmptyObject),\n/* harmony export */   isEmptyString: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isEmptyString),\n/* harmony export */   isError: () => (/* binding */ isError),\n/* harmony export */   isErrorEvent: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isErrorEvent),\n/* harmony export */   isEvent: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isEvent),\n/* harmony export */   isFile: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isFile),\n/* harmony export */   isFormData: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isFormData),\n/* harmony export */   isFunction: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isFunction),\n/* harmony export */   isInstanceOf: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isInstanceOf),\n/* harmony export */   isKnownUnsafeEditableEvent: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isKnownUnsafeEditableEvent),\n/* harmony export */   isNativeFunction: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isNativeFunction),\n/* harmony export */   isNoLike: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isNoLike),\n/* harmony export */   isNull: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isNull),\n/* harmony export */   isNullish: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isNullish),\n/* harmony export */   isNumber: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isNumber),\n/* harmony export */   isObject: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isObject),\n/* harmony export */   isPlainError: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isPlainError),\n/* harmony export */   isPlainObject: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isPlainObject),\n/* harmony export */   isPrimitive: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isPrimitive),\n/* harmony export */   isPromise: () => (/* binding */ isPromise),\n/* harmony export */   isString: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isString),\n/* harmony export */   isUndefined: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isUndefined),\n/* harmony export */   isYesLike: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.isYesLike),\n/* harmony export */   noLikeValues: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.noLikeValues),\n/* harmony export */   removeTrailingSlash: () => (/* binding */ removeTrailingSlash),\n/* harmony export */   retriable: () => (/* binding */ retriable),\n/* harmony export */   safeSetTimeout: () => (/* binding */ safeSetTimeout),\n/* harmony export */   stripLeadingDollar: () => (/* reexport safe */ _string_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.stripLeadingDollar),\n/* harmony export */   trim: () => (/* reexport safe */ _string_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.trim),\n/* harmony export */   yesLikeValues: () => (/* reexport safe */ _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.yesLikeValues)\n/* harmony export */ });\n/* harmony import */ var _bucketed_rate_limiter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bucketed-rate-limiter.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/bucketed-rate-limiter.mjs\");\n/* harmony import */ var _number_utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./number-utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/number-utils.mjs\");\n/* harmony import */ var _string_utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./string-utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/string-utils.mjs\");\n/* harmony import */ var _type_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type-utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/type-utils.mjs\");\n/* harmony import */ var _promise_queue_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./promise-queue.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/promise-queue.mjs\");\n\n\n\n\n\nconst STRING_FORMAT = 'utf8';\nfunction assert(truthyValue, message) {\n    if (!truthyValue || 'string' != typeof truthyValue || isEmpty(truthyValue)) throw new Error(message);\n}\nfunction isEmpty(truthyValue) {\n    if (0 === truthyValue.trim().length) return true;\n    return false;\n}\nfunction removeTrailingSlash(url) {\n    return url?.replace(/\\/+$/, '');\n}\nasync function retriable(fn, props) {\n    let lastError = null;\n    for(let i = 0; i < props.retryCount + 1; i++){\n        if (i > 0) await new Promise((r)=>setTimeout(r, props.retryDelay));\n        try {\n            const res = await fn();\n            return res;\n        } catch (e) {\n            lastError = e;\n            if (!props.retryCheck(e)) throw e;\n        }\n    }\n    throw lastError;\n}\nfunction currentTimestamp() {\n    return new Date().getTime();\n}\nfunction currentISOTime() {\n    return new Date().toISOString();\n}\nfunction safeSetTimeout(fn, timeout) {\n    const t = setTimeout(fn, timeout);\n    t?.unref && t?.unref();\n    return t;\n}\nconst isPromise = (obj)=>obj && 'function' == typeof obj.then;\nconst isError = (x)=>x instanceof Error;\nfunction getFetch() {\n    return 'undefined' != typeof fetch ? fetch : void 0 !== globalThis.fetch ? globalThis.fetch : void 0;\n}\nfunction allSettled(promises) {\n    return Promise.all(promises.map((p)=>(p ?? Promise.resolve()).then((value)=>({\n                status: 'fulfilled',\n                value\n            }), (reason)=>({\n                status: 'rejected',\n                reason\n            }))));\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdXRpbHMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ1Q7QUFDQTtBQUNGO0FBQ0c7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMEJBQTBCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUM2SiIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdXRpbHMvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2J1Y2tldGVkLXJhdGUtbGltaXRlci5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL251bWJlci11dGlscy5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N0cmluZy11dGlscy5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3R5cGUtdXRpbHMubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wcm9taXNlLXF1ZXVlLm1qc1wiO1xuY29uc3QgU1RSSU5HX0ZPUk1BVCA9ICd1dGY4JztcbmZ1bmN0aW9uIGFzc2VydCh0cnV0aHlWYWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmICghdHJ1dGh5VmFsdWUgfHwgJ3N0cmluZycgIT0gdHlwZW9mIHRydXRoeVZhbHVlIHx8IGlzRW1wdHkodHJ1dGh5VmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG59XG5mdW5jdGlvbiBpc0VtcHR5KHRydXRoeVZhbHVlKSB7XG4gICAgaWYgKDAgPT09IHRydXRoeVZhbHVlLnRyaW0oKS5sZW5ndGgpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVRyYWlsaW5nU2xhc2godXJsKSB7XG4gICAgcmV0dXJuIHVybD8ucmVwbGFjZSgvXFwvKyQvLCAnJyk7XG59XG5hc3luYyBmdW5jdGlvbiByZXRyaWFibGUoZm4sIHByb3BzKSB7XG4gICAgbGV0IGxhc3RFcnJvciA9IG51bGw7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHByb3BzLnJldHJ5Q291bnQgKyAxOyBpKyspe1xuICAgICAgICBpZiAoaSA+IDApIGF3YWl0IG5ldyBQcm9taXNlKChyKT0+c2V0VGltZW91dChyLCBwcm9wcy5yZXRyeURlbGF5KSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmbigpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGFzdEVycm9yID0gZTtcbiAgICAgICAgICAgIGlmICghcHJvcHMucmV0cnlDaGVjayhlKSkgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBsYXN0RXJyb3I7XG59XG5mdW5jdGlvbiBjdXJyZW50VGltZXN0YW1wKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbn1cbmZ1bmN0aW9uIGN1cnJlbnRJU09UaW1lKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG59XG5mdW5jdGlvbiBzYWZlU2V0VGltZW91dChmbiwgdGltZW91dCkge1xuICAgIGNvbnN0IHQgPSBzZXRUaW1lb3V0KGZuLCB0aW1lb3V0KTtcbiAgICB0Py51bnJlZiAmJiB0Py51bnJlZigpO1xuICAgIHJldHVybiB0O1xufVxuY29uc3QgaXNQcm9taXNlID0gKG9iaik9Pm9iaiAmJiAnZnVuY3Rpb24nID09IHR5cGVvZiBvYmoudGhlbjtcbmNvbnN0IGlzRXJyb3IgPSAoeCk9PnggaW5zdGFuY2VvZiBFcnJvcjtcbmZ1bmN0aW9uIGdldEZldGNoKCkge1xuICAgIHJldHVybiAndW5kZWZpbmVkJyAhPSB0eXBlb2YgZmV0Y2ggPyBmZXRjaCA6IHZvaWQgMCAhPT0gZ2xvYmFsVGhpcy5mZXRjaCA/IGdsb2JhbFRoaXMuZmV0Y2ggOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBhbGxTZXR0bGVkKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzLm1hcCgocCk9PihwID8/IFByb21pc2UucmVzb2x2ZSgpKS50aGVuKCh2YWx1ZSk9Pih7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZnVsZmlsbGVkJyxcbiAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgfSksIChyZWFzb24pPT4oe1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ3JlamVjdGVkJyxcbiAgICAgICAgICAgICAgICByZWFzb25cbiAgICAgICAgICAgIH0pKSkpO1xufVxuZXhwb3J0IHsgU1RSSU5HX0ZPUk1BVCwgYWxsU2V0dGxlZCwgYXNzZXJ0LCBjdXJyZW50SVNPVGltZSwgY3VycmVudFRpbWVzdGFtcCwgZ2V0RmV0Y2gsIGlzRXJyb3IsIGlzUHJvbWlzZSwgcmVtb3ZlVHJhaWxpbmdTbGFzaCwgcmV0cmlhYmxlLCBzYWZlU2V0VGltZW91dCB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/index.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/number-utils.mjs":
/*!**********************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/number-utils.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clampToRange: () => (/* binding */ clampToRange)\n/* harmony export */ });\n/* harmony import */ var _type_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./type-utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/type-utils.mjs\");\n\nfunction clampToRange(value, min, max, logger, fallbackValue) {\n    if (min > max) {\n        logger.warn('min cannot be greater than max.');\n        min = max;\n    }\n    if ((0,_type_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.isNumber)(value)) if (value > max) {\n        logger.warn(' cannot be  greater than max: ' + max + '. Using max value instead.');\n        return max;\n    } else {\n        if (!(value < min)) return value;\n        logger.warn(' cannot be less than min: ' + min + '. Using min value instead.');\n        return min;\n    }\n    logger.warn(' must be a number. using max or fallback. max: ' + max + ', fallback: ' + fallbackValue);\n    return clampToRange(fallbackValue || max, min, max, logger);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdXRpbHMvbnVtYmVyLXV0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx5REFBUTtBQUNoQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3dCIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC91dGlscy9udW1iZXItdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzTnVtYmVyIH0gZnJvbSBcIi4vdHlwZS11dGlscy5tanNcIjtcbmZ1bmN0aW9uIGNsYW1wVG9SYW5nZSh2YWx1ZSwgbWluLCBtYXgsIGxvZ2dlciwgZmFsbGJhY2tWYWx1ZSkge1xuICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ21pbiBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIG1heC4nKTtcbiAgICAgICAgbWluID0gbWF4O1xuICAgIH1cbiAgICBpZiAoaXNOdW1iZXIodmFsdWUpKSBpZiAodmFsdWUgPiBtYXgpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJyBjYW5ub3QgYmUgIGdyZWF0ZXIgdGhhbiBtYXg6ICcgKyBtYXggKyAnLiBVc2luZyBtYXggdmFsdWUgaW5zdGVhZC4nKTtcbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoISh2YWx1ZSA8IG1pbikpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgbG9nZ2VyLndhcm4oJyBjYW5ub3QgYmUgbGVzcyB0aGFuIG1pbjogJyArIG1pbiArICcuIFVzaW5nIG1pbiB2YWx1ZSBpbnN0ZWFkLicpO1xuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBsb2dnZXIud2FybignIG11c3QgYmUgYSBudW1iZXIuIHVzaW5nIG1heCBvciBmYWxsYmFjay4gbWF4OiAnICsgbWF4ICsgJywgZmFsbGJhY2s6ICcgKyBmYWxsYmFja1ZhbHVlKTtcbiAgICByZXR1cm4gY2xhbXBUb1JhbmdlKGZhbGxiYWNrVmFsdWUgfHwgbWF4LCBtaW4sIG1heCwgbG9nZ2VyKTtcbn1cbmV4cG9ydCB7IGNsYW1wVG9SYW5nZSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/number-utils.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/promise-queue.mjs":
/*!***********************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/promise-queue.mjs ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PromiseQueue: () => (/* binding */ PromiseQueue)\n/* harmony export */ });\n/* harmony import */ var _vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../vendor/uuidv7.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/vendor/uuidv7.mjs\");\n\nclass PromiseQueue {\n    add(promise) {\n        const promiseUUID = (0,_vendor_uuidv7_mjs__WEBPACK_IMPORTED_MODULE_0__.uuidv7)();\n        this.promiseByIds[promiseUUID] = promise;\n        promise.catch(()=>{}).finally(()=>{\n            delete this.promiseByIds[promiseUUID];\n        });\n        return promise;\n    }\n    async join() {\n        let promises = Object.values(this.promiseByIds);\n        let length = promises.length;\n        while(length > 0){\n            await Promise.all(promises);\n            promises = Object.values(this.promiseByIds);\n            length = promises.length;\n        }\n    }\n    get length() {\n        return Object.keys(this.promiseByIds).length;\n    }\n    constructor(){\n        this.promiseByIds = {};\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdXRpbHMvcHJvbWlzZS1xdWV1ZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEM7QUFDOUM7QUFDQTtBQUNBLDRCQUE0QiwwREFBTTtBQUNsQztBQUNBLDRCQUE0QjtBQUM1QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDd0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L3V0aWxzL3Byb21pc2UtcXVldWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHV1aWR2NyB9IGZyb20gXCIuLi92ZW5kb3IvdXVpZHY3Lm1qc1wiO1xuY2xhc3MgUHJvbWlzZVF1ZXVlIHtcbiAgICBhZGQocHJvbWlzZSkge1xuICAgICAgICBjb25zdCBwcm9taXNlVVVJRCA9IHV1aWR2NygpO1xuICAgICAgICB0aGlzLnByb21pc2VCeUlkc1twcm9taXNlVVVJRF0gPSBwcm9taXNlO1xuICAgICAgICBwcm9taXNlLmNhdGNoKCgpPT57fSkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucHJvbWlzZUJ5SWRzW3Byb21pc2VVVUlEXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBqb2luKCkge1xuICAgICAgICBsZXQgcHJvbWlzZXMgPSBPYmplY3QudmFsdWVzKHRoaXMucHJvbWlzZUJ5SWRzKTtcbiAgICAgICAgbGV0IGxlbmd0aCA9IHByb21pc2VzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUobGVuZ3RoID4gMCl7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgICAgICBwcm9taXNlcyA9IE9iamVjdC52YWx1ZXModGhpcy5wcm9taXNlQnlJZHMpO1xuICAgICAgICAgICAgbGVuZ3RoID0gcHJvbWlzZXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnByb21pc2VCeUlkcykubGVuZ3RoO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLnByb21pc2VCeUlkcyA9IHt9O1xuICAgIH1cbn1cbmV4cG9ydCB7IFByb21pc2VRdWV1ZSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/promise-queue.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/string-utils.mjs":
/*!**********************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/string-utils.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   includes: () => (/* binding */ includes),\n/* harmony export */   isDistinctIdStringLike: () => (/* binding */ isDistinctIdStringLike),\n/* harmony export */   stripLeadingDollar: () => (/* binding */ stripLeadingDollar),\n/* harmony export */   trim: () => (/* binding */ trim)\n/* harmony export */ });\nfunction includes(str, needle) {\n    return -1 !== str.indexOf(needle);\n}\nconst trim = function(str) {\n    return str.trim();\n};\nconst stripLeadingDollar = function(s) {\n    return s.replace(/^\\$/, '');\n};\nfunction isDistinctIdStringLike(value) {\n    return [\n        'distinct_id',\n        'distinctid'\n    ].includes(value.toLowerCase());\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdXRpbHMvc3RyaW5nLXV0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NFIiwic291cmNlcyI6WyIvVXNlcnMvbmF0ZXNwaWxtYW4vUmVwb3MvRVBUU1Mtd2Vic2l0ZS9lcHRzcy1zaXRlL25vZGVfbW9kdWxlcy9wb3N0aG9nLW5vZGUvbm9kZV9tb2R1bGVzL0Bwb3N0aG9nL2NvcmUvZGlzdC91dGlscy9zdHJpbmctdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGluY2x1ZGVzKHN0ciwgbmVlZGxlKSB7XG4gICAgcmV0dXJuIC0xICE9PSBzdHIuaW5kZXhPZihuZWVkbGUpO1xufVxuY29uc3QgdHJpbSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBzdHIudHJpbSgpO1xufTtcbmNvbnN0IHN0cmlwTGVhZGluZ0RvbGxhciA9IGZ1bmN0aW9uKHMpIHtcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9eXFwkLywgJycpO1xufTtcbmZ1bmN0aW9uIGlzRGlzdGluY3RJZFN0cmluZ0xpa2UodmFsdWUpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAnZGlzdGluY3RfaWQnLFxuICAgICAgICAnZGlzdGluY3RpZCdcbiAgICBdLmluY2x1ZGVzKHZhbHVlLnRvTG93ZXJDYXNlKCkpO1xufVxuZXhwb3J0IHsgaW5jbHVkZXMsIGlzRGlzdGluY3RJZFN0cmluZ0xpa2UsIHN0cmlwTGVhZGluZ0RvbGxhciwgdHJpbSB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/string-utils.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/type-utils.mjs":
/*!********************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/type-utils.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasOwnProperty: () => (/* binding */ type_utils_hasOwnProperty),\n/* harmony export */   isArray: () => (/* binding */ isArray),\n/* harmony export */   isBoolean: () => (/* binding */ isBoolean),\n/* harmony export */   isBuiltin: () => (/* binding */ isBuiltin),\n/* harmony export */   isEmptyObject: () => (/* binding */ isEmptyObject),\n/* harmony export */   isEmptyString: () => (/* binding */ isEmptyString),\n/* harmony export */   isError: () => (/* binding */ isError),\n/* harmony export */   isErrorEvent: () => (/* binding */ isErrorEvent),\n/* harmony export */   isEvent: () => (/* binding */ isEvent),\n/* harmony export */   isFile: () => (/* binding */ isFile),\n/* harmony export */   isFormData: () => (/* binding */ isFormData),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isInstanceOf: () => (/* binding */ isInstanceOf),\n/* harmony export */   isKnownUnsafeEditableEvent: () => (/* binding */ isKnownUnsafeEditableEvent),\n/* harmony export */   isNativeFunction: () => (/* binding */ isNativeFunction),\n/* harmony export */   isNoLike: () => (/* binding */ isNoLike),\n/* harmony export */   isNull: () => (/* binding */ isNull),\n/* harmony export */   isNullish: () => (/* binding */ isNullish),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isObject: () => (/* binding */ isObject),\n/* harmony export */   isPlainError: () => (/* binding */ isPlainError),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   isPrimitive: () => (/* binding */ isPrimitive),\n/* harmony export */   isString: () => (/* binding */ isString),\n/* harmony export */   isUndefined: () => (/* binding */ isUndefined),\n/* harmony export */   isYesLike: () => (/* binding */ isYesLike),\n/* harmony export */   noLikeValues: () => (/* binding */ noLikeValues),\n/* harmony export */   yesLikeValues: () => (/* binding */ yesLikeValues)\n/* harmony export */ });\n/* harmony import */ var _types_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../types.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/types.mjs\");\n/* harmony import */ var _string_utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./string-utils.mjs */ \"(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/string-utils.mjs\");\n\n\nconst nativeIsArray = Array.isArray;\nconst ObjProto = Object.prototype;\nconst type_utils_hasOwnProperty = ObjProto.hasOwnProperty;\nconst type_utils_toString = ObjProto.toString;\nconst isArray = nativeIsArray || function(obj) {\n    return '[object Array]' === type_utils_toString.call(obj);\n};\nconst isFunction = (x)=>'function' == typeof x;\nconst isNativeFunction = (x)=>isFunction(x) && -1 !== x.toString().indexOf('[native code]');\nconst isObject = (x)=>x === Object(x) && !isArray(x);\nconst isEmptyObject = (x)=>{\n    if (isObject(x)) {\n        for(const key in x)if (type_utils_hasOwnProperty.call(x, key)) return false;\n        return true;\n    }\n    return false;\n};\nconst isUndefined = (x)=>void 0 === x;\nconst isString = (x)=>'[object String]' == type_utils_toString.call(x);\nconst isEmptyString = (x)=>isString(x) && 0 === x.trim().length;\nconst isNull = (x)=>null === x;\nconst isNullish = (x)=>isUndefined(x) || isNull(x);\nconst isNumber = (x)=>'[object Number]' == type_utils_toString.call(x);\nconst isBoolean = (x)=>'[object Boolean]' === type_utils_toString.call(x);\nconst isFormData = (x)=>x instanceof FormData;\nconst isFile = (x)=>x instanceof File;\nconst isPlainError = (x)=>x instanceof Error;\nconst isKnownUnsafeEditableEvent = (x)=>(0,_string_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.includes)(_types_mjs__WEBPACK_IMPORTED_MODULE_0__.knownUnsafeEditableEvent, x);\nfunction isInstanceOf(candidate, base) {\n    try {\n        return candidate instanceof base;\n    } catch  {\n        return false;\n    }\n}\nfunction isPrimitive(value) {\n    return null === value || 'object' != typeof value;\n}\nfunction isBuiltin(candidate, className) {\n    return Object.prototype.toString.call(candidate) === `[object ${className}]`;\n}\nfunction isError(candidate) {\n    switch(Object.prototype.toString.call(candidate)){\n        case '[object Error]':\n        case '[object Exception]':\n        case '[object DOMException]':\n        case '[object DOMError]':\n        case '[object WebAssembly.Exception]':\n            return true;\n        default:\n            return isInstanceOf(candidate, Error);\n    }\n}\nfunction isErrorEvent(event) {\n    return isBuiltin(event, 'ErrorEvent');\n}\nfunction isEvent(candidate) {\n    return !isUndefined(Event) && isInstanceOf(candidate, Event);\n}\nfunction isPlainObject(candidate) {\n    return isBuiltin(candidate, 'Object');\n}\nconst yesLikeValues = [\n    true,\n    'true',\n    1,\n    '1',\n    'yes'\n];\nconst isYesLike = (val)=>(0,_string_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.includes)(yesLikeValues, val);\nconst noLikeValues = [\n    false,\n    'false',\n    0,\n    '0',\n    'no'\n];\nconst isNoLike = (val)=>(0,_string_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.includes)(noLikeValues, val);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdXRpbHMvdHlwZS11dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ1Y7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDJEQUFRLENBQUMsZ0VBQXdCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxVQUFVO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkRBQVE7QUFDMFciLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlc3BpbG1hbi9SZXBvcy9FUFRTUy13ZWJzaXRlL2VwdHNzLXNpdGUvbm9kZV9tb2R1bGVzL3Bvc3Rob2ctbm9kZS9ub2RlX21vZHVsZXMvQHBvc3Rob2cvY29yZS9kaXN0L3V0aWxzL3R5cGUtdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGtub3duVW5zYWZlRWRpdGFibGVFdmVudCB9IGZyb20gXCIuLi90eXBlcy5tanNcIjtcbmltcG9ydCB7IGluY2x1ZGVzIH0gZnJvbSBcIi4vc3RyaW5nLXV0aWxzLm1qc1wiO1xuY29uc3QgbmF0aXZlSXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5jb25zdCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5jb25zdCB0eXBlX3V0aWxzX2hhc093blByb3BlcnR5ID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5jb25zdCB0eXBlX3V0aWxzX3RvU3RyaW5nID0gT2JqUHJvdG8udG9TdHJpbmc7XG5jb25zdCBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gJ1tvYmplY3QgQXJyYXldJyA9PT0gdHlwZV91dGlsc190b1N0cmluZy5jYWxsKG9iaik7XG59O1xuY29uc3QgaXNGdW5jdGlvbiA9ICh4KT0+J2Z1bmN0aW9uJyA9PSB0eXBlb2YgeDtcbmNvbnN0IGlzTmF0aXZlRnVuY3Rpb24gPSAoeCk9PmlzRnVuY3Rpb24oeCkgJiYgLTEgIT09IHgudG9TdHJpbmcoKS5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJyk7XG5jb25zdCBpc09iamVjdCA9ICh4KT0+eCA9PT0gT2JqZWN0KHgpICYmICFpc0FycmF5KHgpO1xuY29uc3QgaXNFbXB0eU9iamVjdCA9ICh4KT0+e1xuICAgIGlmIChpc09iamVjdCh4KSkge1xuICAgICAgICBmb3IoY29uc3Qga2V5IGluIHgpaWYgKHR5cGVfdXRpbHNfaGFzT3duUHJvcGVydHkuY2FsbCh4LCBrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuY29uc3QgaXNVbmRlZmluZWQgPSAoeCk9PnZvaWQgMCA9PT0geDtcbmNvbnN0IGlzU3RyaW5nID0gKHgpPT4nW29iamVjdCBTdHJpbmddJyA9PSB0eXBlX3V0aWxzX3RvU3RyaW5nLmNhbGwoeCk7XG5jb25zdCBpc0VtcHR5U3RyaW5nID0gKHgpPT5pc1N0cmluZyh4KSAmJiAwID09PSB4LnRyaW0oKS5sZW5ndGg7XG5jb25zdCBpc051bGwgPSAoeCk9Pm51bGwgPT09IHg7XG5jb25zdCBpc051bGxpc2ggPSAoeCk9PmlzVW5kZWZpbmVkKHgpIHx8IGlzTnVsbCh4KTtcbmNvbnN0IGlzTnVtYmVyID0gKHgpPT4nW29iamVjdCBOdW1iZXJdJyA9PSB0eXBlX3V0aWxzX3RvU3RyaW5nLmNhbGwoeCk7XG5jb25zdCBpc0Jvb2xlYW4gPSAoeCk9Pidbb2JqZWN0IEJvb2xlYW5dJyA9PT0gdHlwZV91dGlsc190b1N0cmluZy5jYWxsKHgpO1xuY29uc3QgaXNGb3JtRGF0YSA9ICh4KT0+eCBpbnN0YW5jZW9mIEZvcm1EYXRhO1xuY29uc3QgaXNGaWxlID0gKHgpPT54IGluc3RhbmNlb2YgRmlsZTtcbmNvbnN0IGlzUGxhaW5FcnJvciA9ICh4KT0+eCBpbnN0YW5jZW9mIEVycm9yO1xuY29uc3QgaXNLbm93blVuc2FmZUVkaXRhYmxlRXZlbnQgPSAoeCk9PmluY2x1ZGVzKGtub3duVW5zYWZlRWRpdGFibGVFdmVudCwgeCk7XG5mdW5jdGlvbiBpc0luc3RhbmNlT2YoY2FuZGlkYXRlLCBiYXNlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZSBpbnN0YW5jZW9mIGJhc2U7XG4gICAgfSBjYXRjaCAge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNQcmltaXRpdmUodmFsdWUpIHtcbiAgICByZXR1cm4gbnVsbCA9PT0gdmFsdWUgfHwgJ29iamVjdCcgIT0gdHlwZW9mIHZhbHVlO1xufVxuZnVuY3Rpb24gaXNCdWlsdGluKGNhbmRpZGF0ZSwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjYW5kaWRhdGUpID09PSBgW29iamVjdCAke2NsYXNzTmFtZX1dYDtcbn1cbmZ1bmN0aW9uIGlzRXJyb3IoY2FuZGlkYXRlKSB7XG4gICAgc3dpdGNoKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjYW5kaWRhdGUpKXtcbiAgICAgICAgY2FzZSAnW29iamVjdCBFcnJvcl0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEV4Y2VwdGlvbl0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IERPTUV4Y2VwdGlvbl0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IERPTUVycm9yXSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgV2ViQXNzZW1ibHkuRXhjZXB0aW9uXSc6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBpc0luc3RhbmNlT2YoY2FuZGlkYXRlLCBFcnJvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNFcnJvckV2ZW50KGV2ZW50KSB7XG4gICAgcmV0dXJuIGlzQnVpbHRpbihldmVudCwgJ0Vycm9yRXZlbnQnKTtcbn1cbmZ1bmN0aW9uIGlzRXZlbnQoY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuICFpc1VuZGVmaW5lZChFdmVudCkgJiYgaXNJbnN0YW5jZU9mKGNhbmRpZGF0ZSwgRXZlbnQpO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChjYW5kaWRhdGUpIHtcbiAgICByZXR1cm4gaXNCdWlsdGluKGNhbmRpZGF0ZSwgJ09iamVjdCcpO1xufVxuY29uc3QgeWVzTGlrZVZhbHVlcyA9IFtcbiAgICB0cnVlLFxuICAgICd0cnVlJyxcbiAgICAxLFxuICAgICcxJyxcbiAgICAneWVzJ1xuXTtcbmNvbnN0IGlzWWVzTGlrZSA9ICh2YWwpPT5pbmNsdWRlcyh5ZXNMaWtlVmFsdWVzLCB2YWwpO1xuY29uc3Qgbm9MaWtlVmFsdWVzID0gW1xuICAgIGZhbHNlLFxuICAgICdmYWxzZScsXG4gICAgMCxcbiAgICAnMCcsXG4gICAgJ25vJ1xuXTtcbmNvbnN0IGlzTm9MaWtlID0gKHZhbCk9PmluY2x1ZGVzKG5vTGlrZVZhbHVlcywgdmFsKTtcbmV4cG9ydCB7IHR5cGVfdXRpbHNfaGFzT3duUHJvcGVydHkgYXMgaGFzT3duUHJvcGVydHksIGlzQXJyYXksIGlzQm9vbGVhbiwgaXNCdWlsdGluLCBpc0VtcHR5T2JqZWN0LCBpc0VtcHR5U3RyaW5nLCBpc0Vycm9yLCBpc0Vycm9yRXZlbnQsIGlzRXZlbnQsIGlzRmlsZSwgaXNGb3JtRGF0YSwgaXNGdW5jdGlvbiwgaXNJbnN0YW5jZU9mLCBpc0tub3duVW5zYWZlRWRpdGFibGVFdmVudCwgaXNOYXRpdmVGdW5jdGlvbiwgaXNOb0xpa2UsIGlzTnVsbCwgaXNOdWxsaXNoLCBpc051bWJlciwgaXNPYmplY3QsIGlzUGxhaW5FcnJvciwgaXNQbGFpbk9iamVjdCwgaXNQcmltaXRpdmUsIGlzU3RyaW5nLCBpc1VuZGVmaW5lZCwgaXNZZXNMaWtlLCBub0xpa2VWYWx1ZXMsIHllc0xpa2VWYWx1ZXMgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/utils/type-utils.mjs\n");

/***/ }),

/***/ "(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/vendor/uuidv7.mjs":
/*!*****************************************************************************************!*\
  !*** ../../node_modules/posthog-node/node_modules/@posthog/core/dist/vendor/uuidv7.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UUID: () => (/* binding */ UUID),\n/* harmony export */   V7Generator: () => (/* binding */ V7Generator),\n/* harmony export */   uuidv4: () => (/* binding */ uuidv4),\n/* harmony export */   uuidv4obj: () => (/* binding */ uuidv4obj),\n/* harmony export */   uuidv7: () => (/* binding */ uuidv7),\n/* harmony export */   uuidv7obj: () => (/* binding */ uuidv7obj)\n/* harmony export */ });\n/*! For license information please see uuidv7.mjs.LICENSE.txt */\n/**\n * uuidv7: An experimental implementation of the proposed UUID Version 7\n *\n * @license Apache-2.0\n * @copyright 2021-2023 LiosK\n * @packageDocumentation\n */ const DIGITS = \"0123456789abcdef\";\nclass UUID {\n    constructor(bytes){\n        this.bytes = bytes;\n    }\n    static ofInner(bytes) {\n        if (16 === bytes.length) return new UUID(bytes);\n        throw new TypeError(\"not 128-bit length\");\n    }\n    static fromFieldsV7(unixTsMs, randA, randBHi, randBLo) {\n        if (!Number.isInteger(unixTsMs) || !Number.isInteger(randA) || !Number.isInteger(randBHi) || !Number.isInteger(randBLo) || unixTsMs < 0 || randA < 0 || randBHi < 0 || randBLo < 0 || unixTsMs > 0xffffffffffff || randA > 0xfff || randBHi > 0x3fffffff || randBLo > 0xffffffff) throw new RangeError(\"invalid field value\");\n        const bytes = new Uint8Array(16);\n        bytes[0] = unixTsMs / 2 ** 40;\n        bytes[1] = unixTsMs / 2 ** 32;\n        bytes[2] = unixTsMs / 2 ** 24;\n        bytes[3] = unixTsMs / 2 ** 16;\n        bytes[4] = unixTsMs / 256;\n        bytes[5] = unixTsMs;\n        bytes[6] = 0x70 | randA >>> 8;\n        bytes[7] = randA;\n        bytes[8] = 0x80 | randBHi >>> 24;\n        bytes[9] = randBHi >>> 16;\n        bytes[10] = randBHi >>> 8;\n        bytes[11] = randBHi;\n        bytes[12] = randBLo >>> 24;\n        bytes[13] = randBLo >>> 16;\n        bytes[14] = randBLo >>> 8;\n        bytes[15] = randBLo;\n        return new UUID(bytes);\n    }\n    static parse(uuid) {\n        let hex;\n        switch(uuid.length){\n            case 32:\n                hex = /^[0-9a-f]{32}$/i.exec(uuid)?.[0];\n                break;\n            case 36:\n                hex = /^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(uuid)?.slice(1, 6).join(\"\");\n                break;\n            case 38:\n                hex = /^\\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\\}$/i.exec(uuid)?.slice(1, 6).join(\"\");\n                break;\n            case 45:\n                hex = /^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(uuid)?.slice(1, 6).join(\"\");\n                break;\n            default:\n                break;\n        }\n        if (hex) {\n            const inner = new Uint8Array(16);\n            for(let i = 0; i < 16; i += 4){\n                const n = parseInt(hex.substring(2 * i, 2 * i + 8), 16);\n                inner[i + 0] = n >>> 24;\n                inner[i + 1] = n >>> 16;\n                inner[i + 2] = n >>> 8;\n                inner[i + 3] = n;\n            }\n            return new UUID(inner);\n        }\n        throw new SyntaxError(\"could not parse UUID string\");\n    }\n    toString() {\n        let text = \"\";\n        for(let i = 0; i < this.bytes.length; i++){\n            text += DIGITS.charAt(this.bytes[i] >>> 4);\n            text += DIGITS.charAt(0xf & this.bytes[i]);\n            if (3 === i || 5 === i || 7 === i || 9 === i) text += \"-\";\n        }\n        return text;\n    }\n    toHex() {\n        let text = \"\";\n        for(let i = 0; i < this.bytes.length; i++){\n            text += DIGITS.charAt(this.bytes[i] >>> 4);\n            text += DIGITS.charAt(0xf & this.bytes[i]);\n        }\n        return text;\n    }\n    toJSON() {\n        return this.toString();\n    }\n    getVariant() {\n        const n = this.bytes[8] >>> 4;\n        if (n < 0) throw new Error(\"unreachable\");\n        if (n <= 7) return this.bytes.every((e)=>0 === e) ? \"NIL\" : \"VAR_0\";\n        if (n <= 11) return \"VAR_10\";\n        if (n <= 13) return \"VAR_110\";\n        if (n <= 15) return this.bytes.every((e)=>0xff === e) ? \"MAX\" : \"VAR_RESERVED\";\n        else throw new Error(\"unreachable\");\n    }\n    getVersion() {\n        return \"VAR_10\" === this.getVariant() ? this.bytes[6] >>> 4 : void 0;\n    }\n    clone() {\n        return new UUID(this.bytes.slice(0));\n    }\n    equals(other) {\n        return 0 === this.compareTo(other);\n    }\n    compareTo(other) {\n        for(let i = 0; i < 16; i++){\n            const diff = this.bytes[i] - other.bytes[i];\n            if (0 !== diff) return Math.sign(diff);\n        }\n        return 0;\n    }\n}\nclass V7Generator {\n    constructor(randomNumberGenerator){\n        this.timestamp = 0;\n        this.counter = 0;\n        this.random = randomNumberGenerator ?? getDefaultRandom();\n    }\n    generate() {\n        return this.generateOrResetCore(Date.now(), 10000);\n    }\n    generateOrAbort() {\n        return this.generateOrAbortCore(Date.now(), 10000);\n    }\n    generateOrResetCore(unixTsMs, rollbackAllowance) {\n        let value = this.generateOrAbortCore(unixTsMs, rollbackAllowance);\n        if (void 0 === value) {\n            this.timestamp = 0;\n            value = this.generateOrAbortCore(unixTsMs, rollbackAllowance);\n        }\n        return value;\n    }\n    generateOrAbortCore(unixTsMs, rollbackAllowance) {\n        const MAX_COUNTER = 0x3ffffffffff;\n        if (!Number.isInteger(unixTsMs) || unixTsMs < 1 || unixTsMs > 0xffffffffffff) throw new RangeError(\"`unixTsMs` must be a 48-bit positive integer\");\n        if (rollbackAllowance < 0 || rollbackAllowance > 0xffffffffffff) throw new RangeError(\"`rollbackAllowance` out of reasonable range\");\n        if (unixTsMs > this.timestamp) {\n            this.timestamp = unixTsMs;\n            this.resetCounter();\n        } else {\n            if (!(unixTsMs + rollbackAllowance >= this.timestamp)) return;\n            this.counter++;\n            if (this.counter > MAX_COUNTER) {\n                this.timestamp++;\n                this.resetCounter();\n            }\n        }\n        return UUID.fromFieldsV7(this.timestamp, Math.trunc(this.counter / 2 ** 30), this.counter & 2 ** 30 - 1, this.random.nextUint32());\n    }\n    resetCounter() {\n        this.counter = 0x400 * this.random.nextUint32() + (0x3ff & this.random.nextUint32());\n    }\n    generateV4() {\n        const bytes = new Uint8Array(Uint32Array.of(this.random.nextUint32(), this.random.nextUint32(), this.random.nextUint32(), this.random.nextUint32()).buffer);\n        bytes[6] = 0x40 | bytes[6] >>> 4;\n        bytes[8] = 0x80 | bytes[8] >>> 2;\n        return UUID.ofInner(bytes);\n    }\n}\nconst getDefaultRandom = ()=>({\n        nextUint32: ()=>0x10000 * Math.trunc(0x10000 * Math.random()) + Math.trunc(0x10000 * Math.random())\n    });\nlet defaultGenerator;\nconst uuidv7 = ()=>uuidv7obj().toString();\nconst uuidv7obj = ()=>(defaultGenerator || (defaultGenerator = new V7Generator())).generate();\nconst uuidv4 = ()=>uuidv4obj().toString();\nconst uuidv4obj = ()=>(defaultGenerator || (defaultGenerator = new V7Generator())).generateV4();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdmVuZG9yL3V1aWR2Ny5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxHQUFHO0FBQ3BDO0FBQ0E7QUFDQSxrQ0FBa0MsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxZQUFZLEdBQUc7QUFDN0Y7QUFDQTtBQUNBLDBCQUEwQixVQUFVLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsWUFBWSxHQUFHLEdBQUc7QUFDbEc7QUFDQTtBQUNBLDJDQUEyQyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLFlBQVksR0FBRztBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNtRSIsInNvdXJjZXMiOlsiL1VzZXJzL25hdGVzcGlsbWFuL1JlcG9zL0VQVFNTLXdlYnNpdGUvZXB0c3Mtc2l0ZS9ub2RlX21vZHVsZXMvcG9zdGhvZy1ub2RlL25vZGVfbW9kdWxlcy9AcG9zdGhvZy9jb3JlL2Rpc3QvdmVuZG9yL3V1aWR2Ny5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEZvciBsaWNlbnNlIGluZm9ybWF0aW9uIHBsZWFzZSBzZWUgdXVpZHY3Lm1qcy5MSUNFTlNFLnR4dCAqL1xuLyoqXG4gKiB1dWlkdjc6IEFuIGV4cGVyaW1lbnRhbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgcHJvcG9zZWQgVVVJRCBWZXJzaW9uIDdcbiAqXG4gKiBAbGljZW5zZSBBcGFjaGUtMi4wXG4gKiBAY29weXJpZ2h0IDIwMjEtMjAyMyBMaW9zS1xuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi8gY29uc3QgRElHSVRTID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XG5jbGFzcyBVVUlEIHtcbiAgICBjb25zdHJ1Y3RvcihieXRlcyl7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSBieXRlcztcbiAgICB9XG4gICAgc3RhdGljIG9mSW5uZXIoYnl0ZXMpIHtcbiAgICAgICAgaWYgKDE2ID09PSBieXRlcy5sZW5ndGgpIHJldHVybiBuZXcgVVVJRChieXRlcyk7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJub3QgMTI4LWJpdCBsZW5ndGhcIik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tRmllbGRzVjcodW5peFRzTXMsIHJhbmRBLCByYW5kQkhpLCByYW5kQkxvKSB7XG4gICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcih1bml4VHNNcykgfHwgIU51bWJlci5pc0ludGVnZXIocmFuZEEpIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKHJhbmRCSGkpIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKHJhbmRCTG8pIHx8IHVuaXhUc01zIDwgMCB8fCByYW5kQSA8IDAgfHwgcmFuZEJIaSA8IDAgfHwgcmFuZEJMbyA8IDAgfHwgdW5peFRzTXMgPiAweGZmZmZmZmZmZmZmZiB8fCByYW5kQSA+IDB4ZmZmIHx8IHJhbmRCSGkgPiAweDNmZmZmZmZmIHx8IHJhbmRCTG8gPiAweGZmZmZmZmZmKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImludmFsaWQgZmllbGQgdmFsdWVcIik7XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuICAgICAgICBieXRlc1swXSA9IHVuaXhUc01zIC8gMiAqKiA0MDtcbiAgICAgICAgYnl0ZXNbMV0gPSB1bml4VHNNcyAvIDIgKiogMzI7XG4gICAgICAgIGJ5dGVzWzJdID0gdW5peFRzTXMgLyAyICoqIDI0O1xuICAgICAgICBieXRlc1szXSA9IHVuaXhUc01zIC8gMiAqKiAxNjtcbiAgICAgICAgYnl0ZXNbNF0gPSB1bml4VHNNcyAvIDI1NjtcbiAgICAgICAgYnl0ZXNbNV0gPSB1bml4VHNNcztcbiAgICAgICAgYnl0ZXNbNl0gPSAweDcwIHwgcmFuZEEgPj4+IDg7XG4gICAgICAgIGJ5dGVzWzddID0gcmFuZEE7XG4gICAgICAgIGJ5dGVzWzhdID0gMHg4MCB8IHJhbmRCSGkgPj4+IDI0O1xuICAgICAgICBieXRlc1s5XSA9IHJhbmRCSGkgPj4+IDE2O1xuICAgICAgICBieXRlc1sxMF0gPSByYW5kQkhpID4+PiA4O1xuICAgICAgICBieXRlc1sxMV0gPSByYW5kQkhpO1xuICAgICAgICBieXRlc1sxMl0gPSByYW5kQkxvID4+PiAyNDtcbiAgICAgICAgYnl0ZXNbMTNdID0gcmFuZEJMbyA+Pj4gMTY7XG4gICAgICAgIGJ5dGVzWzE0XSA9IHJhbmRCTG8gPj4+IDg7XG4gICAgICAgIGJ5dGVzWzE1XSA9IHJhbmRCTG87XG4gICAgICAgIHJldHVybiBuZXcgVVVJRChieXRlcyk7XG4gICAgfVxuICAgIHN0YXRpYyBwYXJzZSh1dWlkKSB7XG4gICAgICAgIGxldCBoZXg7XG4gICAgICAgIHN3aXRjaCh1dWlkLmxlbmd0aCl7XG4gICAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgICAgIGhleCA9IC9eWzAtOWEtZl17MzJ9JC9pLmV4ZWModXVpZCk/LlswXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzY6XG4gICAgICAgICAgICAgICAgaGV4ID0gL14oWzAtOWEtZl17OH0pLShbMC05YS1mXXs0fSktKFswLTlhLWZdezR9KS0oWzAtOWEtZl17NH0pLShbMC05YS1mXXsxMn0pJC9pLmV4ZWModXVpZCk/LnNsaWNlKDEsIDYpLmpvaW4oXCJcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgIGhleCA9IC9eXFx7KFswLTlhLWZdezh9KS0oWzAtOWEtZl17NH0pLShbMC05YS1mXXs0fSktKFswLTlhLWZdezR9KS0oWzAtOWEtZl17MTJ9KVxcfSQvaS5leGVjKHV1aWQpPy5zbGljZSgxLCA2KS5qb2luKFwiXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0NTpcbiAgICAgICAgICAgICAgICBoZXggPSAvXnVybjp1dWlkOihbMC05YS1mXXs4fSktKFswLTlhLWZdezR9KS0oWzAtOWEtZl17NH0pLShbMC05YS1mXXs0fSktKFswLTlhLWZdezEyfSkkL2kuZXhlYyh1dWlkKT8uc2xpY2UoMSwgNikuam9pbihcIlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhleCkge1xuICAgICAgICAgICAgY29uc3QgaW5uZXIgPSBuZXcgVWludDhBcnJheSgxNik7XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTY7IGkgKz0gNCl7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMiAqIGksIDIgKiBpICsgOCksIDE2KTtcbiAgICAgICAgICAgICAgICBpbm5lcltpICsgMF0gPSBuID4+PiAyNDtcbiAgICAgICAgICAgICAgICBpbm5lcltpICsgMV0gPSBuID4+PiAxNjtcbiAgICAgICAgICAgICAgICBpbm5lcltpICsgMl0gPSBuID4+PiA4O1xuICAgICAgICAgICAgICAgIGlubmVyW2kgKyAzXSA9IG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVVSUQoaW5uZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcImNvdWxkIG5vdCBwYXJzZSBVVUlEIHN0cmluZ1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gXCJcIjtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuYnl0ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdGV4dCArPSBESUdJVFMuY2hhckF0KHRoaXMuYnl0ZXNbaV0gPj4+IDQpO1xuICAgICAgICAgICAgdGV4dCArPSBESUdJVFMuY2hhckF0KDB4ZiAmIHRoaXMuYnl0ZXNbaV0pO1xuICAgICAgICAgICAgaWYgKDMgPT09IGkgfHwgNSA9PT0gaSB8fCA3ID09PSBpIHx8IDkgPT09IGkpIHRleHQgKz0gXCItXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIHRvSGV4KCkge1xuICAgICAgICBsZXQgdGV4dCA9IFwiXCI7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmJ5dGVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHRleHQgKz0gRElHSVRTLmNoYXJBdCh0aGlzLmJ5dGVzW2ldID4+PiA0KTtcbiAgICAgICAgICAgIHRleHQgKz0gRElHSVRTLmNoYXJBdCgweGYgJiB0aGlzLmJ5dGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xuICAgIH1cbiAgICBnZXRWYXJpYW50KCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5ieXRlc1s4XSA+Pj4gNDtcbiAgICAgICAgaWYgKG4gPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTtcbiAgICAgICAgaWYgKG4gPD0gNykgcmV0dXJuIHRoaXMuYnl0ZXMuZXZlcnkoKGUpPT4wID09PSBlKSA/IFwiTklMXCIgOiBcIlZBUl8wXCI7XG4gICAgICAgIGlmIChuIDw9IDExKSByZXR1cm4gXCJWQVJfMTBcIjtcbiAgICAgICAgaWYgKG4gPD0gMTMpIHJldHVybiBcIlZBUl8xMTBcIjtcbiAgICAgICAgaWYgKG4gPD0gMTUpIHJldHVybiB0aGlzLmJ5dGVzLmV2ZXJ5KChlKT0+MHhmZiA9PT0gZSkgPyBcIk1BWFwiIDogXCJWQVJfUkVTRVJWRURcIjtcbiAgICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTtcbiAgICB9XG4gICAgZ2V0VmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIFwiVkFSXzEwXCIgPT09IHRoaXMuZ2V0VmFyaWFudCgpID8gdGhpcy5ieXRlc1s2XSA+Pj4gNCA6IHZvaWQgMDtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVVVJRCh0aGlzLmJ5dGVzLnNsaWNlKDApKTtcbiAgICB9XG4gICAgZXF1YWxzKG90aGVyKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmNvbXBhcmVUbyhvdGhlcik7XG4gICAgfVxuICAgIGNvbXBhcmVUbyhvdGhlcikge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgMTY7IGkrKyl7XG4gICAgICAgICAgICBjb25zdCBkaWZmID0gdGhpcy5ieXRlc1tpXSAtIG90aGVyLmJ5dGVzW2ldO1xuICAgICAgICAgICAgaWYgKDAgIT09IGRpZmYpIHJldHVybiBNYXRoLnNpZ24oZGlmZik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufVxuY2xhc3MgVjdHZW5lcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHJhbmRvbU51bWJlckdlbmVyYXRvcil7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gMDtcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5yYW5kb20gPSByYW5kb21OdW1iZXJHZW5lcmF0b3IgPz8gZ2V0RGVmYXVsdFJhbmRvbSgpO1xuICAgIH1cbiAgICBnZW5lcmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVPclJlc2V0Q29yZShEYXRlLm5vdygpLCAxMDAwMCk7XG4gICAgfVxuICAgIGdlbmVyYXRlT3JBYm9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVPckFib3J0Q29yZShEYXRlLm5vdygpLCAxMDAwMCk7XG4gICAgfVxuICAgIGdlbmVyYXRlT3JSZXNldENvcmUodW5peFRzTXMsIHJvbGxiYWNrQWxsb3dhbmNlKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZ2VuZXJhdGVPckFib3J0Q29yZSh1bml4VHNNcywgcm9sbGJhY2tBbGxvd2FuY2UpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSAwO1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmdlbmVyYXRlT3JBYm9ydENvcmUodW5peFRzTXMsIHJvbGxiYWNrQWxsb3dhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGdlbmVyYXRlT3JBYm9ydENvcmUodW5peFRzTXMsIHJvbGxiYWNrQWxsb3dhbmNlKSB7XG4gICAgICAgIGNvbnN0IE1BWF9DT1VOVEVSID0gMHgzZmZmZmZmZmZmZjtcbiAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHVuaXhUc01zKSB8fCB1bml4VHNNcyA8IDEgfHwgdW5peFRzTXMgPiAweGZmZmZmZmZmZmZmZikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJgdW5peFRzTXNgIG11c3QgYmUgYSA0OC1iaXQgcG9zaXRpdmUgaW50ZWdlclwiKTtcbiAgICAgICAgaWYgKHJvbGxiYWNrQWxsb3dhbmNlIDwgMCB8fCByb2xsYmFja0FsbG93YW5jZSA+IDB4ZmZmZmZmZmZmZmZmKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImByb2xsYmFja0FsbG93YW5jZWAgb3V0IG9mIHJlYXNvbmFibGUgcmFuZ2VcIik7XG4gICAgICAgIGlmICh1bml4VHNNcyA+IHRoaXMudGltZXN0YW1wKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHVuaXhUc01zO1xuICAgICAgICAgICAgdGhpcy5yZXNldENvdW50ZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghKHVuaXhUc01zICsgcm9sbGJhY2tBbGxvd2FuY2UgPj0gdGhpcy50aW1lc3RhbXApKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXIrKztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ZXIgPiBNQVhfQ09VTlRFUikge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZXN0YW1wKys7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldENvdW50ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVVVJRC5mcm9tRmllbGRzVjcodGhpcy50aW1lc3RhbXAsIE1hdGgudHJ1bmModGhpcy5jb3VudGVyIC8gMiAqKiAzMCksIHRoaXMuY291bnRlciAmIDIgKiogMzAgLSAxLCB0aGlzLnJhbmRvbS5uZXh0VWludDMyKCkpO1xuICAgIH1cbiAgICByZXNldENvdW50ZXIoKSB7XG4gICAgICAgIHRoaXMuY291bnRlciA9IDB4NDAwICogdGhpcy5yYW5kb20ubmV4dFVpbnQzMigpICsgKDB4M2ZmICYgdGhpcy5yYW5kb20ubmV4dFVpbnQzMigpKTtcbiAgICB9XG4gICAgZ2VuZXJhdGVWNCgpIHtcbiAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShVaW50MzJBcnJheS5vZih0aGlzLnJhbmRvbS5uZXh0VWludDMyKCksIHRoaXMucmFuZG9tLm5leHRVaW50MzIoKSwgdGhpcy5yYW5kb20ubmV4dFVpbnQzMigpLCB0aGlzLnJhbmRvbS5uZXh0VWludDMyKCkpLmJ1ZmZlcik7XG4gICAgICAgIGJ5dGVzWzZdID0gMHg0MCB8IGJ5dGVzWzZdID4+PiA0O1xuICAgICAgICBieXRlc1s4XSA9IDB4ODAgfCBieXRlc1s4XSA+Pj4gMjtcbiAgICAgICAgcmV0dXJuIFVVSUQub2ZJbm5lcihieXRlcyk7XG4gICAgfVxufVxuY29uc3QgZ2V0RGVmYXVsdFJhbmRvbSA9ICgpPT4oe1xuICAgICAgICBuZXh0VWludDMyOiAoKT0+MHgxMDAwMCAqIE1hdGgudHJ1bmMoMHgxMDAwMCAqIE1hdGgucmFuZG9tKCkpICsgTWF0aC50cnVuYygweDEwMDAwICogTWF0aC5yYW5kb20oKSlcbiAgICB9KTtcbmxldCBkZWZhdWx0R2VuZXJhdG9yO1xuY29uc3QgdXVpZHY3ID0gKCk9PnV1aWR2N29iaigpLnRvU3RyaW5nKCk7XG5jb25zdCB1dWlkdjdvYmogPSAoKT0+KGRlZmF1bHRHZW5lcmF0b3IgfHwgKGRlZmF1bHRHZW5lcmF0b3IgPSBuZXcgVjdHZW5lcmF0b3IoKSkpLmdlbmVyYXRlKCk7XG5jb25zdCB1dWlkdjQgPSAoKT0+dXVpZHY0b2JqKCkudG9TdHJpbmcoKTtcbmNvbnN0IHV1aWR2NG9iaiA9ICgpPT4oZGVmYXVsdEdlbmVyYXRvciB8fCAoZGVmYXVsdEdlbmVyYXRvciA9IG5ldyBWN0dlbmVyYXRvcigpKSkuZ2VuZXJhdGVWNCgpO1xuZXhwb3J0IHsgVVVJRCwgVjdHZW5lcmF0b3IsIHV1aWR2NCwgdXVpZHY0b2JqLCB1dWlkdjcsIHV1aWR2N29iaiB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/posthog-node/node_modules/@posthog/core/dist/vendor/uuidv7.mjs\n");

/***/ })

};
;